{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./src/Axis.js","webpack:///./src/Canvas.js","webpack:///./src/Input.js","webpack:///./src/Interaction.js","webpack:///./src/Is.js","webpack:///./src/Options.js","webpack:///./src/Static.js","webpack:///./src/index.js","webpack:///./src/lib/spin.min.js"],"names":["Math","log10","Static","Axis","options","graphCanvas","axis","toLowerCase","_isX","_axis","axes","x","_getSize","getContentWidth","bind","y","getContentHeight","console","error","_options","_getRatio","getRatio","prototype","hasBounds","Is","isNull","getMin","getMax","isLog","log","isInverted","inverted","_overrideBounds","min","_min","max","_max","getAxisLabel","label","getTickLabelsFont","tickLabels","size","font","getAxisLabelFont","labels","getBoundLabelWidth","minOrMax","pad","bound","round","getTextWidth","getTicks","_ticks","hasOverridenBounds","undefined","overrideBounds","bounds","calculateTicks","clearOverridenBounds","calculateBounds","newMin","newMax","calcBounds","_calculateXBounds","_calculateYBounds","warn","ticks","labelSize","width","ticker","_getDefaultTicks","length","i","coordinate","valueToPixel","value","tickMarkers","show","markers","offset","color","grid","pixelToValue","pixel","pow","formatLegendValue","legendValueFormatter","getValueToPixelCallback","num","denom","numVar","numOp","logFunc","Function","graph","dataX","debug","data","dataY","j","minValue","maxValue","graphSize","tickerValuePreFormatter","getDefaultLogTicks","getDefaultLinTicks","tickerValuePostFormatter","tickerLabelFormatter","defaultTickerLabelFormatter","ranges","divider","suffix","toString","getStepValue","mult","exp","floor","newValue","maxNumLabels","range","step","start","diff","modf","secureFloat","push","a","b","val","parseFloat","toPrecision","Canvas","parent","id","dontScale","_parent","_canvas","document","createElement","append","_context","getContext","_dontScale","style","position","margin","padding","setPosition","setSize","setParent","remove","putImageData","offsetX","offsetY","_ratio","getCanvas","getX","_x","getY","_y","getContentX","_contentX","getContentY","_contentY","getWidth","offsetWidth","getHeight","offsetHeight","clientWidth","clientHeight","getContentOffsetX","_contentOffsetX","getContentOffsetY","_contentOffsetY","text","measureText","clear","clearRect","clearRectangle","height","setZIndex","zIndex","set","member","setBorder","borderStyle","borderColor","borderWidth","_calculateContentPosition","get","rotate","rotateDegrees","PI","alignRight","valignBottom","left","right","top","bottom","resize","dpr","window","devicePixelRatio","bsr","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","scale","strokeRectangle","lineWidth","strokeStyle","strokeRect","fillRectangle","fillStyle","fillRect","fillRectangle2","x1","y1","x2","y2","strokeCircle","radius","beginPath","arc","stroke","fillCircle","fill","line","moveTo","lineTo","align","baseline","textAlign","textBaseline","save","translate","fillText","restore","array","disableMouseInteraction","compStyle","getComputedStyle","ratio","getPropertyValue","match","Input","attr","input","setAttribute","callback","parseInt","isNaN","dispatchEvent","Event","addEventListener","e","which","Interaction","_graph","updateOptions","interaction","_resizeCallback","_addResizeEvent","removeEventListener","trackMouse","_mouseTrackingCallbacks","_addMouseTrackingEvents","canvas","mousemove","mouseout","zoom","_zoomCallbacks","_addZoomEvents","mousedown","mouseup","dblclick","background","smoothing","_smoothingCallback","_addSmoothingEvent","_smoothingInput","_createInteractionData","display","render","graphChangedSize","self","timeOutResize","resizeEnd","_calculateGraphSize","_plot","_resizing","resizeStart","highlight","_renderLegend","lastWidth","lastHeight","lastPixelRatio","clearTimeout","setTimeout","mouseMoveCallback","mouseDown","_axes","valueX","values","dataXCallback","getDataCallback","res","binarySearch","valueY","found","calculateSmothingValue","valueXMin","valueXMax","span","weightMin","weightMax","valueMin","valueMax","pixelY","_interactionData","mouseOutCallback","threshold","startX","startY","lastHorizontal","lastX","lastY","callbackMouseDown","callbackMouseMove","diffX","abs","diffY","newHorizontal","callbackMouseUp","clamp","callbackDoubleClick","preventDefault","returnValue","cancelBubble","callbackMouseOut","toElement","type","tabIndex","maxLength","border","className","trim","callbackDone","_renderGraph","ctx","colors","imageData","getImageData","number","isDOM","obj","HTMLElement","isObject","isArray","isFunction","isBool","isNumber","isInt","isUint","isString","Array","isTypedArray","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","isAnyArray","isColor","div","isSize","isAlignment","noCenter","isCompositeOperation","isBorderWidth","isBorderStyle","getCompareCallback","Error","getCompareCallbacks","callbacks","types","split","isContent","compareCallback","isInOptions","Options","_isOk","_createMembers","getDefault","isOk","getColor","index","getName","names","getLegendFont","legend","title","bold","location","newLine","simplify","compositeOperation","spinner","lines","corners","direction","speed","trail","shadow","hwaccel","setMembers","oldObj","newObj","path","Object","hasOwnProperty","call","_evalOptions","dataIndex","_getDataCallbackSmoothing","centralIndex","getSmoothingWindow","low","high","sum","optionsOk","obj2","name","name2","paths","set2","msg","evalObject","evalBool","evalNumber","evalInt","evalString","evalArray","evalFunction","evalAlign","evalColor","evalFont","evalSize","evalBorderStyle","evalBorderWidth","evalCompositeOperation","evalArrayContains","evalCond","cond","eval","replaceAll","createDummyData","seed","random","sin","buffer1","ArrayBuffer","buffer2","intY","floatY1","floatY2","cos","diffToMin","diffToMax","dataCallback","mid","context","decimals","multiplier","LN10","HTMLCanvasElement","CanvasRenderingContext2D","Graph","_init","_highlights","_interaction","setOptions","_initLegend","legendDiv","getElementById","settings","isTop","alignLeft","printValue","str","getOptions","setDefaultOptions","_hasCalculatedGraphSize","setData","resetZoom","clearHighlight","_renderHighlight","spin","doSpin","_spinner","_spinnerDiv","_updateSpinnerSize","Spinner","isSpinning","stop","time","_renderTitle","_renderAxesLabels","_renderXAxis","_renderYAxis","timeEnd","_getOffset","oldX","oldWidth","oldY","valueToPixelX","valueToPixelY","globalCompositeOperation","getDataX","bsMin","bsMax","end","getDataY","minVal","maxVal","newX","closePath","tickLabelMinSize","tickLabelMaxSize","defaultOffset","boundOffset","getDefaultOptions","module","exports","define","c","d","arguments","appendChild","join","f","g","h","substring","indexOf","m","k","insertRule","cssRules","charAt","toUpperCase","slice","l","opts","defaults","n","addRule","coordsize","coordorigin","rotation","arcsize","filter","opacity","firstChild","childNodes","fps","el","insertBefore","o","timeout","parentNode","removeChild","boxShadow","transformOrigin","transform","borderRadius","animation","getElementsByTagName","sheet","styleSheet","behavior","adj"],"mappings":"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","file":"owp.graph.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","import Static from \"./Static\";\r\nimport Is from \"./Is\";\r\n\r\nif (!Math.log10) {\r\n    Math.log10 = Static.log10;\r\n}\r\n\r\n/** \r\n * The Axis class is a single axis to the Graph class.\r\n */\r\n\r\n/**\r\n * Create new graph axis.\r\n * @public\r\n * @constructor\r\n * @param {Options} options - GraphOptions object.\r\n * @param {Canvas} graphCanvas - Canvas instance for the graph.\r\n * @param {string} orientation - X or Y axis.\r\n * @returns {Axis}\r\n */\r\nfunction Axis(options, graphCanvas, axis) {\r\n    if (axis.toLowerCase() === \"x\") {\r\n        this._isX = true;\r\n        this._axis = options.axes.x;\r\n        this._getSize = graphCanvas.getContentWidth.bind(graphCanvas);\r\n    }\r\n    else if (axis.toLowerCase() === \"y\") {\r\n        this._isX = false;\r\n        this._axis = options.axes.y;\r\n        this._getSize = graphCanvas.getContentHeight.bind(graphCanvas);\r\n    }\r\n    else {\r\n        console.error(\"owp.graph ERROR: Axis: \\\"\" + axis + \"\\\" is neither X or Y.\");\r\n        return;\r\n    }\r\n    this._options = options;\r\n    this._getRatio = graphCanvas.getRatio.bind(graphCanvas);\r\n}\r\n\r\n/**\r\n * Returns true if all bounds are set.\r\n * @public\r\n * @returns {bool}\r\n */\r\nAxis.prototype.hasBounds = function () {\r\n    return !Is.isNull(this.getMin()) && !Is.isNull(this.getMax());\r\n};\r\n\r\n/**\r\n * True of this axis is logarithmic.\r\n * @public\r\n * @returns {bool}\r\n */\r\nAxis.prototype.isLog = function () {\r\n    return this._axis.log;\r\n};\r\n\r\n/**\r\n * True of this axis is inverted.\r\n * @public\r\n * @returns {bool}\r\n */\r\nAxis.prototype.isInverted = function () {\r\n    return this._axis.inverted;\r\n};\r\n\r\n/**\r\n * Get min bounds.\r\n * @public\r\n * @returns {number}\r\n */\r\nAxis.prototype.getMin = function () {\r\n    //Always prioritize override bounds.\r\n    if (this._overrideBounds) {\r\n        return this._overrideBounds.min;\r\n    }\r\n    return this._min;\r\n};\r\n\r\n/**\r\n * Get max bounds.\r\n * @public\r\n * @returns {number}\r\n */\r\nAxis.prototype.getMax = function () {\r\n    //Always prioritize override bounds.\r\n    if (this._overrideBounds) {\r\n        return this._overrideBounds.max;\r\n    }\r\n    return this._max;\r\n};\r\n\r\n/**\r\n * Get the axis label. Uses the options value formatter if set.\r\n * @public\r\n * @returns {string}\r\n */\r\nAxis.prototype.getAxisLabel = function () {\r\n    return this._axis.label;\r\n};\r\n\r\n/**\r\n * Get the font(family and size) for the tick labels.\r\n * @public\r\n * @returns {string}\r\n */\r\nAxis.prototype.getTickLabelsFont = function () {\r\n    return this._options.axes.tickLabels.size + \"px \" + this._options.axes.tickLabels.font;\r\n};\r\n\r\n/**\r\n * Get the font(family and size) for the axes labels.\r\n * @public\r\n * @returns {string}\r\n */\r\nAxis.prototype.getAxisLabelFont = function () {\r\n    return this._options.axes.labels.size + \"px \" + this._options.axes.labels.font;\r\n};\r\n\r\n/**\r\n * Get bounds label width in pixels. Uses the options value formatter if set.\r\n * @public\r\n * @returns {int}\r\n */\r\nAxis.prototype.getBoundLabelWidth = function (minOrMax, pad) {\r\n    let bound = minOrMax === \"min\" ? this.getMin() : this.getMax();\r\n    if (pad) {\r\n        bound = Static.round(bound + 0.111111111111111, 3);\r\n    }\r\n    return Static.getTextWidth(bound, this.getTickLabelsFont());\r\n};\r\n\r\n/**\r\n * Get the ticks array.\r\n * @public\r\n * @returns {array}\r\n */\r\nAxis.prototype.getTicks = function () {\r\n    return this._ticks;\r\n};\r\n\r\n/**\r\n * Return true if this axis has overridden bounds.\r\n * @public\r\n */\r\nAxis.prototype.hasOverridenBounds = function () {\r\n    return this._overrideBounds !== undefined;\r\n};\r\n\r\n/**\r\n * Override bounds. Temporary override user given bounds. \r\n * @public\r\n */\r\nAxis.prototype.overrideBounds = function (bounds) {\r\n    this._overrideBounds = bounds;\r\n    this.calculateTicks();\r\n};\r\n\r\n/**\r\n * Remove overridden bounds.\r\n * @public\r\n */\r\nAxis.prototype.clearOverridenBounds = function () {\r\n    this.overrideBounds();\r\n};\r\n\r\n/**\r\n * Calculates bounds. Uses user given option bounds first and calculates mising from data set.\r\n * @public\r\n */\r\nAxis.prototype.calculateBounds = function () {\r\n    let newMin, newMax;\r\n\r\n    //Prioritize user given bounds.\r\n    if (!Is.isNull(this._axis.bounds.min)) {\r\n        newMin = this._axis.bounds.min;\r\n    }\r\n    if (!Is.isNull(this._axis.bounds.max)) {\r\n        newMax = this._axis.bounds.max;\r\n    }\r\n\r\n    //Both bounds are not set by the user. Calculate missing.\r\n    if (Is.isNull(newMin) || Is.isNull(newMax)) {\r\n        let calcBounds;\r\n        if (this._isX) {\r\n            calcBounds = this._calculateXBounds();\r\n        }\r\n        else {\r\n            calcBounds = this._calculateYBounds();\r\n        }\r\n\r\n        if (calcBounds) {\r\n            //Use both calculated bounds.\r\n            if (Is.isNull(newMin) && Is.isNull(newMax)) {\r\n                newMin = calcBounds.min;\r\n                newMax = calcBounds.max;\r\n                //Both values are calculated. Move both.\r\n                if (newMin === newMax) {\r\n                    console.warn(\"owp.graph WARNING: Axis \" + (this._isX ? \"X\" : \"Y\") + \". bounds.min and bounds.max are equal. Move both.\");\r\n                    --newMin;\r\n                    ++newMax;\r\n                }\r\n            }\r\n            //Use only calculated min.\r\n            else if (Is.isNull(newMin)) {\r\n                newMin = calcBounds.min;\r\n                //Only move the calculated value.\r\n                if (newMin >= newMax) {\r\n                    console.warn(\"owp.graph WARNING: Axis \" + (this._isX ? \"X\" : \"Y\") + \". bounds.min and bounds.max are equal. Move min.\");\r\n                    newMin = newMax - 1;\r\n                }\r\n            }\r\n            //use only calculated max.\r\n            else if (Is.isNull(newMax)) {\r\n                newMax = calcBounds.max;\r\n                if (newMin >= newMax) {\r\n                    console.warn(\"owp.graph WARNING: Axis \" + (this._isX ? \"X\" : \"Y\") + \". bounds.min and bounds.max are equal. Move max.\");\r\n                    newMax = newMin + 1;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    if (!Is.isNull(newMin) && !Is.isNull(newMax)) {\r\n        if (this._axis.log && newMin <= 0) {\r\n            console.error(\"owp.graph ERROR: Axis \" + (this._isX ? \"X\" : \"Y\") + \". When axis is logarithmic all bounds must be greater than zero.\");\r\n            newMin = newMax = undefined;\r\n        }\r\n    }\r\n    this._min = newMin;\r\n    this._max = newMax;\r\n};\r\n\r\n/**\r\n * Calculate graph axes ticks.\r\n * @public\r\n */\r\nAxis.prototype.calculateTicks = function () {\r\n    let ticks;\r\n    const labelSize = this._isX ? this._options.axes.tickLabels.width : this._options.axes.tickLabels.size;\r\n    //Create ticks with user given options ticker.\r\n    if (this._axis.ticker) {\r\n        ticks = this._axis.ticker(this._axis.log, this.getMin(), this.getMax(), this._getSize(), labelSize);\r\n    }\r\n    //Create ticks with the default ticker.\r\n    else {\r\n        ticks = this._getDefaultTicks(this._axis.log, this.getMin(), this.getMax(), this._getSize(), labelSize);\r\n    }\r\n\r\n    if (!ticks.length) {\r\n        console.warn(\"owp.graph WARNING: Axis \" + (this._isX ? \"X\" : \"Y\") + \". Ticks list is empty.\");\r\n    }\r\n\r\n    //Update ticks with pixel coordinates.\r\n    for (let i = 0; i < ticks.length; ++i) {\r\n        ticks[i].coordinate = this.valueToPixel(ticks[i].value);\r\n    }\r\n    //Show tick markers.\r\n    if (this._options.axes.tickMarkers.show) {\r\n        ticks.markers = {\r\n            offset: this._options.axes.tickMarkers.offset,\r\n            length: this._options.axes.tickMarkers.length,\r\n            width: this._options.axes.tickMarkers.width,\r\n            color: this._options.axes.tickMarkers.color\r\n        };\r\n    }\r\n    //Show tick labels.\r\n    if (this._options.axes.tickLabels.show) {\r\n        ticks.labels = {\r\n            offset: this._options.axes.tickLabels.offset,\r\n            size: this._options.axes.tickLabels.size,\r\n            color: this._options.axes.tickLabels.color,\r\n            font: this.getTickLabelsFont(),\r\n            width: []\r\n        };\r\n        for (let i = 0; i < ticks.length; ++i) {\r\n            ticks.labels.width[i] = Static.getTextWidth(ticks[i].label, this.getTickLabelsFont());\r\n        }\r\n    }\r\n    //Show grid.\r\n    if (this._axis.grid.width) {\r\n        ticks.grid = {\r\n            width: this._axis.grid.width,\r\n            color: this._axis.grid.color\r\n        };\r\n    }\r\n    this._ticks = ticks;\r\n};\r\n\r\n/**\r\n * Get value from given pixel coordinate.\r\n * @public\r\n * @returns {number}\r\n */\r\nAxis.prototype.pixelToValue = function (pixel) {\r\n    //Logarithmic\r\n    if (this._axis.log) {\r\n        //Logarithmic inverted orientation.\r\n        if (this._isX ? this._axis.inverted : !this._axis.inverted) {\r\n            return Math.pow(10, pixel / this._getSize() * log10(this.getMin() / this.getMax()) + log10(this.getMax()));\r\n        }\r\n        //Logarithmic normal orientation.\r\n        else {\r\n            return Math.pow(10, pixel / this._getSize() * log10(this.getMax() / this.getMin()) + log10(this.getMin()));\r\n        }\r\n    }\r\n    //Linear\r\n    else {\r\n        //Linear inverted orientation.\r\n        if (this._isX ? this._axis.inverted : !this._axis.inverted) {\r\n            return pixel / this._getSize() * (this.getMin() - this.getMax()) + this.getMax();\r\n        }\r\n        //Linear normal orientation.\r\n        else {\r\n            return pixel / this._getSize() * (this.getMax() - this.getMin()) + this.getMin();\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * Get pixel coordinate from given value.\r\n * @public\r\n * @returns {number}\r\n */\r\nAxis.prototype.valueToPixel = function (value) {\r\n    //Logarithmic\r\n    if (this._axis.log) {\r\n        //Logarithmic inverted orientation.\r\n        if (this._isX ? this._axis.inverted : !this._axis.inverted) {\r\n            return log10(value / this.getMax()) / log10(this.getMin() / this.getMax()) * this._getSize();\r\n        }\r\n        //Logarithmic normal orientation.\r\n        else {\r\n            return log10(value / this.getMin()) / log10(this.getMax() / this.getMin()) * this._getSize();\r\n        }\r\n    }\r\n    //Linear\r\n    else {\r\n        //Linear inverted orientation.\r\n        if (this._isX ? this._axis.inverted : !this._axis.inverted) {\r\n            return (value - this.getMax()) / (this.getMin() - this.getMax()) * this._getSize();\r\n        }\r\n        //Linear normal orientation.\r\n        else {\r\n            return (value - this.getMin()) / (this.getMax() - this.getMin()) * this._getSize();\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * Format the given value. Uses value formatter in options if available.\r\n * @public\r\n * @param {number} value\r\n * @returns {string}\r\n */\r\nAxis.prototype.formatLegendValue = function (value) {\r\n    //Use user given formatter.\r\n    if (this._axis.legendValueFormatter) {\r\n        return this._axis.legendValueFormatter(value);\r\n    }\r\n    //Use default value formatter.\r\n    else {\r\n        return Static.round(value, 5);\r\n    }\r\n};\r\n\r\n/**\r\n * Callback function for getting pixel coordinate from a given value.\r\n * Much faster than asking this class valueToPixel function for each value.\r\n * Needs to be required if window changes size or new bounds are set.\r\n * Safest to aquire for each render pass.\r\n * Calculates scaling ratio into the pixel coordinate. i.e. scaling needs to be disabled on the canvas.\r\n * @callback Axis~valueToPixelCallback\r\n * @param {int} index\r\n * @returns {number}\r\n */\r\n\r\n/**\r\n * Get a callback to calculate the pixel coordinate for a given value.\r\n * Used by the graph render function to improve performance.\r\n * @public\r\n * @returns {Axis~valueToPixelCallback}\r\n */\r\nAxis.prototype.getValueToPixelCallback = function () {\r\n    let num, denom, numVar, numOp, logFunc;\r\n    const size = this._getSize() * this._getRatio();\r\n\r\n    //Inverted X or normal Y.\r\n    if (this._isX ? this._axis.inverted : !this._axis.inverted) {\r\n        numVar = this.getMax();\r\n        denom = this._axis.log ? log10(this.getMin() / this.getMax()) : this.getMin() - this.getMax();\r\n    }\r\n    //Normal X or inverted Y.\r\n    else {\r\n        numVar = this.getMin();\r\n        denom = this._axis.log ? log10(this.getMax() / this.getMin()) : this.getMax() - this.getMin();\r\n    }\r\n\r\n    //Axis is logarithmic.\r\n    if (this._axis.log) {\r\n        numOp = \"/\";\r\n        logFunc = \"Math.log10\";\r\n    }\r\n    //Axis is linear.\r\n    else {\r\n        numOp = \"-\";\r\n        logFunc = \"\";\r\n    }\r\n\r\n    //Only do the numerator operation on the numerator if the variable is not zero.\r\n    if (numVar) {\r\n        num = logFunc + \"(value \" + numOp + \" \" + numVar + \")\";\r\n    }\r\n    else {\r\n        num = logFunc + \"(value)\";\r\n    }\r\n\r\n    //Only do the fraction if the denominator is not 1.\r\n    if (denom !== 1) {\r\n        denom = \"/ \" + denom;\r\n    }\r\n    else {\r\n        denom = \"\";\r\n    }\r\n\r\n    return new Function(\"value\", \"return \" + num + \" \" + denom + \" * \" + size);\r\n};\r\n\r\n/**\r\n * Calculate X-axis bounds.\r\n * @private\r\n * @returns {object} {int min, int max}\r\n */\r\nAxis.prototype._calculateXBounds = function () {\r\n    //Calculate missing X-axis bounds from dataX values.\r\n    if (this._options.graph.dataX.length) {\r\n        if (this._options.debug) {\r\n            console.log(\"owp.graph DEBUG: X-bounds not set, but X-data is. Calculate X-bounds from X-data values.\");\r\n        }\r\n        let min = 4294967296;\r\n        let max = -4294967296;\r\n        for (let i = 0; i < this._options.graph.dataX.length; ++i) {\r\n            const data = this._options.graph.dataX[i];\r\n            min = Math.min(min, data[0], data[data.length - 1]);\r\n            max = Math.max(max, data[0], data[data.length - 1]);\r\n        }\r\n        return { min: min, max: max };\r\n    }\r\n    //Calculate X-axis bounds from dataY length.\r\n    else if (this._options.graph.dataY.length) {\r\n        if (this._options.debug) {\r\n            console.log(\"owp.graph DEBUG: X-bounds and X-data not set, but Y-data is. Calculate X-bounds from Y-data length.\");\r\n        }\r\n        let max = 0;\r\n        for (let i = 0; i < this._options.graph.dataY.length; ++i) {\r\n            max = Math.max(max, this._options.graph.dataY[i].length);\r\n        }\r\n        return { min: 1, max };\r\n    }\r\n    else if (this._options.debug) {\r\n        console.log(\"owp.graph DEBUG: X-bounds, X-data and Y-data not set. Can't calculate X-bounds.\");\r\n        return;\r\n    }\r\n};\r\n\r\n/**\r\n * Calculate Y-axis bounds.\r\n * @private\r\n * @returns {object} {int min, int max}\r\n */\r\nAxis.prototype._calculateYBounds = function () {\r\n    //Calculate Y-axis bounds from dataY values.\r\n    if (this._options.graph.dataY.length) {\r\n        if (this._options.debug) {\r\n            console.log(\"owp.graph DEBUG: Y-bounds not set, but Y-data is. Calculate Y-bounds from Y-data values.\");\r\n        }\r\n        let min = null;\r\n        let max = null;\r\n        for (let i = 0; i < this._options.graph.dataY.length; ++i) {\r\n            const data = this._options.graph.dataY[i];\r\n            if (data.length && min === null) {\r\n                min = 4294967296;\r\n                max = -4294967296;\r\n            }\r\n            for (let j = 0; j < data.length; ++j) {\r\n                min = Math.min(min, data[j]);\r\n                max = Math.max(max, data[j]);\r\n            }\r\n        }\r\n        return min !== null\r\n            ? { min, max }\r\n            : null;\r\n    }\r\n    else if (this._options.debug) {\r\n        console.log(\"owp.graph DEBUG: Y-bounds and Y-data not set. Can't calculate Y-bounds.\");\r\n        return;\r\n    }\r\n};\r\n\r\n/**\r\n * Default get ticks funciton. Used when no ticker is set in options.\r\n * @private\r\n * @param {bool} isLog - True if the values are going to be logarithmically distributed.\r\n * @param {number} minValue - Min/lower bounds value.\r\n * @param {number} maxValue - Max/upper bounds value.\r\n * @param {int} graphSize - Size(width or height) of graph in pixels.\r\n * @param {int} labelSize - Size(width or height) of tick labels in pixels.\r\n * @returns {array<{number, string}>}\r\n */\r\nAxis.prototype._getDefaultTicks = function (isLog, minValue, maxValue, graphSize, labelSize) {\r\n    //Pre-format ticker values.\r\n    if (this._axis.tickerValuePreFormatter) {\r\n        minValue = this._axis.tickerValuePreFormatter(minValue);\r\n        maxValue = this._axis.tickerValuePreFormatter(maxValue);\r\n    }\r\n\r\n    let ticks;\r\n\r\n    //If the range is to small even a log axis will get linear values.\r\n    if (isLog && maxValue - minValue >= 4 * minValue) {\r\n        ticks = getDefaultLogTicks(minValue, maxValue);\r\n    }\r\n    else {\r\n        ticks = getDefaultLinTicks(minValue, maxValue, graphSize, labelSize);\r\n    }\r\n\r\n    //Post-format ticker values.\r\n    if (this._axis.tickerValuePostFormatter) {\r\n        for (let i = 0; i < ticks.length; ++i) {\r\n            ticks[i].value = this._axis.tickerValuePostFormatter(ticks[i].value);\r\n        }\r\n    }\r\n\r\n    //Add user formatted labels.\r\n    if (this._axis.tickerLabelFormatter) {\r\n        for (let i = 0; i < ticks.length; ++i) {\r\n            ticks[i].label = this._axis.tickerLabelFormatter(ticks[i].value);\r\n        }\r\n    }\r\n    //Add default formatted labels.\r\n    else {\r\n        for (let i = 0; i < ticks.length; ++i) {\r\n            ticks[i].label = defaultTickerLabelFormatter(ticks[i].value);\r\n        }\r\n    }\r\n\r\n    return ticks;\r\n};\r\n\r\n\r\nfunction defaultTickerLabelFormatter(value) {\r\n    if (value < 0) {\r\n        return '-' + defaultTickerLabelFormatter(-value);\r\n    }\r\n    let ranges = [];\r\n    if (value >= 1e3) {\r\n        ranges = [\r\n            { divider: 1e24, suffix: 'Y' },\r\n            { divider: 1e21, suffix: 'Z' },\r\n            { divider: 1e18, suffix: 'E' },\r\n            { divider: 1e15, suffix: 'P' },\r\n            { divider: 1e12, suffix: 'T' },\r\n            { divider: 1e9, suffix: 'G' },\r\n            { divider: 1e6, suffix: 'M' },\r\n            { divider: 1e3, suffix: 'k' }\r\n        ];\r\n    }\r\n    else if (value < 1e-2) {\r\n        ranges = [\r\n            { divider: 1e-3, suffix: 'm' },\r\n            { divider: 1e-6, suffix: 'µ' },\r\n            { divider: 1e-9, suffix: 'n' },\r\n            { divider: 1e-12, suffix: 'p' },\r\n            { divider: 1e-15, suffix: 'f' },\r\n            { divider: 1e-18, suffix: 'a' },\r\n            { divider: 1e-21, suffix: 'z' },\r\n            { divider: 1e-24, suffix: 'y' }\r\n        ];\r\n    }\r\n    for (let i = 0; i < ranges.length; i++) {\r\n        if (value >= ranges[i].divider) {\r\n            return Static.round(value / ranges[i].divider, 3).toString() + ranges[i].suffix;\r\n        }\r\n    }\r\n    return value.toString();\r\n}\r\n\r\n//For a given value calculate the best step value.\r\nfunction getStepValue(isLog, value) {\r\n    const mult = isLog ? [1, 10] : [1, 2, 5, 10];\r\n    const exp = Math.floor(log10(value));\r\n    for (let i = 0; i < mult.length; ++i) {\r\n        const newValue = Math.pow(10, exp) * mult[i];\r\n        if (newValue >= value) {\r\n            return newValue;\r\n        }\r\n    }\r\n}\r\n\r\n//Get linear ticks.\r\nfunction getDefaultLinTicks(minValue, maxValue, graphSize, labelSize) {\r\n    //Max number of labels.\r\n    const maxNumLabels = graphSize / (labelSize * 1.5);\r\n    //Value range\r\n    const range = maxValue - minValue;\r\n    //Get ticker value step.\r\n    const step = getStepValue(false, range / maxNumLabels);\r\n    //Calculate start pos.\r\n    let start = minValue;\r\n    //Make sure start is on a step position.\r\n    const diff = modf(start, step);\r\n    if (diff > 0) {\r\n        start += step - diff;\r\n    }\r\n    if (diff < 0) {\r\n        start -= diff;\r\n    }\r\n    const ticks = [];\r\n    for (; start <= maxValue; start += step) {\r\n        start = secureFloat(start);\r\n        ticks.push({ value: start });\r\n    }\r\n    return ticks;\r\n}\r\n\r\n/**\r\n * Modulus for float.\r\n * @public\r\n * @param {number} a\r\n * @param {number} b\r\n * @returns {number}\r\n */\r\nfunction modf(a, b) {\r\n    return a - Math.round(a / b) * b;\r\n}\r\n\r\n//Get logarithmic ticks.\r\nfunction getDefaultLogTicks(minValue, maxValue) {\r\n    const ticks = [];\r\n    let step = getStepValue(true, minValue);\r\n    for (; ;) {\r\n        for (let i = 1; i < 10; ++i) {\r\n            let value = i * step;\r\n            if (value > maxValue) {\r\n                return ticks;\r\n            }\r\n            value = secureFloat(value);\r\n            ticks.push({ value: value });\r\n        }\r\n        step *= 10;\r\n    }\r\n}\r\n\r\nexport default Axis;\r\n\r\n/**\r\n * Secure float precision.\r\n * @public\r\n * @param {number} val\r\n * @returns {number}\r\n */\r\nfunction secureFloat(val) {\r\n    return parseFloat(val.toPrecision(15));\r\n}\r\n\r\nconst log10 = Static.log10;","/** \r\n * The Canvas class is a wrapper for the HTML5 canvas 2D context.\r\n * Used to automatically get pixel perfect canvas size \r\n * and to make it easier to draw simple elements.\r\n */\r\n\r\n/**\r\n * Create a new canvas. Canvas is automatically scaled to be pixel perfect with screen.\r\n * @public\r\n * @constructor\r\n * @param {parent} parent - Parent div.\r\n * @param {bool} dontScale - If True the scale transformation wont be set for this canvas. Scaling needs to be done manually.\r\n * @returns {Canvas}\r\n */\r\nfunction Canvas(parent, id, dontScale) {\r\n    this._parent = parent;\r\n\r\n    this._canvas = document.createElement(\"canvas\");\r\n    if (id) {\r\n        this._canvas.id = id;\r\n    }\r\n    parent.append(this._canvas);\r\n    this._context = this._canvas.getContext(\"2d\");\r\n\r\n    this._dontScale = dontScale;\r\n\r\n    this._canvas.style.position = \"absolute\";\r\n    this._canvas.style.margin = 0;\r\n    this._canvas.style.padding = 0;\r\n    this._canvas.style[\"box-sizing\"] = \"border-box\";\r\n\r\n    //Set default position.\r\n    this.setPosition(0, 0);\r\n    //Fill parent div is default size.\r\n    this.setSize(\"100%\", \"100%\");\r\n}\r\n\r\n/**\r\n * Set a new parent for the canvas. Leave empty to only remove current parent.\r\n * @public\r\n * @param {parent} div - Parent div.\r\n */\r\nCanvas.prototype.setParent = function (parent) {\r\n    this._canvas.remove();\r\n    if (parent) {\r\n        parent.append(this._canvas);\r\n    }\r\n};\r\n\r\nCanvas.prototype.putImageData = function (data, x, y, offsetX, offsetY) {\r\n    this._context.putImageData(data, x * this._ratio + offsetX, y * this._ratio + offsetY);\r\n};\r\n\r\n/**\r\n * Get the html5 canvas.\r\n * @public\r\n * @returns {canvas}\r\n */\r\nCanvas.prototype.getCanvas = function () {\r\n    return this._canvas;\r\n};\r\n\r\n/**\r\n * Get the html5 2D context. Used when performance and less function calls are needed.\r\n * @public\r\n * @returns {context}\r\n */\r\nCanvas.prototype.getContext = function () {\r\n    return this._context;\r\n};\r\n\r\n/**\r\n * Get the x-coordinate relative to the canvas parent.\r\n * @public\r\n * @returns {int} X-coordinate in pixels.\r\n */\r\nCanvas.prototype.getX = function () {\r\n    return this._x;\r\n};\r\n\r\n/**\r\n * Get the y-coordinate relative to the canvas parent.\r\n * @public\r\n * @returns {int} Y-coordinate in pixels.\r\n */\r\nCanvas.prototype.getY = function () {\r\n    return this._y;\r\n};\r\n\r\n/**\r\n * Get the content x-coordinate relative to the canvas parent.\r\n * @public\r\n * @returns {int} X-coordinate in pixels.\r\n */\r\nCanvas.prototype.getContentX = function () {\r\n    return this._contentX;\r\n};\r\n\r\n/**\r\n * Get the content y-coordinate relative to the canvas parent.\r\n * @public\r\n * @returns {int} Y-coordinate in pixels.\r\n */\r\nCanvas.prototype.getContentY = function () {\r\n    return this._contentY;\r\n};\r\n\r\n/**\r\n * Get the canvas width.\r\n * @public\r\n * @returns {int} - Width in pixels.\r\n */\r\nCanvas.prototype.getWidth = function () {\r\n    //return this._canvas.outerWidth(); TODO\r\n    return this._canvas.offsetWidth;\r\n};\r\n\r\n/**\r\n * Get the canvas height.\r\n * @public\r\n * @returns {int} - Height in pixels.\r\n */\r\nCanvas.prototype.getHeight = function () {\r\n    //return this._canvas.outerHeight(); TODO\r\n    return this._canvas.offsetHeight;\r\n};\r\n\r\n/**\r\n * Get the canvas content width.\r\n * @public\r\n * @returns {int} - Width in pixels.\r\n */\r\nCanvas.prototype.getContentWidth = function () {\r\n    //return this._canvas.width(); TODO\r\n    return this._canvas.clientWidth;\r\n};\r\n\r\n/**\r\n * Get the canvas content height.\r\n * @public\r\n * @returns {int} - Height in pixels.\r\n */\r\nCanvas.prototype.getContentHeight = function () {\r\n    //return this._canvas.height(); TODO\r\n    return this._canvas.clientHeight;\r\n};\r\n\r\n/**\r\n * Get the content X-axis offset from the canvas edge. Border, padding etc.\r\n * @returns {Canvas._contentOffsetX}\r\n */\r\nCanvas.prototype.getContentOffsetX = function () {\r\n    return this._contentOffsetX;\r\n};\r\n\r\n/**\r\n * Get the content Y-axis offset from the canvas edge. Border, padding etc.\r\n * @returns {Canvas._contentOffsetX}\r\n */\r\nCanvas.prototype.getContentOffsetY = function () {\r\n    return this._contentOffsetY;\r\n};\r\n\r\n\r\n/**\r\n * Get text with in pixels.\r\n * @public\r\n * @param {string} text - Text to measure.\r\n * @param {fontString} font - Font to use.\r\n * @returns {int} Width in pixels.\r\n */\r\nCanvas.prototype.getTextWidth = function (text, font) {\r\n    if (font) {\r\n        this._context.font = font;\r\n    }\r\n    return this._context.measureText(text).width;\r\n};\r\n\r\n/**\r\n * Clear canvas.\r\n * @public\r\n */\r\nCanvas.prototype.clear = function () {\r\n    //Scaling is done automatically.\r\n    if (!this._dontScale) {\r\n        this._context.clearRect(0, 0, this.getContentWidth(), this.getContentHeight());\r\n    }\r\n    //Do scaling manually.\r\n    else {\r\n        this._context.clearRect(0, 0, this.getContentWidth() * this._ratio, this.getContentHeight() * this._ratio);\r\n    }\r\n};\r\n\r\n/**\r\n * Clear area.\r\n * @public\r\n * @param {int} x - X-coordinate in pixels.\r\n * @param {int} y - Y-coordinate in pixels.\r\n * @param {int} width - Width in pixels.\r\n * @param {int} height - Height in pixels.\r\n */\r\nCanvas.prototype.clearRectangle = function (x, y, width, height) {\r\n    //Scaling is done automatically.\r\n    if (!this._dontScale) {\r\n        this._context.clearRect(x, y, width, height);\r\n    }\r\n    //Do scaling manually.\r\n    else {\r\n        this._context.clearRect(x * this._ratio, y * this._ratio, width * this._ratio, height * this._ratio);\r\n    }\r\n};\r\n\r\n/**\r\n * Set z-index.\r\n * @public\r\n * @param {int} zIndex - The new Z-index.\r\n */\r\nCanvas.prototype.setZIndex = function (zIndex) {\r\n    this._canvas.style[\"z-index\"] = zIndex;\r\n};\r\n\r\n/**\r\n * Set any context member.\r\n * @public\r\n * @param {string} member - Member name.\r\n * @param {type} value - Member value.\r\n */\r\nCanvas.prototype.set = function (member, value) {\r\n    this._context[member] = value;\r\n};\r\n\r\n/**\r\n * Set canvas border parameters.\r\n * @param {string} style\r\n * @param {string} color\r\n * @param {string} width\r\n */\r\nCanvas.prototype.setBorder = function (style, color, width) {\r\n    this._canvas.style.borderStyle = style;\r\n    this._canvas.style.borderColor = color;\r\n    this._canvas.style.borderWidth = width;\r\n    this._calculateContentPosition();\r\n};\r\n\r\n/**\r\n * Get any context member.\r\n * @public\r\n * @param {string} member - Member name.\r\n * @returns {type}\r\n */\r\nCanvas.prototype.get = function (member) {\r\n    return this._context[member];\r\n};\r\n\r\n/**\r\n * Get scale ratio.\r\n * @public\r\n * @returns {number}\r\n */\r\nCanvas.prototype.getRatio = function () {\r\n    return this._ratio;\r\n};\r\n\r\n/**\r\n * Rotate the canvas.\r\n * @public\r\n * @param {number} rotateDegrees - Number of degrees to rotate. Positivenumbers = clockwise.\r\n */\r\nCanvas.prototype.rotate = function (rotateDegrees) {\r\n    this._context.rotate(rotateDegrees * Math.PI / 180);\r\n};\r\n\r\n/**\r\n * Set position of canvas relative to it's parent.\r\n * @public\r\n * @param {int} x - X-coordinate in pixels.\r\n * @param {int} y - Y-coordinate in pixels.\r\n */\r\nCanvas.prototype.setPosition = function (x, y, alignRight, valignBottom) {\r\n    this._x = x;\r\n    this._y = y;\r\n    if (alignRight) {\r\n        this._canvas.style.left = \"\";\r\n        this._canvas.style.right = x + \"px\";\r\n    }\r\n    else {\r\n        this._canvas.style.left = x + \"px\";\r\n        this._canvas.style.right = \"\";\r\n    }\r\n    if (valignBottom) {\r\n        this._canvas.style.top = \"\";\r\n        this._canvas.style.bottom = y + \"px\";\r\n    }\r\n    else {\r\n        this._canvas.style.top = y + \"px\";\r\n        this._canvas.style.bottom = \"\";\r\n    }\r\n    this._calculateContentPosition();\r\n};\r\n\r\n/**\r\n * Set size of canvas. \r\n * @public\r\n * @param {int} width - Width in pixels. \r\n * @param {int} height - Height in pixels.\r\n */\r\nCanvas.prototype.setSize = function (width, height) {\r\n    if (width !== undefined) {\r\n        if (typeof width === \"number\") {\r\n            width = width + \"px\";\r\n        }\r\n        this._canvas.style.width = width;\r\n    }\r\n    if (height !== undefined) {\r\n        if (typeof height === \"number\") {\r\n            height = height + \"px\";\r\n        }\r\n        this._canvas.style.height = height;\r\n    }\r\n    this.resize();\r\n};\r\n\r\n/**\r\n * Resize canvas to match the width and height. Automatically scales to be pixel perfect.\r\n * @public\r\n */\r\nCanvas.prototype.resize = function () {\r\n    //Calculate pixel ratio.\r\n    const dpr = window.devicePixelRatio || 1;\r\n    const bsr = this._context.webkitBackingStorePixelRatio ||\r\n        this._context.mozBackingStorePixelRatio ||\r\n        this._context.msBackingStorePixelRatio ||\r\n        this._context.oBackingStorePixelRatio ||\r\n        this._context.backingStorePixelRatio || 1;\r\n    this._ratio = dpr / bsr;\r\n\r\n    //Update canvas.\r\n    this._canvas.width = this.getContentWidth() * this._ratio;\r\n    this._canvas.height = this.getContentHeight() * this._ratio;\r\n\r\n    //Check the dont scale parameter before scaling. Scaling is a time consuming process and might not be desired.\r\n    if (!this._dontScale) {\r\n        this._context.scale(this._ratio, this._ratio);\r\n    }\r\n};\r\n\r\n/**\r\n * Draw a stroke/line rectangle.\r\n * @public\r\n * @param {int} x - X-coordinate in pixels.\r\n * @param {int} y - Y-coordinate in pixels.\r\n * @param {int} width - Width in pixels.\r\n * @param {int} height - Height in pixels.\r\n * @param {int} lineWidth - Stroked line width in pixels.\r\n * @param {string} color - Color of stroked line.\r\n */\r\nCanvas.prototype.strokeRectangle = function (x, y, width, height, lineWidth, color) {\r\n    if (lineWidth) {\r\n        this._context.lineWidth = lineWidth;\r\n    }\r\n    if (color) {\r\n        this._context.strokeStyle = color;\r\n    }\r\n    //Line width build in both direction. Compensate coordinates.\r\n    x += this._context.lineWidth / 2;\r\n    y += this._context.lineWidth / 2;\r\n    width -= this._context.lineWidth;\r\n    height -= this._context.lineWidth;\r\n    this._context.strokeRect(x, y, width, height);\r\n};\r\n\r\n/**\r\n * Draw a filled rectangle using 1 coordinate.\r\n * @public\r\n * @param {int} x - X-coordinate in pixels.\r\n * @param {int} y - Y-coordinate in pixels.\r\n * @param {int} width - Width in pixels.\r\n * @param {int} height - Height in pixels.\r\n * @param {string} color - Color of filled rectangle.\r\n */\r\nCanvas.prototype.fillRectangle = function (x, y, width, height, color) {\r\n    if (color) {\r\n        this._context.fillStyle = color;\r\n    }\r\n    this._context.fillRect(x, y, width, height);\r\n};\r\n\r\n/**\r\n * Draw a filled rectangle using 2 coordinates.\r\n * @public\r\n * @param {int} x1 - First X-axis pixel.\r\n * @param {int} y1 - First Y-axis pixel.\r\n * @param {int} x2 - Second X-axis pixel.\r\n * @param {int} y2 - Second Y-axis pixel.\r\n * @param {string} color - Color of filled rectangle.\r\n */\r\nCanvas.prototype.fillRectangle2 = function (x1, y1, x2, y2, color) {\r\n    if (color) {\r\n        this._context.fillStyle = color;\r\n    }\r\n    this._context.fillRect(x1, y1, x2 - x1, y2 - y1);\r\n};\r\n\r\n/**\r\n * Draw a stroked circle.\r\n * @public\r\n * @param {int} x - X-coordinate in pixels.\r\n * @param {int} y - Y-coordinate in pixels.\r\n * @param {int} radius - Radius in pixels.\r\n * @param {string} color - Color of stroked line..\r\n * @param {int} width - Width of stroked line.\r\n */\r\nCanvas.prototype.strokeCircle = function (x, y, radius, color, width) {\r\n    if (color) {\r\n        this._context.strokeStyle = color;\r\n    }\r\n    if (width) {\r\n        this._context.lineWidth = width;\r\n    }\r\n    this._context.beginPath();\r\n    this._context.arc(x, y, radius, 0, 2 * Math.PI, false);\r\n    this._context.stroke();\r\n};\r\n\r\n/**\r\n * Draw a filled circle.\r\n * @public\r\n * @param {int} x - X-coordinate in pixels.\r\n * @param {int} y - Y-coordinate in pixels.\r\n * @param {int} radius - Radius in pixels.\r\n * @param {string} color - Color of stroked line..\r\n */\r\nCanvas.prototype.fillCircle = function (x, y, radius, color) {\r\n    if (color) {\r\n        this._context.fillStyle = color;\r\n    }\r\n    this._context.beginPath();\r\n    this._context.arc(x, y, radius, 0, 2 * Math.PI, false);\r\n    this._context.fill();\r\n};\r\n\r\n/**\r\n * Draw a line.\r\n * @public\r\n * @param {int} x1 - First x-coordinate in pixels.\r\n * @param {int} y1 - First y-coordinate in pixels.\r\n * @param {int} x2 - Second x-coordinate in pixels.\r\n * @param {int} y2 - Second y-coordinate in pixels.\r\n * @param {int} lineWidth - Stroked line width in pixels.\r\n * @param {string} color - Color of stroked line.\r\n */\r\nCanvas.prototype.line = function (x1, y1, x2, y2, lineWidth, color) {\r\n    if (lineWidth) {\r\n        this._context.lineWidth = lineWidth;\r\n    }\r\n    if (color) {\r\n        this._context.strokeStyle = color;\r\n    }\r\n    this._context.beginPath();\r\n    this._context.moveTo(x1, y1);\r\n    this._context.lineTo(x2, y2);\r\n    this._context.stroke();\r\n};\r\n\r\n/**\r\n * Draw filled text.\r\n * @public\r\n * @param {string} text - Text to draw.\r\n * @param {int} x - X-coordinate in pixels.\r\n * @param {int} y - Y-coordinate in pixels.\r\n * @param {string} font - Font to use.\r\n * @param {string} color - Color to use.\r\n * @param {string} align - Alignment ot use.\r\n * @param {string} baseline - Baseline to use.\r\n * @param {number} rotate - Rotate text number of degrees.\r\n */\r\nCanvas.prototype.text = function (text, x, y, font, color, align, baseline, rotate) {\r\n    if (font) {\r\n        this._context.font = font;\r\n    }\r\n    if (color) {\r\n        this._context.fillStyle = color;\r\n    }\r\n    if (align) {\r\n        this._context.textAlign = align;\r\n    }\r\n    if (baseline) {\r\n        this._context.textBaseline = baseline;\r\n    }\r\n    if (rotate) {\r\n        this._context.save();\r\n        this._context.translate(x, y);\r\n        this._context.rotate(rotate * Math.PI / 180);\r\n        this._context.fillText(text, 0, 0);\r\n        this._context.restore();\r\n    }\r\n    else {\r\n        this._context.fillText(text, x, y);\r\n    }\r\n};\r\n\r\n/**\r\n * Plot graph curve.\r\n * @public\r\n * @param {array} array - Input data. [[x, y], [x, y]]\r\n * @param {string} color - Color of stroked line.\r\n * @param {int} lineWidth - Width in pixels of stroked line.\r\n */\r\nCanvas.prototype.graph = function (array, color, lineWidth) {\r\n    if (color) {\r\n        this._context.strokeStyle = color;\r\n    }\r\n    if (lineWidth) {\r\n        this._context.lineWidth = lineWidth;\r\n    }\r\n    this._context.beginPath();\r\n    this._context.moveTo(array[0][0], array[0][1]);\r\n    for (let i = 1; i < array.length; ++i) {\r\n        this._context.lineTo(array[i][0], array[0][1]);\r\n    }\r\n    this._context.stroke();\r\n};\r\n\r\n/**\r\n * Fill entire canvas with the given color.\r\n * @public\r\n * @param {string} color - Color to use.\r\n */\r\nCanvas.prototype.fill = function (color) {\r\n    this.fillRectangle(0, 0, this.getContentWidth(), this.getContentHeight(), color);\r\n};\r\n\r\nCanvas.prototype.disableMouseInteraction = function () {\r\n    this._canvas.style[\"pointer-events\"] = \"none\";\r\n};\r\n\r\n/**\r\n * Calculate content X and Y.\r\n * @private\r\n */\r\nCanvas.prototype._calculateContentPosition = function () {\r\n    const compStyle = getComputedStyle(this._canvas);\r\n    const ratio = this._ratio !== undefined ? this._ratio : 1;\r\n    this._contentOffsetX = Math.round(ratio * parseFloat(compStyle.getPropertyValue(\"border-left-width\").match(/\\d+/)));\r\n    this._contentOffsetY = Math.round(ratio * parseFloat(compStyle.getPropertyValue(\"border-top-width\").match(/\\d+/)));\r\n    this._contentX = this._x + this._contentOffsetX;\r\n    this._contentY = this._y + this._contentOffsetY;\r\n};\r\n\r\nexport default Canvas;","function Input(attr) {\n    const input = document.createElement(\"input\");\n    if (attr) {\n        for (let i in attr) {\n            input.setAttribute(i, attr[i]);\n        }\n    }\n\n    function callback() {\n        const value = parseInt(input.value);\n        if (isNaN(value) || value < 0) {\n            input.value = 0;\n        }\n        //Trigger custom enter event.\n        input.dispatchEvent(new Event(\"done\"));\n    }\n\n    //Loose focus or enter fires the format callback.\n    input.addEventListener(\"change\", callback);\n\n    //Enter key pressed.\n    input.addEventListener(\"keypress\", e => {\n        if (e.which === 13) {\n            callback();\n        }\n    });\n\n    return input;\n}\n\nexport default Input;","import Static from \"./Static\";\r\nimport Input from \"./Input\";\r\n\r\n/** \r\n * Interaction is a class that handles the user interaction for the Graph class.\r\n */\r\n\r\n/**\r\n * Create a new Interaction.\r\n * @public\r\n * @constructor\r\n * @param {Graph} graph - Graph instance this interaction belongs to.\r\n * @returns {Interaction}\r\n */\r\nfunction Interaction(graph) {\r\n    this._graph = graph;\r\n}\r\n\r\n/**\r\n * Update(add/remove) interaction events.\r\n * @public\r\n */\r\nInteraction.prototype.updateOptions = function () {\r\n    //Resizing.\r\n    if (this._graph._options.interaction.resize && !this._resizeCallback) {\r\n        this._resizeCallback = this._addResizeEvent();\r\n    }\r\n    else if (!this._graph._options.interaction.resize && this._resizeCallback) {\r\n        window.removeEventListener(\"resize\", this._resizeCallback);\r\n        this._resizeCallback = undefined;\r\n    }\r\n\r\n    //Mouse tracking.\r\n    if (this._graph._options.interaction.trackMouse && !this._mouseTrackingCallbacks) {\r\n        this._mouseTrackingCallbacks = this._addMouseTrackingEvents();\r\n    }\r\n    else if (!this._graph._options.interaction.trackMouse && this._mouseTrackingCallbacks) {\r\n        const canvas = this._graph._canvas.interaction.getCanvas();\r\n        canvas.removeEventListener(\"mousemove\", this._mouseTrackingCallbacks.mousemove);\r\n        canvas.removeEventListener(\"mouseout\", this._mouseTrackingCallbacks.mouseout);\r\n        this._mouseTrackingCallbacks = undefined;\r\n    }\r\n\r\n    //Zooming.\r\n    if (this._graph._options.interaction.zoom && !this._zoomCallbacks) {\r\n        this._zoomCallbacks = this._addZoomEvents();\r\n    }\r\n    else if (!this._graph._options.interaction.zoom && this._zoomCallbacks) {\r\n        let canvas = this._graph._canvas.interaction.getCanvas();\r\n        canvas.removeEventListener(\"mousedown\", this._zoomCallbacks.mousedown);\r\n        canvas.removeEventListener(\"mousemove\", this._zoomCallbacks.mousemove);\r\n        canvas.removeEventListener(\"mouseup\", this._zoomCallbacks.mouseup);\r\n        canvas.removeEventListener(\"dblclick\", this._zoomCallbacks.dblclick);\r\n        canvas = this._graph._canvas.graph.getCanvas();\r\n        canvas.removeEventListener(\"mouseup\", this._zoomCallbacks.mouseup);\r\n        canvas = this._graph._canvas.background.getCanvas();\r\n        canvas.removeEventListener(\"mouseup\", this._zoomCallbacks.mouseup);\r\n        canvas.removeEventListener(\"mouseout\", this._zoomCallbacks.mouseout);\r\n        this._zoomCallbacks = undefined;\r\n    }\r\n\r\n    //Smooth option.\r\n    if (this._graph._options.interaction.smoothing && !this._smoothingCallback) {\r\n        this._smoothingCallback = this._addSmoothingEvent();\r\n    }\r\n    else if (!this._graph._options.interaction.smoothing && this._smoothingCallback) {\r\n        this._smoothingInput.removeEventListener(\"change\", this._smoothingCallback);\r\n        this._smoothingCallback = undefined;\r\n        this._smoothingInput.remove();\r\n        this._smoothingInput = undefined;\r\n    }\r\n\r\n    //Every time options are updated. Update smoothing value if available.\r\n    if (this._smoothingInput) {\r\n        this._smoothingInput.value = this._graph._options.graph.smoothing;\r\n    }\r\n\r\n    this._createInteractionData();\r\n};\r\n\r\n/**\r\n * Clear interaction data.\r\n * @public\r\n */\r\nInteraction.prototype.clear = function () {\r\n    this._graph._canvas.interaction.clear();\r\n    if (this._smoothingInput) {\r\n        this._smoothingInput.style.display = \"none\";\r\n    }\r\n};\r\n\r\n/**\r\n * Render interaction data.\r\n * @public\r\n */\r\nInteraction.prototype.render = function () {\r\n    if (this._smoothingInput) {\r\n        this._smoothingInput.style.display = \"block\";\r\n    }\r\n};\r\n\r\n/**\r\n * Inform the activity class that the graph has changed size and/or position.\r\n * @param {int} x - X-coordinate in pixels.\r\n * @param {int} y - Y-coordinate in pixels.\r\n * @param {int} width - Width in pixels.\r\n * @param {int} height - Height in pixels.\r\n */\r\nInteraction.prototype.graphChangedSize = function (x, y, width, height) {\r\n    if (this._smoothingInput) {\r\n        this._smoothingInput.style.top = (y + height - 21) + \"px\";\r\n        this._smoothingInput.style.left = x + \"px\";\r\n        this._smoothingInput.style.display = \"block\";\r\n    }\r\n};\r\n\r\n/**\r\n * Add a resize event.\r\n * @private\r\n * @returns {object} Object containing callbacks.\r\n */\r\nInteraction.prototype._addResizeEvent = function () {\r\n    const graph = this._graph;\r\n    const self = this;\r\n    let timeOutResize;\r\n    //Re-plots the graph on resize end.\r\n    function resizeEnd() {\r\n        graph._canvas.background.resize();\r\n        graph._calculateGraphSize();\r\n        graph._plot();\r\n        timeOutResize = undefined;\r\n        self._resizing = false;\r\n    }\r\n    //Clear graph, hightlight and spinner features on resize start.\r\n    function resizeStart() {\r\n        self._resizing = true;\r\n        graph._canvas.graph.clear();\r\n        graph._canvas.highlight.clear();\r\n        graph._canvas.interaction.clear();\r\n        graph._renderLegend();\r\n    }\r\n    let lastWidth = this._graph._canvas.background.getWidth();\r\n    let lastHeight = this._graph._canvas.background.getHeight();\r\n    let lastPixelRatio = window.devicePixelRatio;\r\n    function callback() {\r\n        //Make sure that the size actually have changed.\r\n        if (lastWidth !== graph._canvas.background.getWidth() || lastHeight !== graph._canvas.background.getHeight() || lastPixelRatio !== window.devicePixelRatio) {\r\n            lastWidth = graph._canvas.background.getWidth();\r\n            lastHeight = graph._canvas.background.getHeight();\r\n            lastPixelRatio = window.devicePixelRatio;\r\n            //First time the function is called for this resize event.\r\n            if (!timeOutResize) {\r\n                resizeStart();\r\n            }\r\n            //Reset timer each time so that the resizeEnd function doesnt run until the user has stopped resizing.\r\n            clearTimeout(timeOutResize);\r\n            timeOutResize = setTimeout(resizeEnd, 500);\r\n        }\r\n    }\r\n    window.addEventListener(\"resize\", callback);\r\n    return callback;\r\n};\r\n\r\n/**\r\n * Add mouse tracking events.\r\n * @private\r\n * @returns {object} Object containing callbacks.\r\n */\r\nInteraction.prototype._addMouseTrackingEvents = function () {\r\n    const self = this;\r\n    const graph = this._graph;\r\n    function mouseMoveCallback(e) {\r\n        if (self.mouseDown || self._resizing || !graph._axes.x.hasBounds() || e.offsetX < 0) {\r\n            return;\r\n        }\r\n        const valueX = graph._axes.x.pixelToValue(e.offsetX);\r\n        const values = [valueX];\r\n        graph._canvas.interaction.clear();\r\n        for (let i = 0; i < graph._options.graph.dataY.length; ++i) {\r\n            const dataY = graph._options.graph.dataY[i];\r\n            //Cant track unexisting values.\r\n            if (!dataY.length) {\r\n                break;\r\n            }\r\n            const dataXCallback = graph._options.getDataCallback(\"x\", i);\r\n            const res = Static.binarySearch(dataXCallback, dataY.length, valueX);\r\n            let valueY;\r\n            //Found exaxt X-value.\r\n            if (res.found !== undefined) {\r\n                if (graph._options.graph.smoothing) {\r\n                    valueY = Static.calculateSmothingValue(res.found, graph._options.graph.smoothing, dataY);\r\n                }\r\n                else {\r\n                    valueY = dataY[res.found];\r\n                }\r\n            }\r\n            //Binary search returned min and max at same value without a found.\r\n            //There is no matching value. Just abort.\r\n            else if (res.min === res.max) {\r\n                break;\r\n            }\r\n            //Calculate Y-value from min max coordinates.\r\n            else {\r\n                const valueXMin = dataXCallback(res.min);\r\n                const valueXMax = dataXCallback(res.max);\r\n                const span = valueXMax - valueXMin;\r\n                const weightMin = 1 - (valueX - valueXMin) / span;\r\n                const weightMax = 1 - (valueXMax - valueX) / span;\r\n                let valueMin, valueMax;\r\n                if (graph._options.graph.smoothing) {\r\n                    valueMin = Static.calculateSmothingValue(res.min, graph._options.graph.smoothing, dataY);\r\n                    valueMax = Static.calculateSmothingValue(res.max, graph._options.graph.smoothing, dataY);\r\n                }\r\n                else {\r\n                    valueMin = dataY[res.min];\r\n                    valueMax = dataY[res.max];\r\n                }\r\n                valueY = valueMin * weightMin + valueMax * weightMax;\r\n            }\r\n            const pixelY = graph._axes.y.valueToPixel(valueY);\r\n            self._interactionData[i].moveTo(e.offsetX, pixelY);\r\n            values[i + 1] = valueY;\r\n        }\r\n        graph._renderLegend(values);\r\n    }\r\n    function mouseOutCallback() {\r\n        if (!self.mouseDown) {\r\n            graph._canvas.interaction.clear();\r\n            graph._renderLegend();\r\n        }\r\n    }\r\n    const canvas = this._graph._canvas.interaction.getCanvas();\r\n    canvas.addEventListener(\"mousemove\", mouseMoveCallback);\r\n    canvas.addEventListener(\"mouseout\", mouseOutCallback);\r\n    return { mousemove: mouseMoveCallback, mouseout: mouseOutCallback };\r\n};\r\n\r\n/**\r\n * Add zoom events.\r\n * @private\r\n * @returns {object} - object containing callbacks.\r\n */\r\nInteraction.prototype._addZoomEvents = function () {\r\n    const graph = this._graph;\r\n    const self = this;\r\n    this.mouseDown = false;\r\n    const threshold = 0.1 * Math.min(graph._canvas.interaction.getContentWidth(), graph._canvas.interaction.getContentHeight());\r\n    let startX, startY;\r\n    //true = horizontal. false = vertical.\r\n    let lastHorizontal;\r\n    const color = \"rgba(130, 130, 130, 0.2)\";\r\n    let lastX, lastY;\r\n    function callbackMouseDown(e) {\r\n        if (!graph._axes.x.hasBounds() || !graph._axes.y.hasBounds()) {\r\n            return;\r\n        }\r\n        lastX = startX = e.offsetX;\r\n        lastY = startY = e.offsetY;\r\n        self.mouseDown = true;\r\n        lastHorizontal = undefined;\r\n        graph._renderLegend();\r\n    }\r\n    function callbackMouseMove(e) {\r\n        if (self.mouseDown && (e.offsetX !== lastX || e.offsetX !== lastY)) {\r\n            lastX = e.offsetX;\r\n            lastY = e.offsetY;\r\n            const diffX = Math.abs(startX - e.offsetX);\r\n            const diffY = Math.abs(startY - e.offsetY);\r\n            const newHorizontal = diffX > diffY;\r\n            if (newHorizontal === undefined || (newHorizontal !== lastHorizontal && (newHorizontal ? diffX : diffY) > threshold)) {\r\n                lastHorizontal = newHorizontal;\r\n            }\r\n            graph._canvas.interaction.clear();\r\n            //Mark horizontally.\r\n            if (lastHorizontal) {\r\n                graph._canvas.interaction.fillRectangle2(startX, 0, e.offsetX, graph._canvas.interaction.getContentHeight(), color);\r\n            }\r\n            //Mark vertically.\r\n            else {\r\n                graph._canvas.interaction.fillRectangle2(0, startY, graph._canvas.interaction.getContentWidth(), e.offsetY, color);\r\n            }\r\n        }\r\n    }\r\n    function callbackMouseUp(e) {\r\n        if (self.mouseDown) {\r\n            if (startX !== e.offsetX || startY !== e.offsetY) {\r\n                graph._canvas.interaction.clear();\r\n                //X-axis.\r\n                if (lastHorizontal) {\r\n                    const x = clamp(0, e.offsetX, graph._canvas.interaction.getContentWidth());\r\n                    const min = graph._axes.x.pixelToValue(Math.min(startX, x));\r\n                    const max = graph._axes.x.pixelToValue(Math.max(startX, x));\r\n                    graph._axes.x.overrideBounds({ min: min, max: max });\r\n                }\r\n                //Y-axis.\r\n                else {\r\n                    const y = clamp(0, e.offsetY, graph._canvas.interaction.getContentHeight());\r\n                    const min = graph._axes.y.pixelToValue(Math.max(startY, y));\r\n                    const max = graph._axes.y.pixelToValue(Math.min(startY, y));\r\n                    graph._axes.y.overrideBounds({ min: min, max: max });\r\n                }\r\n                graph._plot();\r\n            }\r\n            self.mouseDown = false;\r\n        }\r\n    }\r\n    function callbackDoubleClick(e) {\r\n        //Prevents double click from selecting the div.\r\n        //Firefox, Chrome, etc.\r\n        if (e.preventDefault) {\r\n            e.preventDefault();\r\n        }\r\n        //IE\r\n        else {\r\n            e.returnValue = false;\r\n            e.cancelBubble = true;\r\n        }\r\n        if (graph._axes.x.hasOverridenBounds() || graph._axes.y.hasOverridenBounds()) {\r\n            graph._axes.x.clearOverridenBounds();\r\n            graph._axes.y.clearOverridenBounds();\r\n            graph._plot();\r\n        }\r\n    }\r\n    function callbackMouseOut(e) {\r\n        //Make sure we are in a drag event and that we are moving outside of the graph. Not inwards.\r\n        if (!self.mouseDown || e.toElement === graph._canvas.graph.getCanvas() || e.toElement === graph._canvas.interaction.getCanvas()) {\r\n            return;\r\n        }\r\n        graph._canvas.interaction.clear();\r\n        self.mouseDown = false;\r\n    }\r\n\r\n    let canvas = graph._canvas.interaction.getCanvas();\r\n    canvas.addEventListener(\"mousedown\", callbackMouseDown);\r\n    canvas.addEventListener(\"mousemove\", callbackMouseMove);\r\n    canvas.addEventListener(\"mouseup\", callbackMouseUp);\r\n    canvas.addEventListener(\"dblclick\", callbackDoubleClick);\r\n    canvas = this._graph._canvas.graph.getCanvas();\r\n    canvas.addEventListener(\"mouseup\", callbackMouseUp);\r\n    canvas = this._graph._canvas.background.getCanvas();\r\n    canvas.addEventListener(\"mouseup\", callbackMouseUp);\r\n    canvas.addEventListener(\"mouseleave\", callbackMouseOut);\r\n    return { mousedown: callbackMouseDown, mousemove: callbackMouseMove, mouseup: callbackMouseUp, dblclick: callbackDoubleClick, mouseout: callbackMouseOut };\r\n};\r\n\r\n/**\r\n * Add smoothing input event.\r\n * @returns {object} Object containing callbacks.\r\n */\r\nInteraction.prototype._addSmoothingEvent = function () {\r\n    this._smoothingInput = Input({\r\n        type: \"number\",\r\n        tabIndex: -1,\r\n        maxLength: 6,\r\n        value: 0,\r\n        min: 0\r\n    });\r\n    this._smoothingInput.style[\"z-index\"] = 5;\r\n    this._smoothingInput.style.position = \"absolute\";\r\n    this._smoothingInput.style.width = \"50px\";\r\n    this._smoothingInput.style.height = \"21px\";\r\n    this._smoothingInput.style[\"background-color\"] = \"white\";\r\n    this._smoothingInput.style[\"border-radius\"] = 0;\r\n    this._smoothingInput.style.border = \"1px solid #ccc\";\r\n    this._smoothingInput.style.color = \"#555\";\r\n    this._smoothingInput.style.padding = \"0 0 0 5px\";\r\n    this._smoothingInput.style.display = \"none\";\r\n    this._smoothingInput.className = ((this._smoothingInput.className || \"\") + \" a-graph-smoothing-input\").trim();\r\n    this._graph._parent.append(this._smoothingInput);\r\n    const self = this;\r\n    function callbackDone() {\r\n        let value = parseInt(self._smoothingInput.value);\r\n        //Calculate min length for all data sets. Smoothing can't be greater than availalbe data points.\r\n        let length = 4294967296;\r\n        for (let i = 0; i < self._graph._options.graph.dataY.length; ++i) {\r\n            length = Math.min(length, self._graph._options.graph.dataY[i].length);\r\n        }\r\n        if (2 * value + 1 > length) {\r\n            value = Math.floor((length - 1) / 2);\r\n        }\r\n        self._smoothingInput.value = value;\r\n        self._graph._options.graph.smoothing = value;\r\n        self._graph._renderGraph();\r\n    }\r\n    this._smoothingInput.addEventListener(\"done\", callbackDone);\r\n    return callbackDone;\r\n};\r\n\r\n/**\r\n * Create interaction data.\r\n * @private\r\n */\r\nInteraction.prototype._createInteractionData = function () {\r\n    const radius = 3;\r\n    const ctx = document.createElement(\"canvas\").getContext(\"2d\");\r\n    this._interactionData = [];\r\n    for (let i = 0; i < this._graph._options.graph.dataY.length; ++i) {\r\n        //Clear area\r\n        ctx.clearRect(0, 0, 2 * radius, 2 * radius);\r\n\r\n        //Draw solid circle\r\n        ctx.beginPath();\r\n        ctx.arc(radius, radius, radius, 0, 2 * Math.PI);\r\n        ctx.fillStyle = this._graph._options.graph.colors[i + 1];\r\n        ctx.fill();\r\n\r\n        //If fill; draw black border to increase visibility.\r\n        if (this._graph._options.graph.fill) {\r\n            ctx.beginPath();\r\n            ctx.arc(radius, radius, radius, 0, 2 * Math.PI);\r\n            ctx.strokeStyle = \"#000000\";\r\n            ctx.stroke();\r\n        }\r\n\r\n        //Get image data from tmp context.\r\n        const imageData = ctx.getImageData(0, 0, 2 * radius, 2 * radius);\r\n        //Add member data.\r\n        const canvas = this._graph._canvas.interaction;\r\n        imageData.moveTo = function (x, y) {\r\n            canvas.putImageData(this, x, y, -radius, -radius);\r\n        };\r\n        this._interactionData[i] = imageData;\r\n    }\r\n};\r\n\r\nexport default Interaction;\r\n\r\n/**\r\n * Clamp the given value to the given range.\r\n * @param {type} min - Min value.\r\n * @param {type} number - Value to clamp.\r\n * @param {type} max - Max value.\r\n * @returns {Number} - Clamped value.\r\n */\r\nfunction clamp(min, number, max) {\r\n    if (number < min) {\r\n        return min;\r\n    } else if (number > max) {\r\n        return max;\r\n    } else {\r\n        return number;\r\n    }\r\n}","const Is = {};\r\n\r\n/**\r\n * Check if the given object is a DOM element.\r\n * @param {object} obj - Object to evaluate.\r\n * @returns {bool}\r\n */\r\nIs.isDOM = function (obj) {\r\n    return obj instanceof HTMLElement;\r\n};\r\n\r\n/**\r\n * Check of the given object is null or undefined.\r\n * @public\r\n * @param {string} obj - Object to evaluate.\r\n * @returns {bool}\r\n */\r\nIs.isNull = function (obj) {\r\n    return obj === undefined || obj === null;\r\n};\r\n\r\n/**\r\n * Check of the given object is a object.\r\n * @public\r\n * @param {string} obj - Object to evaluate.\r\n * @returns {bool}\r\n */\r\nIs.isObject = function (obj) {\r\n    return obj !== null && typeof obj === 'object' && !Is.isArray(obj);\r\n};\r\n\r\n/**\r\n * Check of the given object is a function.\r\n * @private\r\n * @param {string} obj - Object to evaluate.\r\n * @returns {bool}\r\n */\r\nIs.isFunction = function (obj) {\r\n    return typeof obj === \"function\";\r\n};\r\n\r\n/**\r\n * Check of the given object is a bool.\r\n * @public\r\n * @param {string} obj - Object to evaluate.\r\n * @returns {bool}\r\n */\r\nIs.isBool = function (obj) {\r\n    return typeof obj === \"boolean\";\r\n};\r\n\r\n/**\r\n * Check of the given object is a number.\r\n * @public\r\n * @param {string} obj - Object to evaluate.\r\n * @returns {bool}\r\n */\r\nIs.isNumber = function (obj) {\r\n    return typeof obj === \"number\";\r\n};\r\n\r\n/**\r\n * Check of the given object is an integer.\r\n * @public\r\n * @param {string} obj - Object to evaluate.\r\n * @returns {bool}\r\n */\r\nIs.isInt = function (obj) {\r\n    return typeof obj === \"number\" && obj % 1 === 0;\r\n};\r\n\r\n/**\r\n * Check of the given object is an unsigned integer.\r\n * @public\r\n * @param {string} obj - Object to evaluate.\r\n * @returns {bool}\r\n */\r\nIs.isUint = function (obj) {\r\n    return typeof obj === \"number\" && obj >= 0 && obj % 1 === 0;\r\n};\r\n\r\n/**\r\n * Check of the given object is a string.\r\n * @public\r\n * @param {string} obj - Object to evaluate.\r\n * @returns {bool}\r\n */\r\nIs.isString = function (obj) {\r\n    return typeof obj === \"string\";\r\n};\r\n\r\n/**\r\n * Check of the given object is an Array.\r\n * @public\r\n * @param {string} obj - Object to evaluate.\r\n * @returns {bool}\r\n */\r\nIs.isArray = function (obj) {\r\n    return obj instanceof Array;\r\n};\r\n\r\n/**\r\n * Check of the given object is an typed array.\r\n * @public\r\n * @param {string} obj - Object to evaluate.\r\n * @returns {bool}\r\n */\r\nIs.isTypedArray = function (obj) {\r\n    return obj instanceof Int8Array\r\n        || obj instanceof Uint8Array\r\n        || obj instanceof Uint8ClampedArray\r\n        || obj instanceof Int16Array\r\n        || obj instanceof Uint16Array\r\n        || obj instanceof Int32Array\r\n        || obj instanceof Uint32Array\r\n        || obj instanceof Float32Array\r\n        || obj instanceof Float64Array;\r\n};\r\n\r\n/**\r\n * Check of the given object is an array or a typed array.\r\n * @public\r\n * @param {string} obj - Object to evaluate.\r\n * @returns {bool}\r\n */\r\nIs.isAnyArray = function (obj) {\r\n    return Is.isArray(obj) || Is.isTypedArray(obj);\r\n};\r\n\r\n/**\r\n * Check of the given object is a color.\r\n * @public\r\n * @param {string} obj - Object to evaluate.\r\n * @returns {bool}\r\n */\r\nIs.isColor = function (obj) {\r\n    var div = document.createElement(\"div\");\r\n    div.style.borderColor = \"\";\r\n    div.style.borderColor = obj;\r\n    return div.style.borderColor !== \"\";\r\n};\r\n\r\n/**\r\n * Check of the given object is a size.\r\n * @public\r\n * @param {string} obj - Object to evaluate.\r\n * @returns {bool}\r\n */\r\nIs.isSize = function (obj) {\r\n    var div = document.createElement(\"div\");\r\n    div.style.width = \"\";\r\n    div.style.width = obj;\r\n    return div.style.width !== \"\";\r\n};\r\n\r\n/**\r\n * Check of the given object is an alignment.\r\n * @public\r\n * @param {string} obj - Object to evaluate.\r\n * @param {bool} noCenter - If true the center alignment is not valid.\r\n * @returns {bool}\r\n */\r\nIs.isAlignment = function (obj, noCenter) {\r\n    obj = obj.toLowerCase();\r\n    if (noCenter) {\r\n        return obj === \"left\" || obj === \"right\";\r\n    } else {\r\n        return obj === \"left\" || obj === \"center\" || obj === \"right\";\r\n    }\r\n};\r\n\r\n/**\r\n * Check of the given object is an composite operation.\r\n * @public\r\n * @param {string} obj - Object to evaluate.\r\n * @returns {bool}\r\n */\r\nIs.isCompositeOperation = function (obj) {\r\n    obj = obj.toLowerCase();\r\n    return obj === \"source-over\"\r\n        || obj === \"source-in\"\r\n        || obj === \"source-out\"\r\n        || obj === \"source-atop\"\r\n        || obj === \"destination-over\"\r\n        || obj === \"destination-in\"\r\n        || obj === \"destination-out\"\r\n        || obj === \"destination-atop\"\r\n        || obj === \"lighter\"\r\n        || obj === \"copy\"\r\n        || obj === \"xor\"\r\n        || obj === \"multiply\"\r\n        || obj === \"screen\"\r\n        || obj === \"overlay\"\r\n        || obj === \"darken\"\r\n        || obj === \"lighten\"\r\n        || obj === \"color-dodge\"\r\n        || obj === \"color-burn\"\r\n        || obj === \"hard-light\"\r\n        || obj === \"soft-light\"\r\n        || obj === \"difference\"\r\n        || obj === \"exclusion\"\r\n        || obj === \"hue\"\r\n        || obj === \"saturation\"\r\n        || obj === \"color\"\r\n        || obj === \"luminosity\";\r\n};\r\n\r\nIs.isBorderWidth = function (obj) {\r\n    var div = document.createElement(\"div\");\r\n    div.style.borderWidth = \"\";\r\n    div.style.borderWidth = obj;\r\n    return div.style.borderWidth !== \"\";\r\n};\r\n\r\nIs.isBorderStyle = function (obj) {\r\n    var div = document.createElement(\"div\");\r\n    div.style.borderStyle = \"\";\r\n    div.style.borderStyle = obj;\r\n    return div.style.borderStyle !== \"\";\r\n};\r\n\r\n\r\n/**\r\n * Get a callback to evaluate if the given data is of the specified type.\r\n * @param {string} type\r\n * @returns {function]\r\n * }\r\n */\r\nIs.getCompareCallback = function (type) {\r\n    switch (type) {\r\n        case \"number\":\r\n            return Is.isNumber;\r\n        case \"int\":\r\n            return Is.isInt;\r\n        case \"string\":\r\n            return Is.isString;\r\n        case \"bool\":\r\n            return Is.isBool;\r\n        case \"array\":\r\n            return Is.isArray;\r\n        case \"typedArray\":\r\n            return Is.isTypedArray;\r\n        case \"anyArray\":\r\n            return Is.isAnyArray;\r\n        case \"object\":\r\n            return Is.isObject;\r\n        case \"function\":\r\n            return Is.isFunction;\r\n        case \"color\":\r\n            return Is.isColor;\r\n        case \"size\":\r\n            return Is.isSize;\r\n        case 'alignment':\r\n            return Is.isAlignment;\r\n        case 'compositeOperation':\r\n            return Is.isCompositeOperation;\r\n        case 'borderStyle':\r\n            return Is.isBorderStyle;\r\n        case 'borderWidth':\r\n            return Is.isBorderWidth;\r\n        case 'dom':\r\n            return Is.isDOM;\r\n        default:\r\n            throw new Error(\"Is.getCompareCallback: No compare typed found for: \" + type);\r\n    }\r\n};\r\n\r\n/**\r\n * Get a list of callbacks to evaluate if the given data is of the specified type.\r\n * @param {string} type. Separated by |\r\n * @returns {array<function>]}\r\n */\r\nIs.getCompareCallbacks = function (type) {\r\n    var callbacks = [];\r\n    var types = type.split(\"|\");\r\n    if (!types.length) {\r\n        throw new Error(\"Is.getCompareCallbacks: types is empty.\");\r\n    }\r\n    for (var i = 0; i < types.length; ++i) {\r\n        callbacks.push(Is.getCompareCallback(types[i]));\r\n    }\r\n    return callbacks;\r\n};\r\n\r\n/**\r\n * Check if the array only contains items if the given type.\r\n * @public\r\n * @param {array} array - Array to check.\r\n * @param {string} type - Type to compare itmes against.\r\n * @returns {bool} - True if the array only contains items if the given type.\r\n */\r\nIs.isContent = function (array, type) {\r\n    var compareCallback = Is.getCompareCallback(type);\r\n    for (var i = 0; i < array.length; ++i) {\r\n        if (!compareCallback(array[i])) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n};\r\n\r\nIs.isInOptions = function (value, options) {\r\n    for (var i = 0; i < options.length; ++i) {\r\n        if (options[i] === value) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n};\r\n\r\nexport default Is;\r\n","import Static from \"./Static\";\r\nimport Is from \"./Is\";\r\n\r\n/** \r\n * The Options class is the options and associated functions for the Graph class.\r\n * See setDefault() for a desciption of the possible option parameters.\r\n */\r\n\r\n/**\r\n * Create new Graph options.\r\n * @public\r\n * @constructor\r\n * @param {OPTIONS_OBJECT} options - Options to customize the graph.\r\n * @returns {Options}\r\n */\r\nfunction Options(options) {\r\n    this._isOk = true;\r\n    this._createMembers();\r\n    this.set(Options.getDefault());\r\n    if (options) {\r\n        this.set(options);\r\n    }\r\n}\r\n\r\n/**\r\n * Check if the options are ok / valid.\r\n * @public\r\n * @returns {bool} - True if the options are ok.\r\n */\r\nOptions.prototype.isOk = function () {\r\n    return this._isOk;\r\n};\r\n\r\n/**\r\n * Get color for a data set.  Index = 0 is X axis.\r\n * @public\r\n * @param {int} index - Index of the data set.\r\n * @returns {string} - CSS color string.\r\n */\r\nOptions.prototype.getColor = function (index) {\r\n    return this.graph.colors[index] ? this.graph.colors[index] : \"#000000\";\r\n};\r\n\r\n/**\r\n * Get name for a data set. Index = 0 is X axis.\r\n * @public\r\n * @param {int} index - Index of the data set.\r\n * @returns {string}\r\n */\r\nOptions.prototype.getName = function (index) {\r\n    if (this.graph.names[index] !== undefined) {\r\n        return this.graph.names[index];\r\n    } \r\n    else if (index > 0) {\r\n        return \"DATA\" + (index);\r\n    } \r\n    else {\r\n        return \"X\";\r\n    }\r\n};\r\n\r\n/**\r\n * Get the font(family and size) for the legend label.\r\n * @public\r\n * @returns {string}\r\n */\r\nOptions.prototype.getLegendFont = function () {\r\n    return this.legend.size + \"px \" + this.legend.font;\r\n};\r\n\r\n/**\r\n * Get the default options object.\r\n * @public\r\n * @returns {OPTIONS_OBJECT}\r\n */\r\nOptions.getDefault = function () {\r\n    return {\r\n        debug: false,\r\n        interaction: {\r\n            resize: true,\r\n            trackMouse: true,\r\n            zoom: true,\r\n            smoothing: false\r\n        },\r\n        title: {\r\n            label: \"\",\r\n            bold: false,\r\n            size: 20,\r\n            offsetX: 0,\r\n            offsetY: 0,\r\n            padding: 5,\r\n            font: \"verdana\",\r\n            color: \"black\",\r\n            align: \"center\"\r\n        },\r\n        legend: {\r\n            location: \"top\",\r\n            font: \"Arial\",\r\n            size: 15,\r\n            offsetX: 10,\r\n            offsetY: 2,\r\n            align: \"right\",\r\n            newLine: false\r\n        },\r\n        graph: {\r\n            dataX: [],\r\n            dataY: [],\r\n            colors: [\"#000000\", \"#0000FF\", \"#FF0000\", \"#800080\", \"#00FF00\", \"#8080FF\", \"#FF8080\", \"#FF00FF\", \"#00FFFF\"],\r\n            names: [],\r\n            lineWidth: 1,\r\n            smoothing: 0,\r\n            simplify: 0.1,\r\n            fill: false,\r\n            compositeOperation: \"source-over\"\r\n        },\r\n        axes: {\r\n            tickMarkers: {\r\n                show: true,\r\n                length: 5,\r\n                width: 1,\r\n                offset: 0,\r\n                color: \"#BEBEBE\"\r\n            },\r\n            tickLabels: {\r\n                show: true,\r\n                color: \"black\",\r\n                font: \"Arial\",\r\n                size: 12,\r\n                width: 40,\r\n                offset: 2\r\n            },\r\n            labels: {\r\n                color: \"black\",\r\n                font: \"verdana\",\r\n                size: 15,\r\n                offset: 3,\r\n                padding: 0\r\n            },\r\n            x: {\r\n                show: true,\r\n                inverted: false,\r\n                log: false,\r\n                height: 0,\r\n                label: \"\",\r\n                legendValueFormatter: null,\r\n                tickerValuePreFormatter: null,\r\n                tickerValuePostFormatter: null,\r\n                tickerLabelFormatter: null,\r\n                ticker: null,\r\n                grid: {\r\n                    width: 1,\r\n                    color: \"#BEBEBE\"\r\n                },\r\n                bounds: {\r\n                    min: null,\r\n                    max: null\r\n                }\r\n            },\r\n            y: {\r\n                show: true,\r\n                inverted: false,\r\n                log: false,\r\n                width: 0,\r\n                label: \"\",\r\n                legendValueFormatter: null,\r\n                tickerValuePreFormatter: null,\r\n                tickerValuePostFormatter: null,\r\n                tickerLabelFormatter: null,\r\n                ticker: null,\r\n                grid: {\r\n                    width: 1,\r\n                    color: \"#BEBEBE\"\r\n                },\r\n                bounds: {\r\n                    min: null,\r\n                    max: null\r\n                }\r\n            }\r\n        },\r\n        border: {\r\n            style: \"solid\",\r\n            color: \"black\",\r\n            width: \"0 0 1px 1px\"\r\n        },\r\n        spinner: {//Options regarding the spinner.\r\n            show: true, //Automatically show spinner when plotting data. Can always be activated manually.\r\n            lines: 13, //The number of lines to draw.\r\n            length: 30, //The length of each line.\r\n            width: 10, //The line thickness.\r\n            radius: 30, //The radius of the inner circle.\r\n            corners: 1, //Corner roundness (0..1).\r\n            rotate: 0, //The rotation offset.\r\n            direction: 1, //1: clockwise, -1: counterclockwise\r\n            color: \"black\", //#rgb or #rrggbb or array of colors\r\n            speed: 1, //Revolutions per second\r\n            trail: 50, //Afterglow percentage\r\n            shadow: false, //If true a shadow is rendered.\r\n            hwaccel: true, //If true hardware acceleration is used.\r\n            position: 'relative', //Position type.\r\n            top: \"50%\", //CenterY position relative to parent\r\n            left: \"50%\"         //CenterX position relative to parent\r\n        }\r\n    };\r\n};\r\n\r\n/**\r\n * Set new options.\r\n * @public\r\n * @param {OPTIONS_OBJECT} options - The options to set.\r\n */\r\nOptions.prototype.set = function (options) {\r\n    function setMembers(oldObj, newObj, path) {\r\n        for (let i in newObj) {\r\n            if (!Array.isArray(oldObj) && !Object.prototype.hasOwnProperty.call(oldObj, i)) {\r\n                //            if (!Array.isArray(oldObj) && !oldObj.hasOwnProperty(i)) { TODO\r\n                console.warn(\"owp.graph WARNING: Can't set unexisting option: \" + path + (path.length ? \".\" + i : i));\r\n                continue;\r\n            }\r\n            //Member is a new object. Call function recursivly.\r\n            if (Is.isObject(newObj[i])) {\r\n                setMembers(oldObj[i], newObj[i], path + (path.length ? \".\" : \"\") + i);\r\n            }\r\n            //Member is null or a base type. Set it.\r\n            else {\r\n                oldObj[i] = newObj[i];\r\n            }\r\n        }\r\n    }\r\n    setMembers(this, options, \"\");\r\n\r\n    this._evalOptions();\r\n};\r\n\r\n/**\r\n * Callback function for getting data value for a given index.\r\n * Used instead of dataX[index] and dataY[index].\r\n * Has built in functionality for averaging. Implicit X-values and more.\r\n * @callback Options~getDataCallback\r\n * @param {int} index\r\n * @returns {number}\r\n */\r\n\r\n/**\r\n * Get a callback used to get correct X and X value data.\r\n * Used by the graph render function to improve performance.\r\n * @public\r\n * @param {string} axis - X or Y axis.\r\n * @param {int} dataIndex - The index in the data set.\r\n * @returns {function}\r\n */\r\nOptions.prototype.getDataCallback = function (axis, dataIndex, start) {\r\n    let data;\r\n    //X-axis.\r\n    if (axis.toLowerCase() === \"x\") {\r\n        //Has no dataX. Return index + 1.\r\n        if (this.graph.dataX.length === 0) {\r\n            return function (index) {\r\n                return index + 1;\r\n            };\r\n        }\r\n        //Have one dataX for all dataY. \r\n        if (this.graph.dataX.length === 1) {\r\n            data = this.graph.dataX[0];\r\n        }\r\n        //Have one dataX for each dataY. \r\n        else {\r\n            data = this.graph.dataX[dataIndex];\r\n        }\r\n    }\r\n    //Y-axis.\r\n    else if (axis.toLowerCase() === \"y\") {\r\n        data = this.graph.dataY[dataIndex];\r\n        //Use smoothing.\r\n        if (this.graph.smoothing) {\r\n            return this._getDataCallbackSmoothing(start, data);\r\n        }\r\n    }\r\n    else {\r\n        console.error(\"owp.graph ERROR: Unknown axis: \" + axis);\r\n    }\r\n    //Default\r\n    return function (index) {\r\n        return data[index];\r\n    };\r\n};\r\n\r\n/**\r\n * Return getDataCallback for smoothing\r\n * @private\r\n */\r\nOptions.prototype._getDataCallbackSmoothing = function (start, data) {\r\n    const centralIndex = Math.max(0, start - 1);\r\n    const window = Static.getSmoothingWindow(centralIndex, this.graph.smoothing, data.length);\r\n    let low = window.low;\r\n    let high = window.high;\r\n    let sum = 0;\r\n    for (let i = low; i <= high; ++i) {\r\n        sum += data[i];\r\n    }\r\n    const threshold = 2 * this.graph.smoothing;\r\n    return function (index) {\r\n        //Decrease window size.\r\n        if (high === data.length - 1) {\r\n            low = index + index - high;\r\n            sum = 0;\r\n            for (let i = low; i <= high; ++i) {\r\n                sum += data[i];\r\n            }\r\n        }\r\n        //Increase window size.\r\n        else if (high < threshold) {\r\n            high = index + index - low;\r\n            sum = 0;\r\n            for (let i = low; i <= high; ++i) {\r\n                sum += data[i];\r\n            }\r\n        }\r\n        //Move window.\r\n        else {\r\n            sum -= data[low];\r\n            ++low;\r\n            ++high;\r\n            sum += data[high];\r\n        }\r\n        //Calculate average value.\r\n        return sum / (high - low + 1);\r\n    };\r\n}\r\n\r\n/**\r\n * Evaluates the options and sets ok status flag.\r\n * @private\r\n */\r\nOptions.prototype._evalOptions = function () {\r\n    var optionsOk = true;\r\n    var obj, obj2, name, name2;\r\n    var options = this;\r\n    function set(path) {\r\n        name = path;\r\n        obj = options;\r\n        var paths = path.split(\".\");\r\n        for (var i = 0; i < paths.length; ++i) {\r\n            obj = obj[paths[i]];\r\n        }\r\n    }\r\n    function set2(path) {\r\n        name2 = path;\r\n        obj2 = options;\r\n        var paths = path.split(\".\");\r\n        for (var i = 0; i < paths.length; ++i) {\r\n            obj2 = obj2[paths[i]];\r\n        }\r\n    }\r\n    function error(msg) {\r\n        console.error(\"owp.graph ERROR: invalid option. \" + name + \": \" + msg);\r\n        optionsOk = false;\r\n    }\r\n    function evalObject() {\r\n        var res = Is.isObject(obj);\r\n        if (!res) {\r\n            error(\"\\\"\" + obj + \"\\\" is not an object.\");\r\n        }\r\n        return res;\r\n    }\r\n    function evalBool() {\r\n        var res = Is.isBool(obj);\r\n        if (!res) {\r\n            error(\"\\\"\" + obj + \"\\\" is not a bool.\");\r\n        }\r\n        return res;\r\n    }\r\n    function evalNumber() {\r\n        var res = Is.isNumber(obj);\r\n        if (!res) {\r\n            error(\"\\\"\" + obj + \"\\\" is not a number.\");\r\n        }\r\n        return res;\r\n    }\r\n    function evalInt() {\r\n        var res = Is.isInt(obj);\r\n        if (!res) {\r\n            error(\"\\\"\" + obj + \"\\\" is not an integer.\");\r\n        }\r\n        return res;\r\n    }\r\n    function evalString() {\r\n        var res = Is.isString(obj);\r\n        if (!res) {\r\n            error(\"\\\"\" + obj + \"\\\" is not a string.\");\r\n        }\r\n        return res;\r\n    }\r\n    function evalArray() {\r\n        var res = Is.isArray(obj);\r\n        res = true;\r\n        if (!res) {\r\n            error(\"\\\"\" + obj + \"\\\" is not an array.\");\r\n        }\r\n        return res;\r\n    }\r\n    function evalFunction() {\r\n        var res = Is.isFunction(obj);\r\n        if (!res) {\r\n            error(\"\\\"\" + obj + \"\\\" is not a function.\");\r\n        }\r\n        return res;\r\n    }\r\n    function evalAlign(noCenter) {\r\n        var res = Is.isAlignment(obj, noCenter);\r\n        if (!res) {\r\n            error(\"\\\"\" + obj + \"\\\" is not an valid alignment.\");\r\n        }\r\n        return res;\r\n    }\r\n    function evalColor() {\r\n        var res = Is.isColor(obj);\r\n        if (!res) {\r\n            error(\"\\\"\" + obj + \"\\\" is not a valid color.\");\r\n        }\r\n        return res;\r\n    }\r\n    function evalFont() {\r\n        var res = Is.isString(obj);\r\n        if (!res) {\r\n            error(\"\\\"\" + obj + \"\\\" is not a valid font.\");\r\n        }\r\n        return res;\r\n    }\r\n    function evalSize() {\r\n        var res = Is.isSize(obj);\r\n        if (!res) {\r\n            error(\"\\\"\" + obj + \"\\\" is not a valid size.\");\r\n        }\r\n        return res;\r\n    }\r\n    function evalBorderStyle() {\r\n        var res = Is.isBorderStyle(obj);\r\n        if (!res) {\r\n            error(\"\\\"\" + obj + \"\\\" is not a valid border style.\");\r\n        }\r\n        return res;\r\n    }\r\n    function evalBorderWidth() {\r\n        var res = Is.isBorderWidth(obj);\r\n        if (!res) {\r\n            error(\"\\\"\" + obj + \"\\\" is not a valid border width.\");\r\n        }\r\n        return res;\r\n    }\r\n    function evalCompositeOperation() {\r\n        var res = Is.isCompositeOperation(obj);\r\n        if (!res) {\r\n            error(\"\\\"\" + obj + \"\\\" is not a composite operation.\");\r\n        }\r\n        return res;\r\n    }\r\n    function evalArrayContains(type) {\r\n        var res = Is.isContent(obj, type);\r\n        if (!res) {\r\n            error(\"\\\"[\" + obj + \"]\\\" contains object type other than: \" + type + \".\");\r\n        }\r\n        return res;\r\n    }\r\n    function evalCond(cond) {\r\n        var res = eval(cond);\r\n        if (!res) {\r\n            cond = cond.replaceAll(\"obj2\", name2).trim();\r\n            cond = cond.replaceAll(\"obj.\", \"\").trim();\r\n            cond = cond.replaceAll(\"obj\", \"\").trim();\r\n            if (Is.isArray(obj)) {\r\n                error(\"Failed condition: \" + cond);\r\n            } \r\n            else {\r\n                error(\"\\\"\" + obj + \"\\\" failed condition: \" + cond);\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n\r\n    set(\"debug\");\r\n    evalBool();\r\n\r\n    set(\"interaction\");\r\n    if (evalObject()) {\r\n        set(\"interaction.resize\");\r\n        evalBool();\r\n\r\n        set(\"interaction.trackMouse\");\r\n        evalBool();\r\n\r\n        set(\"interaction.zoom\");\r\n        evalBool();\r\n\r\n        set(\"interaction.smoothing\");\r\n        evalBool();\r\n    }\r\n\r\n    set(\"title\");\r\n    if (evalObject()) {\r\n        set(\"title.bold\");\r\n        evalBool();\r\n\r\n        set(\"title.label\");\r\n        evalString();\r\n\r\n        set(\"title.size\");\r\n        evalInt();\r\n        evalCond(\"obj > 0\");\r\n\r\n        set(\"title.offsetX\");\r\n        evalInt();\r\n\r\n        set(\"title.offsetY\");\r\n        evalInt();\r\n\r\n        set(\"title.padding\");\r\n        evalInt();\r\n\r\n        set(\"title.font\");\r\n        evalFont();\r\n\r\n        set(\"title.color\");\r\n        evalColor();\r\n\r\n        set(\"title.align\");\r\n        evalAlign();\r\n    }\r\n\r\n    set(\"legend\");\r\n    if (evalObject()) {\r\n        set(\"legend.location\");\r\n        evalString();\r\n\r\n        set(\"legend.font\");\r\n        evalFont();\r\n\r\n        set(\"legend.size\");\r\n        if (evalInt()) {\r\n            evalCond(\"obj > 0\");\r\n        }\r\n\r\n        set(\"legend.offsetX\");\r\n        if (evalInt()) {\r\n            evalCond(\"obj >= 0\");\r\n        }\r\n\r\n        set(\"legend.offsetY\");\r\n        if (evalInt()) {\r\n            evalCond(\"obj >= 0\");\r\n        }\r\n\r\n        set(\"legend.align\");\r\n        evalAlign(true);\r\n\r\n        set(\"legend.newLine\");\r\n        evalBool();\r\n    }\r\n\r\n    set(\"graph\");\r\n    if (evalObject()) {\r\n        set(\"graph.dataX\");\r\n        if (evalArray()) {\r\n            evalArrayContains(\"anyArray\");\r\n\r\n            set2(\"graph.dataY\");\r\n            if (evalCond(\"obj.length === 0 || obj.length === 1 || obj.length === obj2.length\")) {\r\n                evalCond(\"obj.length <= obj2.length\");\r\n            }\r\n        }\r\n\r\n        set(\"graph.dataY\");\r\n        if (evalArray()) {\r\n            evalArrayContains(\"anyArray\");\r\n            set2(\"graph.dataX\");\r\n            //Only one dataX(incl implicit). All dataY have to be of the same size.\r\n            if (obj2.length === 0 || obj2.length === 1) {\r\n                //Check so that all dataY are the same size.\r\n                for (let i = 0; i < obj.length; ++i) {\r\n                    if (obj[i].length !== obj[0].length) {\r\n                        error(\"Not all arrays are of the same size.\");\r\n                    }\r\n                }\r\n                //If dataX.length == 1. Check if same length as dataY.\r\n                if (obj2.length === 1 && (!obj.length || obj2[0].length !== obj[0].length)) {\r\n                    error(\"Size does not match dataX.\");\r\n                }\r\n            }\r\n            //dataX.length == dataY.length. Check that each pair(x,y) are the same length.\r\n            else if (obj.length === obj2.length) {\r\n                for (let i = 0; i < obj.length; ++i) {\r\n                    if (obj[i].length !== obj2[i].length) {\r\n                        error(\"dataY[\" + i + \"].length != dataX[\" + i + \"].length\");\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        set(\"graph.colors\");\r\n        if (evalArray()) {\r\n            evalArrayContains(\"color\");\r\n        }\r\n\r\n        set(\"graph.names\");\r\n        if (evalArray()) {\r\n            evalArrayContains(\"string\");\r\n        }\r\n\r\n        set(\"graph.lineWidth\");\r\n        if (evalNumber()) {\r\n            evalCond(\"obj >= 0\");\r\n        }\r\n\r\n        set(\"graph.smoothing\");\r\n        if (evalInt()) {\r\n            evalCond(\"obj >= 0\");\r\n        }\r\n\r\n        set(\"graph.simplify\");\r\n        if (evalNumber()) {\r\n            evalCond(\"obj >= 0 && obj <= 1\");\r\n        }\r\n\r\n        set(\"graph.fill\");\r\n        evalBool();\r\n\r\n        set(\"graph.compositeOperation\");\r\n        evalCompositeOperation();\r\n    }\r\n\r\n    set(\"axes\");\r\n    if (evalObject()) {\r\n        set(\"axes.tickMarkers\");\r\n        if (evalObject()) {\r\n            set(\"axes.tickMarkers.show\");\r\n            evalBool();\r\n\r\n            set(\"axes.tickMarkers.length\");\r\n            if (evalInt()) {\r\n                evalCond(\"obj > 0\");\r\n            }\r\n\r\n            set(\"axes.tickMarkers.width\");\r\n            if (evalInt()) {\r\n                evalCond(\"obj > 0\");\r\n            }\r\n\r\n            set(\"axes.tickMarkers.offset\");\r\n            if (evalInt()) {\r\n                evalCond(\"obj >= 0\");\r\n            }\r\n\r\n            set(\"axes.tickMarkers.color\");\r\n            evalColor();\r\n        }\r\n\r\n        set(\"axes.tickLabels\");\r\n        if (evalObject()) {\r\n            set(\"axes.tickLabels.show\");\r\n            evalBool();\r\n\r\n            set(\"axes.tickLabels.color\");\r\n            evalColor();\r\n\r\n            set(\"axes.tickLabels.font\");\r\n            evalFont();\r\n\r\n            set(\"axes.tickLabels.size\");\r\n            if (evalInt()) {\r\n                evalCond(\"obj > 0\");\r\n            }\r\n\r\n            set(\"axes.tickLabels.width\");\r\n            if (evalInt()) {\r\n                evalCond(\"obj > 0\");\r\n            }\r\n\r\n            set(\"axes.tickLabels.offset\");\r\n            if (evalInt()) {\r\n                evalCond(\"obj >= 0\");\r\n            }\r\n        }\r\n\r\n        set(\"axes.labels\");\r\n        if (evalObject()) {\r\n            set(\"axes.labels.color\");\r\n            evalColor();\r\n\r\n            set(\"axes.labels.font\");\r\n            evalFont();\r\n\r\n            set(\"axes.labels.size\");\r\n            if (evalInt()) {\r\n                evalCond(\"obj > 0\");\r\n            }\r\n\r\n            set(\"axes.labels.offset\");\r\n            evalInt();\r\n\r\n            set(\"axes.labels.padding\");\r\n            if (evalInt()) {\r\n                evalCond(\"obj >= 0\");\r\n            }\r\n        }\r\n\r\n        //axes x and y\r\n        var axes = [\"axes.x\", \"axes.y\"];\r\n        for (var i = 0; i < axes.length; ++i) {\r\n            set(axes[i]);\r\n            if (evalObject()) {\r\n                set(axes[i] + \".show\");\r\n                evalBool();\r\n\r\n                set(axes[i] + \".inverted\");\r\n                evalBool();\r\n\r\n                set(axes[i] + \".log\");\r\n                evalBool();\r\n\r\n                set(axes[i] + \".\" + (axes[i] === \"axes.x\" ? \"height\" : \"width\"));\r\n                evalInt();\r\n                evalCond(\"obj >= 0\");\r\n\r\n                set(axes[i] + \".grid\");\r\n                if (evalObject()) {\r\n                    set(axes[i] + \".grid.width\");\r\n                    evalInt();\r\n                    evalCond(\"obj >= 0\");\r\n\r\n                    set(axes[i] + \".grid.color\");\r\n                    evalColor();\r\n                }\r\n\r\n                set(axes[i] + \".label\");\r\n                evalString();\r\n\r\n                set(axes[i] + \".bounds\");\r\n                if (evalObject()) {\r\n                    set(axes[i] + \".bounds.min\");\r\n                    if (!Is.isNull(obj)) {\r\n                        evalNumber();\r\n                        set2(axes[i] + \".log\");\r\n                        if (obj2 && obj <= 0) {\r\n                            error(\"\\\"[\" + obj + \"]\\\" When axis is logarithmic all bounds must be greather than 0.\");\r\n                        }\r\n                    }\r\n\r\n                    set(axes[i] + \".bounds.max\");\r\n                    if (!Is.isNull(obj)) {\r\n                        evalNumber();\r\n                        set2(axes[i] + \".log\");\r\n                        if (obj2 && obj <= 0) {\r\n                            error(\"\\\"[\" + obj + \"]\\\" When axis is logarithmic all bounds must be greather than 0.\");\r\n                        }\r\n                    }\r\n\r\n                    set(axes[i] + \".bounds.min\");\r\n                    set2(axes[i] + \".bounds.max\");\r\n                    if (!Is.isNull(obj) && !Is.isNull(obj2)) {\r\n                        evalCond(\"obj < obj2\");\r\n                    }\r\n                }\r\n\r\n                set(axes[i] + \".legendValueFormatter\");\r\n                if (!Is.isNull(obj)) {\r\n                    evalFunction();\r\n                }\r\n\r\n                set(axes[i] + \".tickerValuePreFormatter\");\r\n                if (!Is.isNull(obj)) {\r\n                    evalFunction();\r\n                }\r\n\r\n                set(axes[i] + \".tickerValuePostFormatter\");\r\n                if (!Is.isNull(obj)) {\r\n                    evalFunction();\r\n                }\r\n\r\n                set(axes[i] + \".tickerLabelFormatter\");\r\n                if (!Is.isNull(obj)) {\r\n                    evalFunction();\r\n                }\r\n\r\n                set(axes[i] + \".ticker\");\r\n                if (!Is.isNull(obj)) {\r\n                    evalFunction();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    set(\"border\");\r\n    if (evalObject()) {\r\n        set(\"border.style\");\r\n        evalBorderStyle();\r\n\r\n        set(\"border.color\");\r\n        evalColor();\r\n\r\n        set(\"border.width\");\r\n        evalBorderWidth();\r\n    }\r\n\r\n    set(\"spinner\");\r\n    if (evalObject()) {\r\n        set(\"spinner.show\");\r\n        evalBool();\r\n\r\n        set(\"spinner.lines\");\r\n        if (evalInt()) {\r\n            evalCond(\"obj > 0\");\r\n        }\r\n\r\n        set(\"spinner.length\");\r\n        if (evalInt()) {\r\n            evalCond(\"obj > 0\");\r\n        }\r\n\r\n        set(\"spinner.width\");\r\n        if (evalInt()) {\r\n            evalCond(\"obj > 0\");\r\n        }\r\n\r\n        set(\"spinner.radius\");\r\n        if (evalInt()) {\r\n            evalCond(\"obj > 0\");\r\n        }\r\n\r\n        set(\"spinner.corners\");\r\n        if (evalNumber()) {\r\n            evalCond(\"obj >= 0 && obj <= 1\");\r\n        }\r\n\r\n        set(\"spinner.rotate\");\r\n        if (evalInt()) {\r\n            evalCond(\"obj >= 0\");\r\n        }\r\n\r\n        set(\"spinner.direction\");\r\n        if (evalInt()) {\r\n            evalCond(\"obj === -1 || obj === 1\");\r\n        }\r\n\r\n        set(\"spinner.color\");\r\n        evalColor();\r\n\r\n        set(\"spinner.speed\");\r\n        if (evalNumber()) {\r\n            evalCond(\"obj > 0\");\r\n        }\r\n\r\n        set(\"spinner.trail\");\r\n        if (evalInt()) {\r\n            evalCond(\"obj >= 0\");\r\n        }\r\n\r\n        set(\"spinner.shadow\");\r\n        evalBool();\r\n\r\n        set(\"spinner.hwaccel\");\r\n        evalBool();\r\n\r\n        set(\"spinner.position\");\r\n        if (evalString()) {\r\n            evalCond(\"obj === 'relative' || obj === 'absolute'\");\r\n        }\r\n\r\n        set(\"spinner.top\");\r\n        evalSize();\r\n\r\n        set(\"spinner.left\");\r\n        evalSize();\r\n    }\r\n\r\n    this._isOk = optionsOk;\r\n};\r\n\r\n/**\r\n * Create all the members that contains the user given settings.\r\n * @private\r\n */\r\nOptions.prototype._createMembers = function () {\r\n    this.debug = null;\r\n    this.interaction = {\r\n        resize: null,\r\n        trackMouse: null,\r\n        zoom: null,\r\n        smoothing: null\r\n    };\r\n    this.title = {\r\n        show: null,\r\n        bold: null,\r\n        label: null,\r\n        size: null,\r\n        offsetX: null,\r\n        offsetY: null,\r\n        padding: null,\r\n        font: null,\r\n        color: null,\r\n        align: null\r\n    };\r\n    this.legend = {\r\n        location: null,\r\n        font: null,\r\n        size: null,\r\n        offsetX: null,\r\n        offsetY: null,\r\n        align: null,\r\n        newLine: null\r\n    };\r\n    this.graph = {\r\n        dataX: null,\r\n        dataY: null,\r\n        colors: null,\r\n        names: null,\r\n        lineWidth: null,\r\n        smoothing: null,\r\n        simplify: null,\r\n        fill: null,\r\n        compositeOperation: null\r\n    };\r\n    this.axes = {\r\n        tickMarkers: {\r\n            show: null,\r\n            length: null,\r\n            width: null,\r\n            offset: null,\r\n            color: null\r\n        },\r\n        tickLabels: {\r\n            show: null,\r\n            color: null,\r\n            font: null,\r\n            size: null,\r\n            width: null,\r\n            offset: null\r\n        },\r\n        labels: {\r\n            show: null,\r\n            color: null,\r\n            font: null,\r\n            size: null,\r\n            offset: null,\r\n            padding: null\r\n        },\r\n        x: {\r\n            show: null,\r\n            inverted: null,\r\n            log: null,\r\n            height: null,\r\n            label: null,\r\n            legendValueFormatter: null,\r\n            tickerValuePreFormatter: null,\r\n            tickerValuePostFormatter: null,\r\n            tickerLabelFormatter: null,\r\n            ticker: null,\r\n            grid: {\r\n                width: null,\r\n                color: null\r\n            },\r\n            bounds: {\r\n                min: null,\r\n                max: null\r\n            }\r\n        },\r\n        y: {\r\n            show: null,\r\n            inverted: null,\r\n            log: null,\r\n            width: null,\r\n            label: null,\r\n            legendValueFormatter: null,\r\n            tickerValuePreFormatter: null,\r\n            tickerValuePostFormatter: null,\r\n            tickerLabelFormatter: null,\r\n            ticker: null,\r\n            grid: {\r\n                width: null,\r\n                color: null\r\n            },\r\n            bounds: {\r\n                min: null,\r\n                max: null\r\n            }\r\n        }\r\n    };\r\n    this.border = {\r\n        style: null,\r\n        color: null,\r\n        width: null\r\n    };\r\n    this.spinner = {\r\n        show: null,\r\n        lines: null,\r\n        length: null,\r\n        width: null,\r\n        radius: null,\r\n        corners: null,\r\n        rotate: null,\r\n        direction: null,\r\n        color: null,\r\n        speed: null,\r\n        trail: null,\r\n        shadow: null,\r\n        hwaccel: null,\r\n        position: null,\r\n        top: null,\r\n        left: null\r\n    };\r\n};\r\n\r\n/**\r\n @typedef OPTIONS_OBJECT\r\n @type {object}\r\n\r\n @property {bool} debug - If true debug info will be outputted to the console.\r\n\r\n @property {object} interaction - Options regarding user interaction with the graph.\r\n @property {bool} resize - If true the graph will be resized automatically.\r\n @property {bool} trackMouse - If true the mouse cursor will track the graph lines.\r\n @property {bool} zoom - If true zoom is enabled.\r\n @property {bool} smoothing - If true interactive smoothing input is enabled.\r\n\r\n @property {object} title - Options regarding the title.\r\n @property {string} title.label - The text of the label. Set to \"\" to hide the label.\r\n @property {bool} title.bold - If true the label font is bold.\r\n @property {int} title.size - Font height/size in pixels of the text.\r\n @property {int} title.offsetX - X-axis offset in pixels. Between title and graph vertical side.\r\n @property {int} title.offsetY - Y-axis offset in pixels. Between title and outer top edge.\r\n @property {int} title.padding - Padding in pixels. Between title and graph.\r\n @property {string} title.font - Font family of the text.\r\n @property {string} title.color - Color of the text.\r\n @property {string} title.align - Title alignment. [\"left\", \"center\", \"right\"]\r\n\r\n @property {object} legend - Options regarding the legend.\r\n @property {bool} legend.show - If true the legend is shown.\r\n @property {string} legend.font - Font family of the text.\r\n @property {int} legend.size - Font size/height in pixels.\r\n @property {int} legend.offsetX - Y-axis offset in pixels. Between legend and graph vertical side.\r\n @property {int} legend.offsetY - X-axis offset in pixels. Between legend and graph top.\r\n @property {int} legend.align -  The legend alignment. [\"left\", \"right\"]\r\n @property {int} legend.newLine -  If true a new line is made between each data set.\r\n\r\n @property {object} graph - Options regarding the graph curve.\r\n @property {array<array>} graph.dataX - List of data sets for the X-axis. Can contain typed arrays.\r\n @property {array<array>} graph.dataY - List of data sets for the Y-axis. Can contain typed arrays.\r\n @property {array<string>} graph.colors - List of colors for each dataY set.\r\n @property {array<string>} graph.names - List of names for each dataY set.\r\n @property {int} graph.lineWidth - Width in pixels of the stroked line.\r\n @property {int} graph.smoothing - Number of samples on each side of the central value for the central moving average algorithm. 0 = disabled.\r\n @property {int} graph.simplify - Pixel tolerance for the simplification algorithm. 0 = disabled.\r\n @property {bool} graph.fill - If true the area under the graph will be filled.\r\n @property {string} graph.compositeOperation - Context global composit operation.\r\n\r\n @property {object} axes - Options regarding the axes.\r\n\r\n @property {object} axes.tickMarkers - Options regarding the tick markers.\r\n @property {bool} axes.tickMarkers.show - If true the tick markers are shown.\r\n @property {int} axes.tickMarkers.length - Length in pixels of the markers.\r\n @property {int} axes.tickMarkers.width - Width in pixels of the markers.\r\n @property {int} axes.tickMarkers.offset - Offset in pixels. Between graph and markers.\r\n @property {string} axes.tickMarkers.color - Color of the tick markers.\r\n\r\n @property {object} axes.tickLabels - Options regarding the tick labels.\r\n @property {bool} axes.tickLabels.show - If true the tick labels are shown.\r\n @property {string} axes.tickLabels.color - Color of the text.\r\n @property {string} axes.tickLabels.font - Font family of the text.\r\n @property {int} axes.tickLabels.size - Font size/height in pixels of the text.\r\n @property {int} axes.tickLabels.width - Max width of the labels. Used to calculate ticks.\r\n @property {int} axes.tickLabels.offset - Offset in pixels. Between graph and markers.\r\n\r\n @property {object} axes.labels - Options regarding the axes labels.\r\n @property {string} axes.labels.color - Color of the text.\r\n @property {string} axes.labels.font - Font family of the text.\r\n @property {int} axes.labels.size - Font size/height in pixels of the text.\r\n @property {int} axes.labels.offset - Offset in pixels. Between outer edge and labels.\r\n @property {int} axes.labels.padding - Padding in pixels. Between label and graph.\r\n\r\n @property {object} axes.x - Options regarding the X-axis.\r\n @property {bool} axes.x.show - If true the X-axis is shown.\r\n @property {bool} axes.x.inverted - If true the axis direction is inverted.\r\n @property {bool} axes.x.log - If true the values on the axis are logarithmically distributed.\r\n @property {int} axes.x.height - Height in pixels of the axis. 0 = automatic size.\r\n @property {int} axes.x.label - Text of the axis label. Set to \"\" to hide the label.\r\n @property {formatterCallback} axes.x.valueFormatter - Callback that formats the values. Null = default callback.\r\n @property {tickerCallback} axes.x.ticker - Callback that creates the ticks. Null = default callback.\r\n @property {formatterCallback} axes.x.valueFormatter - Callback that formats the axis labels. Null = default callback.\r\n\r\n @property {object} axes.x.grid - Options regarding the X-axis grid.\r\n @property {int} axes.x.grid.width - Grid line width/thickness in pixels. 0 = no grid.\r\n @property {string} axes.x.grid.color - Color of the grid lines.\r\n\r\n @property {object} axes.x.bounds - Options regarding the X-axis bounds.\r\n @property {number} axes.x.bounds.min - Min/lower bounds value. Null = automatic value.\r\n @property {number} axes.x.bounds.max - Max/upper bounds value. Null = automatic value.\r\n\r\n @property {object} axes.y - Options regarding the Y-axis.\r\n @property {bool} axes.y.show - If true the X-axis is shown.\r\n @property {bool} axes.y.inverted - If true the axis direction is inverted.\r\n @property {bool} axes.y.log - If true the values on the axis are logarithmically distributed.\r\n @property {int} axes.y.width - Width in pixels of the axis. 0 = automatic size.\r\n @property {int} axes.y.label - Text of the axis label. Set to \"\" to hide the label.\r\n @property {formatterCallback} axes.y.valueFormatter - Callback that formats the values. Null = default callback.\r\n @property {tickerCallback} axes.y.ticker - Callback that creates the ticks. Null = default callback.\r\n @property {formatterCallback} axes.y.valueFormatter - Callback that formats the axis labels. Null = default callback.\r\n\r\n @property {object} axes.y.grid - Options regarding the Y-axis grid.\r\n @property {int} axes.y.grid.width - Grid line width/thickness in pixels. 0 = no grid.\r\n @property {string} axes.y.grid.color - Color of the grid lines.\r\n\r\n @property {object} axes.y.bounds - Options regarding the Y-axis bounds.\r\n @property {number} axes.y.bounds.min - Min/lower bounds value. Null = automatic value.\r\n @property {number} axes.y.bounds.max - Max/upper bounds value. Null = automatic value.\r\n\r\n @property {object} border - Options regarding the graph border.\r\n @property {string} border.style - Border style. solid, dotted...\r\n @property {string} border.color - Color of the border lines. red, #FF0000, rgb(255,0,0)\r\n @property {string} border.width - Width/thickness in pixels of the border. 1px, 1px 2px, 1px 2px 3px 4px.\r\n\r\n\r\n */\r\n\r\n/**\r\n * Callback function for formatting values.\r\n * @callback formatterCallback\r\n * @param {number} value\r\n * @returns {string}\r\n */\r\n\r\n/**\r\n * Callback function for creating ticks.\r\n * @callback tickerCallback\r\n * @param {bool} isLog - True if the values are going to be logarithmically distributed.\r\n * @param {number} minValue - Min/lower bounds value.\r\n * @param {number} maxValue - Max/upper bounds value.\r\n * @param {int} graphSize - Size(width or height) of graph in pixels.\r\n * @param {int} labelSize - Size(width or height) of tick labels in pixels.\r\n * @returns {array<{value:number}>}\r\n */\r\n\r\nexport default Options;","/** \n * Static functions.\n */\n\nconst Static = {};\n\n/**\n * Create dummy test data.\n * @public\n * @static\n * @param {int} size - Number of values to create.\n * @param {string} type - float or int.\n * @returns {array}\n */\nStatic.createDummyData = function (size, type) {\n    let seed = 3;\n    function random() {\n        seed = Math.sin(seed) * 10000;\n        return seed - Math.floor(seed);\n    }\n    const data = [];\n    const buffer1 = new ArrayBuffer(size * 4);\n    const buffer2 = new ArrayBuffer(size * 4);\n    if (type && type.toLowerCase() === \"int\") {\n        const intY = new Uint32Array(buffer1);\n        for (let i = 0; i < size; ++i) {\n            intY[i] = i + 1;\n        }\n        data.push(intY);\n    }\n    else if (type && type.toLowerCase() === \"float\") {\n        const floatY1 = new Float32Array(buffer1);\n        const floatY2 = new Float32Array(buffer2);\n        const mult = Math.PI / 100;\n        for (let i = 0; i < size; ++i) {\n            floatY1[i] = Math.sin(i * mult) * random();\n            floatY2[i] = Math.cos(i * mult) * random();\n        }\n        data.push(floatY1);\n        data.push(floatY2);\n    }\n    else {\n        console.warn(\"owp.graph WARNING: Can't create dummy data. Invalid type: \\\"\" + type + \"\\\"\");\n    }\n    return data;\n};\n\n/**\n * Calculate the smoothed value for a given index.\n * @public\n * @param {array} data\n * @param {int} index\n * @param {int} smoothing\n * @returns {number}\n */\nStatic.calculateSmothingValue = function (index, smoothing, data) {\n    const window = Static.getSmoothingWindow(index, smoothing, data.length);\n    let sum = 0;\n    while (window.low <= window.high) {\n        sum += data[window.low++];\n    }\n    return sum / window.length;\n};\n\n/**\n * Get the smoothing window indices.\n * @param {int} index - Index for central value.\n * @param {int} smoothing - Smootrhing value. Number of samples on each side of central value.\n * @param {int} length - Length of data set.\n * @returns {undefined}\n */\nStatic.getSmoothingWindow = function (index, smoothing, length) {\n    //Distance to list start.\n    const diffToMin = Math.max(0, index);\n    //Distance to list end.\n    const diffToMax = length - 1 - index;\n    //Shortest distance of min, max and smoothing window.\n    const diff = Math.min(diffToMin, diffToMax, smoothing);\n    return { low: index - diff, high: index + diff, length: 2 * diff + 1 };\n};\n\n/**\n * Binary search. Get index for given value.\n * @private\n * @static\n * @param {callback} dataCallback - Callback to get value for given index.\n * @param {type} size - Size of data set.\n * @param {type} value - Value to find\n * @returns {object} If found: {found: n}. Else: {min, max} where min > value index < max.\n */\nStatic.binarySearch = function (dataCallback, size, value) {\n    let min = 0;\n    let max = size - 1;\n    while (min <= max) {\n        const mid = Math.floor((min + max) / 2);\n        //Value is smaller than mid.\n        if (value < dataCallback(mid)) {\n            max = mid - 1;\n        }\n        //Value is larger than mid.\n        else if (value > dataCallback(mid)) {\n            min = mid + 1;\n        }\n        //Found value.\n        else {\n            return { found: mid };\n        }\n    }\n    min = Math.min(min, max);\n    max = Math.max(min, max, 0);\n    //Value is larger than max index. Increment max.\n    if (value > dataCallback(max)) {\n        ++max;\n    }\n    //Value is smaller than min index. Decrement min.\n    else if (value < dataCallback(min)) {\n        --min;\n    }\n    return {\n        min: Math.max(min, 0),\n        max: Math.min(max, size - 1)\n    };\n};\n\n/**\n * Get text width in pixels.\n * @public\n * @param {string} text - Text to meassure.\n * @param {string} font - Font to use.\n * @returns {int} - Width in pixels.\n */\nconst context = document.createElement(\"canvas\").getContext(\"2d\");\nStatic.getTextWidth = function (text, font) {\n    if (font) {\n        context.font = font;\n    }\n    return context.measureText(text).width;\n};\n\n/**\n * Round the given number to the given precision.\n * @public\n * @param {number} value\n * @param {int} decimals - Number of decimals.\n * @returns {number}\n */\nStatic.round = function (value, decimals) {\n    if (!decimals) {\n        return Math.round(value);\n    }\n    else {\n        const multiplier = Math.pow(10, decimals);\n        return (Math.round(value * multiplier) / multiplier);\n    }\n};\n\nStatic.log10 = (x) => Math.log(x) / Math.LN10;\n\nexport default Static;","/*\r\n* @author Andreas Arvidsson\r\n * https://github.com/AndreasArvidsson/OpenWebProject-graph\r\n */\r\n\r\nif (!window.HTMLCanvasElement || !window.CanvasRenderingContext2D) {\r\n    throw Error(\"owp.graph ERROR: Your browser does not support the HTML5 Canvas.\");\r\n}\r\n\r\nimport Spinner from \"./lib/spin.min\";\r\nimport Canvas from \"./Canvas\";\r\nimport Axis from \"./Axis\";\r\nimport Interaction from \"./Interaction\";\r\nimport Static from \"./Static\";\r\nimport Options from \"./Options\";\r\nimport Is from \"./Is\";\r\n\r\n/** \r\n * The Graph class is a 2D graph plotter.\r\n * Built with performance and customizability in mind. Supports multiple data\r\n * sets and all data sets are available as typed arrays.\r\n */\r\n\r\n/**\r\n * Create new graph.\r\n * @public\r\n * @constructor\r\n * @param {dom} parent - Parent div.  DOM or ID string. Graph will fill this div.\r\n * @param {OPTIONS_OBJECT} options - Options to customize the graph.\r\n * @returns {Graph}\r\n */\r\nfunction Graph(parent, options) {\r\n    if (this instanceof Graph) {\r\n        this._init(parent, options);\r\n    }\r\n    //The new keyword was omitted.\r\n    else {\r\n        return new Graph(parent, options);\r\n    }\r\n}\r\n\r\n/**\r\n * Implementation of the constructor.\r\n * @private\r\n * @param {dom} parent - Parent div. DOM or ID string. Graph will fill this div.\r\n * @param {OPTIONS} options - Options to customize the graph.\r\n */\r\nGraph.prototype._init = function (parent, options) {\r\n    if (!parent) {\r\n        console.error(\"owp.graph ERROR: Parent dom is null\");\r\n        return;\r\n    }\r\n\r\n    parent.style.position = \"relative\";\r\n\r\n    this._parent = parent;\r\n    this._options = new Options();\r\n\r\n    this._highlights = [];\r\n\r\n    this._canvas = {\r\n        background: new Canvas(parent, \"background\"),\r\n        graph: new Canvas(parent, \"graph\", true),\r\n        highlight: new Canvas(parent, \"highlight\"),\r\n        interaction: new Canvas(parent, \"interaction\")\r\n    };\r\n\r\n    this._canvas.background.setZIndex(0);\r\n    this._canvas.graph.setZIndex(1);\r\n    this._canvas.highlight.setZIndex(2);\r\n    //Spinner uses zIndex 3.\r\n    this._canvas.interaction.setZIndex(4);\r\n    //Smoothing input used zIndex 5.\r\n\r\n    this._axes = {\r\n        x: new Axis(this._options, this._canvas.graph, \"x\"),\r\n        y: new Axis(this._options, this._canvas.graph, \"y\")\r\n    };\r\n\r\n    this._interaction = new Interaction(this);\r\n\r\n    if (options) {\r\n        this.setOptions(options);\r\n    }\r\n    else {\r\n        console.warn(\"owp.graph WARNING: No options set. Uses default.\");\r\n        this.setOptions({});\r\n    }\r\n};\r\n\r\n/**\r\n * Create legend canvas and attach to parent dom.\r\n * @private\r\n */\r\nGraph.prototype._initLegend = function () {\r\n    const location = this._options.legend.location;\r\n    if (location && this._options.interaction.trackMouse) {\r\n        //DIV id.\r\n        if (location.toLowerCase() !== \"top\" && location.toLowerCase() !== \"right\") {\r\n            const legendDiv = document.getElementById(location);\r\n            if (legendDiv) {\r\n                legendDiv.style.position = \"relative\";\r\n                //Reuse existing canvas.\r\n                if (this._canvas.legend) {\r\n                    this._canvas.legend.setParent(legendDiv);\r\n                }\r\n                //Create new canvas.\r\n                else {\r\n                    this._canvas.legend = new Canvas(legendDiv);\r\n                }\r\n            }\r\n            else {\r\n                console.warn(\"owp.graph WARNING: Legend location: \\\"\" + location + \"\\\" not found.\");\r\n            }\r\n        }\r\n        else {\r\n            //Set same parent for legend as rest of graph.\r\n            if (this._canvas.legend) {\r\n                this._canvas.legend.setParent(this._parent);\r\n            }\r\n            else {\r\n                this._canvas.legend = new Canvas(this._parent);\r\n                this._canvas.legend.disableMouseInteraction();\r\n            }\r\n            if (location.toLowerCase() === \"top\") {\r\n                this._canvas.legend.setSize(\"100%\", this._options.legend.size);\r\n            }\r\n            else if (location.toLowerCase() === \"right\") {\r\n                this._canvas.legend.setPosition(0, 0, true);\r\n                this._canvas.legend.setSize(200, \"100%\");\r\n            }\r\n        }\r\n    }\r\n    //Remove old legend.\r\n    else if (this._canvas.legend) {\r\n        this._canvas.legend.setParent();\r\n        this._canvas.legend = undefined;\r\n    }\r\n};\r\n\r\n/**\r\n * Renders the legend on the background canvas.\r\n * @private\r\n */\r\nGraph.prototype._renderLegend = function (values) {\r\n    if (!this._canvas.legend || !this._options.graph.dataY.length) {\r\n        return;\r\n    }\r\n\r\n    const settings = this._options.legend;\r\n    const canvas = this._canvas.legend;\r\n    canvas.clear();\r\n    canvas.set(\"font\", this._options.getLegendFont());\r\n    canvas.set(\"textBaseline\", \"top\");\r\n    canvas.set(\"textAlign\", settings.align);\r\n\r\n    const isTop = settings.location.toLowerCase() === \"top\";\r\n    const alignLeft = settings.align.toLowerCase() === \"left\";\r\n    //newLine is disabled for top location.\r\n    const newLine = settings.newLine && !isTop || settings.location.toLowerCase() === \"right\";\r\n    let x = alignLeft ? this._options.legend.offsetX : canvas.getWidth() - this._options.legend.offsetX;\r\n    //OffsetY is disabled for top location.\r\n    let y = isTop ? 0 : this._options.legend.offsetY;\r\n\r\n    function printValue(color, name, value) {\r\n        const str = name + \": \" + (value !== undefined ? value : \"\\u2014\");\r\n        canvas.text(str, x, y, null, color);\r\n        if (newLine) {\r\n            y += settings.size;\r\n        }\r\n        else {\r\n            x += (canvas.getTextWidth(str) + 10) * (alignLeft ? 1 : -1);\r\n        }\r\n    }\r\n\r\n    if (alignLeft || newLine) {\r\n        for (let i = 0; i <= this._options.graph.dataY.length; ++i) {\r\n            printValue(\r\n                this._options.graph.colors[i],\r\n                this._options.getName(i),\r\n                values && values[i] !== undefined\r\n                    ? this._axes.y.formatLegendValue(values[i])\r\n                    : undefined\r\n            );\r\n        }\r\n    }\r\n    else {\r\n        for (let i = this._options.graph.dataY.length; i >= 0; --i) {\r\n            printValue(\r\n                this._options.graph.colors[i],\r\n                this._options.getName(i),\r\n                values && values[i] !== undefined\r\n                    ? this._axes.y.formatLegendValue(values[i])\r\n                    : undefined\r\n            );\r\n        }\r\n    }\r\n};\r\n\r\n\r\n/**\r\n * Get options instance.\r\n * @public\r\n * @returns {Options}\r\n */\r\nGraph.prototype.getOptions = function () {\r\n    return this._options;\r\n};\r\n\r\n/**\r\n * Sets all options to their default values.\r\n * @public\r\n */\r\nGraph.prototype.setDefaultOptions = function () {\r\n    this.setOptions(Options.getDefault());\r\n};\r\n\r\n/**\r\n * Set new options.\r\n * @public\r\n * @param {OPTIONS_OBJECT} options - Options to customize the graph.\r\n */\r\nGraph.prototype.setOptions = function (options) {\r\n    this._options.set(options);\r\n    this._hasCalculatedGraphSize = false;\r\n    if (this._options.isOk()) {\r\n        this._axes.x.calculateBounds();\r\n        this._axes.y.calculateBounds();\r\n        this._interaction.updateOptions();\r\n        this._canvas.graph.setBorder(this._options.border.style, this._options.border.color, this._options.border.width);\r\n        this._initLegend();\r\n        this._plot();\r\n    }\r\n};\r\n\r\n/**\r\n * Set new data.\r\n * @public\r\n */\r\nGraph.prototype.setData = function (dataX, dataY) {\r\n    const options = { graph: {} };\r\n    if (dataX) {\r\n        options.graph.dataX = dataX;\r\n    }\r\n    if (dataY) {\r\n        options.graph.dataY = dataY;\r\n    }\r\n    this.setOptions(options);\r\n};\r\n\r\n/**\r\n * \r\n * @param {number} x1 - Min X value.\r\n * @param {number} y1 - Min Y value.\r\n * @param {number} x2 - Max X-value.\r\n * @param {number} y2 - Max Y-value.\r\n * @returns {undefined}\r\n */\r\nGraph.prototype.zoom = function (x1, y1, x2, y2) {\r\n    this._axes.x.overrideBounds({ min: x1, max: x2 });\r\n    this._axes.y.overrideBounds({ min: y1, max: y2 });\r\n    this._plot();\r\n};\r\n\r\n/**\r\n * Reset zoom level to zero.\r\n * @returns {undefined}\r\n */\r\nGraph.prototype.resetZoom = function () {\r\n    this._axes.x.clearOverridenBounds();\r\n    this._axes.y.clearOverridenBounds();\r\n    this._plot();\r\n};\r\n\r\n/**\r\n * Clears/removes current highlight.\r\n * @public\r\n */\r\nGraph.prototype.clearHighlight = function () {\r\n    this._canvas.highlight.clear();\r\n    this._highlights = [];\r\n};\r\n\r\n/**\r\n * Highlight the given are of the graph.\r\n * @public\r\n * @param {number} x1 - First x-axis value.\r\n * @param {number} y1 - First y-axis value.\r\n * @param {number} x2 - Second x-axis value.\r\n * @param {number} y2 - Second y-axis value.\r\n * @param {string} color - Color of the selected area.\r\n */\r\nGraph.prototype.highlight = function (x1, y1, x2, y2, color) {\r\n    this._highlights.push({\r\n        x1: x1,\r\n        y1: y1,\r\n        x2: x2,\r\n        y2: y2,\r\n        color: color ? color : \"rgba(0, 0, 255, 0.2)\"\r\n    });\r\n    if (this._axes.x.hasBounds() && this._axes.y.hasBounds()) {\r\n        this._renderHighlight();\r\n    }\r\n};\r\n\r\n/**\r\n * Manually start or stop spinner.\r\n * @public\r\n * @param {bool} doSpin - If true the spinner will start.\r\n */\r\nGraph.prototype.spin = function (doSpin) {\r\n    if (doSpin) {\r\n        //Spinner does not exist. Create it.\r\n        if (!this._spinner) {\r\n            this._spinnerDiv = document.createElement(\"div\");\r\n            this._parent.append(this._spinnerDiv);\r\n            this._spinnerDiv.style.position = \"absolute\";\r\n            this._spinnerDiv.style[\"z-index\"] = 3;\r\n            this._updateSpinnerSize();\r\n            this._spinner = new Spinner(this._options.spinner);\r\n        }\r\n        if (!this._spinner.isSpinning) {\r\n            this._spinner.spin(this._spinnerDiv);\r\n            this._spinner.isSpinning = true;\r\n        }\r\n    }\r\n    else if (this._spinner) {\r\n        this._spinner.stop();\r\n        this._spinner.isSpinning = false;\r\n    }\r\n};\r\n\r\n/**\r\n * Plots/draws the graph.\r\n * @private\r\n */\r\nGraph.prototype._plot = function () {\r\n    if (!this._options.isOk()) {\r\n        console.error(\"owp.graph ERROR: Can't plot: Invalid options.\");\r\n        return;\r\n    }\r\n\r\n    if (this._options.debug) {\r\n        console.time(\"owp.graph DEBUG: Plot time\");\r\n    }\r\n\r\n    //If graph size has not yet been calculated. Do it.\r\n    if (!this._hasCalculatedGraphSize) {\r\n        this._calculateGraphSize();\r\n    }\r\n\r\n    //Clear plot.\r\n    this._canvas.background.clear();\r\n    this._canvas.graph.clear();\r\n    this._canvas.highlight.clear();\r\n    this._interaction.clear();\r\n\r\n    //Render non data related features.\r\n    this._renderTitle();\r\n    this._renderAxesLabels();\r\n\r\n    //Has bounds. Render bounds related features.\r\n    if (this._axes.x.hasBounds() && this._axes.y.hasBounds()) {\r\n        this._renderXAxis();\r\n        this._renderYAxis();\r\n        this._renderHighlight();\r\n\r\n        //Has graph data. Render graph data.\r\n        if (this._options.graph.dataY.length) {\r\n            this._renderLegend();\r\n            this._renderGraph();\r\n            this._interaction.render();\r\n        }\r\n        else if (this._options.debug) {\r\n            console.log(\"owp.graph DEBUG: No data set available. Plotting available features.\");\r\n        }\r\n    }\r\n    //Has neither bounds or data.\r\n    else if (this._options.debug) {\r\n        console.log(\"owp.graph DEBUG: No bounds or data set available. Plotting available features.\");\r\n    }\r\n\r\n    if (this._options.debug) {\r\n        console.timeEnd(\"owp.graph DEBUG: Plot time\");\r\n    }\r\n};\r\n\r\n/**\r\n * Updates the position and size of the spinner div based on the graph canvas.\r\n * @private\r\n */\r\nGraph.prototype._updateSpinnerSize = function () {\r\n    if (this._spinnerDiv) {\r\n        this._spinnerDiv.style.left = this._canvas.graph.getContentX() + \"px\";\r\n        this._spinnerDiv.style.top = this._canvas.graph.getContentY() + \"px\";\r\n        this._spinnerDiv.style.width = this._canvas.graph.getContentWidth() + \"px\";\r\n        this._spinnerDiv.style.height = this._canvas.graph.getContentHeight() + \"px\";\r\n    }\r\n};\r\n\r\n/**\r\n * Calculate graph canvas position and size.\r\n * @private\r\n */\r\nGraph.prototype._calculateGraphSize = function () {\r\n    let x = this._getOffset([\"left\"]);\r\n    let y = this._getOffset([\"top\"]);\r\n    let width = this._canvas.background.getWidth() - this._getOffset([\"left\", \"right\"]);\r\n    let height = this._canvas.background.getHeight() - this._getOffset([\"top\", \"bottom\"]);\r\n\r\n    //Set graph canvas.\r\n    this._canvas.graph.setPosition(x, y);\r\n    this._canvas.graph.setSize(width, height);\r\n\r\n    //Convert to content space.\r\n    x = this._canvas.graph.getContentX();\r\n    y = this._canvas.graph.getContentY();\r\n    width = this._canvas.graph.getContentWidth();\r\n    height = this._canvas.graph.getContentHeight();\r\n\r\n    //Set highlight canvas.\r\n    this._canvas.highlight.setPosition(x, y);\r\n    this._canvas.highlight.setSize(width, height);\r\n    //Set interaction canvas.\r\n    this._canvas.interaction.setPosition(x, y);\r\n    this._canvas.interaction.setSize(width, height);\r\n    //Set legend canvas if available.\r\n    if (this._canvas.legend) {\r\n        if (this._options.legend.location.toLowerCase() === \"top\") {\r\n            this._canvas.legend.setPosition(x, y - this._canvas.legend.getHeight() - this._options.legend.offsetY);\r\n            this._canvas.legend.setSize(width, this._options.legend.size);\r\n        }\r\n        else if (this._options.legend.location.toLowerCase() === \"right\") {\r\n            this._canvas.legend.setPosition(0, y, true);\r\n            this._canvas.legend.setSize(200, height);\r\n        }\r\n    }\r\n\r\n    //Update interaction instance.\r\n    this._interaction.graphChangedSize(x, y, width, height);\r\n\r\n    //Updates the spinner div size.\r\n    this._updateSpinnerSize();\r\n\r\n    //Calculate new ticks for the new size.\r\n    if (this._axes.x.hasBounds() && this._axes.y.hasBounds()) {\r\n        this._axes.x.calculateTicks();\r\n        this._axes.y.calculateTicks();\r\n    }\r\n    this._hasCalculatedGraphSize = true;\r\n};\r\n\r\n/**\r\n * Renders the x-axis(ticks markers, tick labels, grid lines) on the background canvas.\r\n * @private\r\n */\r\nGraph.prototype._renderXAxis = function () {\r\n    if (!this._options.axes.x.show) {\r\n        return;\r\n    }\r\n    const ticks = this._axes.x.getTicks();\r\n    let oldX, oldWidth;\r\n    for (let i = 0; i < ticks.length; ++i) {\r\n        let x = this._canvas.graph.getContentX() + ticks[i].coordinate;\r\n        let y = this._canvas.graph.getY() + this._canvas.graph.getHeight();\r\n        //Draw tick markers.\r\n        if (ticks.markers) {\r\n            y += ticks.markers.offset;\r\n            this._canvas.background.line(x, y, x, y + ticks.markers.length, ticks.markers.width, ticks.markers.color);\r\n            y += ticks.markers.length;\r\n        }\r\n        //Draw grid line.\r\n        if (ticks.grid && x > this._canvas.graph.getContentX() * 1.01 && x < (this._canvas.graph.getContentX() + this._canvas.graph.getContentWidth()) * 0.99) {\r\n            this._canvas.background.line(x, this._canvas.graph.getContentY(), x, this._canvas.graph.getContentY() + this._canvas.graph.getContentHeight(), ticks.grid.width, ticks.grid.color);\r\n        }\r\n        //Draw tick label.\r\n        if (ticks.labels && (!oldX || Math.abs(x - oldX) > oldWidth + ticks.labels.width[i] / 2)) {\r\n            y += ticks.labels.offset;\r\n            this._canvas.background.text(ticks[i].label, x, y, ticks.labels.font, ticks.labels.color, \"center\", \"hanging\");\r\n            oldX = x;\r\n            oldWidth = ticks.labels.width[i];\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * Renders the y-axis(ticks markers, tick labels, grid lines) on the background canvas.\r\n * @private\r\n */\r\nGraph.prototype._renderYAxis = function () {\r\n    if (!this._options.axes.y.show) {\r\n        return;\r\n    }\r\n    const ticks = this._axes.y.getTicks();\r\n    let oldY;\r\n    for (let i = 0; i < ticks.length; ++i) {\r\n        let x = this._canvas.graph.getX();\r\n        let y = this._canvas.graph.getContentY() + ticks[i].coordinate;\r\n        //Draw tick markers.\r\n        if (ticks.markers) {\r\n            x -= ticks.markers.offset;\r\n            this._canvas.background.line(x, y, x - ticks.markers.length, y, ticks.markers.width, ticks.markers.color);\r\n            x -= ticks.markers.length;\r\n        }\r\n        //Draw grid line.\r\n        if (ticks.grid && y > this._canvas.graph.getContentY() * 1.01 && y < (this._canvas.graph.getContentY() + this._canvas.graph.getContentHeight()) * 0.99) {\r\n            this._canvas.background.line(this._canvas.graph.getContentX(), y, this._canvas.graph.getContentX() + this._canvas.graph.getContentWidth(), y, ticks.grid.width, ticks.grid.color);\r\n        }\r\n        //Draw tick label.\r\n        if (ticks.labels && (!oldY || Math.abs(y - oldY) > ticks.labels.size)) {\r\n            x -= ticks.labels.offset;\r\n            this._canvas.background.text(ticks[i].label, x, y, ticks.labels.font, ticks.labels.color, \"right\", \"middle\");\r\n            oldY = y;\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * Renders the axes(x and y) labels on the background canvas.\r\n * @private\r\n */\r\nGraph.prototype._renderAxesLabels = function () {\r\n    //Draw X label.\r\n    if (this._options.axes.x.show && this._options.axes.x.label.length) {\r\n        const x = this._canvas.graph.getContentX() + this._canvas.graph.getContentWidth() / 2;\r\n        const y = this._canvas.background.getHeight() - this._options.axes.labels.offset;\r\n        this._canvas.background.text(this._axes.x.getAxisLabel(), x, y, this._axes.x.getAxisLabelFont(), this._options.axes.labels.color, \"center\", \"bottom\");\r\n    }\r\n    //Draw Y label.\r\n    if (this._options.axes.y.show && this._options.axes.y.label.length) {\r\n        const x = this._options.axes.labels.offset;\r\n        const y = this._canvas.graph.getContentY() + this._canvas.graph.getContentHeight() / 2;\r\n        this._canvas.background.text(this._axes.y.getAxisLabel(), x, y, this._axes.y.getAxisLabelFont(), this._options.axes.labels.color, \"center\", \"hanging\", -90);\r\n    }\r\n};\r\n\r\n/**\r\n * Renders the graph title on the background canvas.\r\n * @private\r\n */\r\nGraph.prototype._renderTitle = function () {\r\n    if (!this._options.title.label.length) {\r\n        return;\r\n    }\r\n    let x;\r\n    if (this._options.title.align.toLowerCase() === \"left\") {\r\n        x = this._canvas.graph.getContentX() + this._options.title.offsetX;\r\n    }\r\n    else if (this._options.title.align.toLowerCase() === \"center\") {\r\n        x = this._canvas.graph.getContentX() + this._canvas.graph.getContentWidth() / 2 + this._options.title.offsetX;\r\n    }\r\n    else if (this._options.title.align.toLowerCase() === \"right\") {\r\n        x = this._canvas.graph.getContentX() + this._canvas.graph.getContentWidth() - this._options.title.offsetX;\r\n    }\r\n    const y = this._options.title.offsetY;\r\n    const font = (this._options.title.bold ? \"bold \" : \"\") + this._options.title.size + \"px \" + this._options.title.font;\r\n    this._canvas.background.text(this._options.title.label, x, y, font, this._options.title.color, this._options.title.align, \"top\");\r\n};\r\n\r\n/**\r\n * Renders the highligted area on the highligh canvas.\r\n * @private\r\n */\r\nGraph.prototype._renderHighlight = function () {\r\n    this._canvas.highlight.clear();\r\n    for (let i = 0; i < this._highlights.length; ++i) {\r\n        let x1, y1, x2, y2;\r\n        //Convert values to pixels.\r\n        if (Is.isNull(this._highlights[i].x1)) {\r\n            x1 = 0;\r\n        }\r\n        else {\r\n            x1 = this._axes.x.valueToPixel(this._highlights[i].x1);\r\n        }\r\n        if (Is.isNull(this._highlights[i].y1)) {\r\n            y1 = 0;\r\n        }\r\n        else {\r\n            y1 = this._axes.y.valueToPixel(this._highlights[i].y1);\r\n        }\r\n        if (Is.isNull(this._highlights[i].x2)) {\r\n            x2 = this._canvas.graph.getContentWidth();\r\n        }\r\n        else {\r\n            x2 = this._axes.x.valueToPixel(this._highlights[i].x2);\r\n        }\r\n        if (Is.isNull(this._highlights[i].y2)) {\r\n            y2 = this._canvas.graph.getContentHeight();\r\n        }\r\n        else {\r\n            y2 = this._axes.y.valueToPixel(this._highlights[i].y2);\r\n        }\r\n        this._canvas.highlight.fillRectangle2(x1, y1, x2, y2, this._highlights[i].color);\r\n    }\r\n};\r\n\r\n/**\r\n * Renders the graph curve on the graph canvas.\r\n * @private\r\n */\r\nGraph.prototype._renderGraph = function () {\r\n    if (this._options.debug && this._options.graph.smoothing > 1) {\r\n        console.log(\"owp.graph DEBUG: Smoothed rendering: \" + this._options.graph.smoothing);\r\n    }\r\n\r\n    if (this._options.debug && this._options.graph.simplify) {\r\n        console.log(\"owp.graph DEBUG: Simplify rendering: \" + this._options.graph.simplify);\r\n    }\r\n\r\n    this._canvas.graph.clear();\r\n\r\n    //Get value to pixel functions.\r\n    const valueToPixelX = this._axes.x.getValueToPixelCallback();\r\n    const valueToPixelY = this._axes.y.getValueToPixelCallback();\r\n    //Value bounds        \r\n    const min = this._axes.x.getMin();\r\n    const max = this._axes.x.getMax();\r\n    //Get canvas context directly for increased performance.\r\n    const context = this._canvas.graph.getContext();\r\n    context.lineWidth = this._options.graph.lineWidth;\r\n    context.globalCompositeOperation = this._options.graph.compositeOperation;\r\n    for (let i = 0; i < this._options.graph.dataY.length; ++i) {\r\n        //Aquire callback for getting X-axis data values.\r\n        const getDataX = this._options.getDataCallback(\"x\", i);\r\n\r\n        //Find start and end indicies.\r\n        const length = this._options.graph.dataY[i].length;\r\n        const bsMin = Static.binarySearch(getDataX, length, min);\r\n        const bsMax = Static.binarySearch(getDataX, length, max);\r\n        let start = bsMin.found !== undefined ? bsMin.found : bsMin.min;\r\n        let end = bsMax.found !== undefined ? bsMax.found : bsMax.max;\r\n\r\n        //Aquire callback for getting Y-axis data values.\r\n        const getDataY = this._options.getDataCallback(\"y\", i, start);\r\n\r\n        //Start path.\r\n        context.beginPath();\r\n\r\n        //Render simplified data set.\r\n        if (this._options.graph.simplify) {\r\n            const simplify = this._options.graph.simplify;\r\n            let oldX = valueToPixelX(getDataX(start));\r\n            let minVal = getDataY(start);\r\n            let maxVal = minVal;\r\n            let newX, y;\r\n            ++start;\r\n            for (; start <= end; ++start) {\r\n                newX = valueToPixelX(getDataX(start));\r\n                if (Math.abs(oldX - newX) <= simplify) {\r\n                    y = getDataY(start);\r\n                    minVal = Math.min(minVal, y);\r\n                    maxVal = Math.max(maxVal, y);\r\n                    continue;\r\n                }\r\n                context.lineTo(oldX, valueToPixelY(minVal));\r\n                //Only add the second point if it differs from the first.\r\n                if (minVal !== maxVal) {\r\n                    context.lineTo(oldX, valueToPixelY(maxVal));\r\n                }\r\n                oldX = newX;\r\n                minVal = getDataY(start);\r\n                maxVal = minVal;\r\n            }\r\n            //Needed to add the last step.\r\n            context.lineTo(oldX, valueToPixelY(minVal));\r\n            if (minVal !== maxVal) {\r\n                context.lineTo(oldX, valueToPixelY(maxVal));\r\n            }\r\n        }\r\n        //Render full data set.\r\n        else {\r\n            for (; start <= end; ++start) {\r\n                context.lineTo(valueToPixelX(getDataX(start)), valueToPixelY(getDataY(start)));\r\n            }\r\n        }\r\n\r\n        //Fill under graph.\r\n        if (this._options.graph.fill) {\r\n            if (this._options.axes.x.inverted) {\r\n                context.lineTo(0, this._canvas.graph.getContentHeight());\r\n                context.lineTo(this._canvas.graph.getContentWidth(), this._canvas.graph.getContentHeight());\r\n            } else {\r\n                context.lineTo(this._canvas.graph.getContentWidth() * this._canvas.graph.getRatio(), this._canvas.graph.getContentHeight() * this._canvas.graph.getRatio());\r\n                context.lineTo(0, this._canvas.graph.getContentHeight() * this._canvas.graph.getRatio());\r\n            }\r\n            context.closePath();\r\n            context.fillStyle = this._options.getColor(i + 1);\r\n            context.fill();\r\n        }\r\n        //Stroke line.\r\n        else {\r\n            context.strokeStyle = this._options.getColor(i + 1);\r\n            context.stroke();\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * Get offset for the given paramters.\r\n * @private\r\n * @param {array} array - List of string parameters to get offset for.\r\n * @returns {int} - Offset in number of pixels.\r\n */\r\nGraph.prototype._getOffset = function (array) {\r\n    let offset = 0;\r\n    for (let i = 0; i < array.length; ++i) {\r\n        switch (array[i]) {\r\n            case \"top\":\r\n                if (this._options.title.label.length) {\r\n                    offset += this._options.title.size;\r\n                    offset += this._options.title.offsetY;\r\n                    offset += this._options.title.padding;\r\n                }\r\n                if (this._canvas.legend && this._options.legend.location.toLowerCase() === \"top\") {\r\n                    offset += this._canvas.legend.getHeight() + this._options.legend.offsetY;\r\n                }\r\n                else if (this._options.axes.y.show && this._options.axes.tickLabels.show) {\r\n                    offset += this._options.axes.tickLabels.size / 2;\r\n                }\r\n                break;\r\n            case \"bottom\":\r\n                if (this._options.axes.x.show) {\r\n                    if (this._options.axes.x.label.length) {\r\n                        offset += this._options.axes.labels.size;\r\n                        offset += this._options.axes.labels.offset;\r\n                        offset += this._options.axes.labels.padding;\r\n                    }\r\n                    if (this._options.axes.x.height) {\r\n                        offset += this._options.axes.x.height;\r\n                    }\r\n                    else {\r\n                        if (this._options.axes.tickLabels.show) {\r\n                            offset += this._options.axes.tickLabels.size;\r\n                            offset += this._options.axes.tickLabels.offset;\r\n                        }\r\n                        if (this._options.axes.tickMarkers.show) {\r\n                            offset += this._options.axes.tickMarkers.length;\r\n                            offset += this._options.axes.tickMarkers.offset;\r\n                        }\r\n                    }\r\n                }\r\n                else if (this._options.axes.y.show && this._options.axes.tickLabels.show) {\r\n                    offset += this._options.axes.tickLabels.size / 2;\r\n                }\r\n                break;\r\n            case \"left\":\r\n                if (this._options.axes.y.show) {\r\n                    if (this._options.axes.y.label.length) {\r\n                        offset += this._options.axes.labels.size;\r\n                        offset += this._options.axes.labels.offset;\r\n                        offset += this._options.axes.labels.padding;\r\n                    }\r\n                    if (this._options.axes.y.width) {\r\n                        offset += this._options.axes.y.width;\r\n                    }\r\n                    else {\r\n                        if (this._options.axes.tickLabels.show) {\r\n                            const tickLabelMinSize = this._axes.y.getBoundLabelWidth(\"min\", true);\r\n                            const tickLabelMaxSize = this._axes.y.getBoundLabelWidth(\"max\", true);\r\n                            offset += Math.max(tickLabelMinSize, tickLabelMaxSize);\r\n                            offset += this._options.axes.tickLabels.offset;\r\n                        }\r\n                        if (this._options.axes.tickMarkers.show) {\r\n                            offset += this._options.axes.tickMarkers.length;\r\n                            offset += this._options.axes.tickMarkers.offset;\r\n                        }\r\n                    }\r\n                }\r\n                else if (this._options.axes.x.show && this._options.axes.tickLabels.show) {\r\n                    offset += this._axes.x.getBoundLabelWidth(\"min\", true);\r\n                }\r\n                break;\r\n            case \"right\":\r\n                if (this._canvas.legend && this._options.legend.location.toLowerCase() === \"right\") {\r\n                    offset += this._canvas.legend.getWidth();\r\n                }\r\n                else {\r\n                    const defaultOffset = 20;\r\n                    let boundOffset = 0;\r\n                    if (this._options.axes.x.show && this._axes.x.hasBounds() && this._options.axes.tickLabels.show) {\r\n                        boundOffset = this._axes.x.getBoundLabelWidth(\"max\", true) / 2;\r\n                    }\r\n                    offset += Math.max(defaultOffset, boundOffset);\r\n                }\r\n                break;\r\n        }\r\n    }\r\n    return Math.round(offset);\r\n};\r\n\r\nGraph.createDummyData = Static.createDummyData;\r\nGraph.getDefaultOptions = Options.getDefault;\r\n\r\nexport default Graph;","// http://spin.js.org/#v2.3.2\r\n!function(a,b){\"object\"==typeof module&&module.exports?module.exports=b():\"function\"==typeof define&&define.amd?define(b):a.Spinner=b()}(this,function(){\"use strict\";function a(a,b){var c,d=document.createElement(a||\"div\");for(c in b)d[c]=b[c];return d}function b(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function c(a,b,c,d){var e=[\"opacity\",b,~~(100*a),c,d].join(\"-\"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=j.substring(0,j.indexOf(\"Animation\")).toLowerCase(),i=h&&\"-\"+h+\"-\"||\"\";return m[e]||(k.insertRule(\"@\"+i+\"keyframes \"+e+\"{0%{opacity:\"+g+\"}\"+f+\"%{opacity:\"+a+\"}\"+(f+.01)+\"%{opacity:1}\"+(f+b)%100+\"%{opacity:\"+a+\"}100%{opacity:\"+g+\"}}\",k.cssRules.length),m[e]=1),e}function d(a,b){var c,d,e=a.style;if(b=b.charAt(0).toUpperCase()+b.slice(1),void 0!==e[b])return b;for(d=0;d<l.length;d++)if(c=l[d]+b,void 0!==e[c])return c}function e(a,b){for(var c in b)a.style[d(a,c)||c]=b[c];return a}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)void 0===a[d]&&(a[d]=c[d])}return a}function g(a,b){return\"string\"==typeof a?a:a[b%a.length]}function h(a){this.opts=f(a||{},h.defaults,n)}function i(){function c(b,c){return a(\"<\"+b+' xmlns=\"urn:schemas-microsoft.com:vml\" class=\"spin-vml\">',c)}k.addRule(\".spin-vml\",\"behavior:url(#default#VML)\"),h.prototype.lines=function(a,d){function f(){return e(c(\"group\",{coordsize:k+\" \"+k,coordorigin:-j+\" \"+-j}),{width:k,height:k})}function h(a,h,i){b(m,b(e(f(),{rotation:360/d.lines*a+\"deg\",left:~~h}),b(e(c(\"roundrect\",{arcsize:d.corners}),{width:j,height:d.scale*d.width,left:d.scale*d.radius,top:-d.scale*d.width>>1,filter:i}),c(\"fill\",{color:g(d.color,a),opacity:d.opacity}),c(\"stroke\",{opacity:0}))))}var i,j=d.scale*(d.length+d.width),k=2*d.scale*j,l=-(d.width+d.length)*d.scale*2+\"px\",m=e(f(),{position:\"absolute\",top:l,left:l});if(d.shadow)for(i=1;i<=d.lines;i++)h(i,-2,\"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)\");for(i=1;i<=d.lines;i++)h(i);return b(a,m)},h.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}var j,k,l=[\"webkit\",\"Moz\",\"ms\",\"O\"],m={},n={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:\"#000\",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:\"spinner\",top:\"50%\",left:\"50%\",shadow:!1,hwaccel:!1,position:\"absolute\"};if(h.defaults={},f(h.prototype,{spin:function(b){this.stop();var c=this,d=c.opts,f=c.el=a(null,{className:d.className});if(e(f,{position:d.position,width:0,zIndex:d.zIndex,left:d.left,top:d.top}),b&&b.insertBefore(f,b.firstChild||null),f.setAttribute(\"role\",\"progressbar\"),c.lines(f,c.opts),!j){var g,h=0,i=(d.lines-1)*(1-d.direction)/2,k=d.fps,l=k/d.speed,m=(1-d.opacity)/(l*d.trail/100),n=l/d.lines;!function o(){h++;for(var a=0;a<d.lines;a++)g=Math.max(1-(h+(d.lines-a)*n)%l*m,d.opacity),c.opacity(f,a*d.direction+i,g,d);c.timeout=c.el&&setTimeout(o,~~(1e3/k))}()}return c},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(d,f){function h(b,c){return e(a(),{position:\"absolute\",width:f.scale*(f.length+f.width)+\"px\",height:f.scale*f.width+\"px\",background:b,boxShadow:c,transformOrigin:\"left\",transform:\"rotate(\"+~~(360/f.lines*k+f.rotate)+\"deg) translate(\"+f.scale*f.radius+\"px,0)\",borderRadius:(f.corners*f.scale*f.width>>1)+\"px\"})}for(var i,k=0,l=(f.lines-1)*(1-f.direction)/2;k<f.lines;k++)i=e(a(),{position:\"absolute\",top:1+~(f.scale*f.width/2)+\"px\",transform:f.hwaccel?\"translate3d(0,0,0)\":\"\",opacity:f.opacity,animation:j&&c(f.opacity,f.trail,l+k*f.direction,f.lines)+\" \"+1/f.speed+\"s linear infinite\"}),f.shadow&&b(i,e(h(\"#000\",\"0 0 4px #000\"),{top:\"2px\"})),b(d,b(i,h(g(f.color,k),\"0 0 1px rgba(0,0,0,.1)\")));return d},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}}),\"undefined\"!=typeof document){k=function(){var c=a(\"style\",{type:\"text/css\"});return b(document.getElementsByTagName(\"head\")[0],c),c.sheet||c.styleSheet}();var o=e(a(\"group\"),{behavior:\"url(#default#VML)\"});!d(o,\"transform\")&&o.adj?i():j=d(o,\"animation\")}return h});"],"sourceRoot":""}