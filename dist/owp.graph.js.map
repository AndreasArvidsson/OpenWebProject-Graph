{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./src/Axis.js","webpack:///./src/Callbacks.js","webpack:///./src/Canvas.js","webpack:///./src/Input.js","webpack:///./src/Interaction.js","webpack:///./src/Is.js","webpack:///./src/Options.js","webpack:///./src/Static.js","webpack:///./src/index.js","webpack:///./src/lib/spin.min.js"],"names":["Math","log10","Static","Axis","options","graphCanvas","axis","toLowerCase","_isX","_axis","axes","x","_getSize","getContentWidth","bind","y","getContentHeight","console","error","_options","_getRatio","getRatio","prototype","hasBounds","Is","isNull","getMin","getMax","isLog","log","isInverted","inverted","_overrideMin","_min","_overrideMax","_max","getAxisLabel","label","getTickLabelsFont","tickLabels","size","font","getAxisLabelFont","labels","getLabelWidth","_ticks","maxWidth","getTicks","hasZoom","zoom","min","max","calculateTicks","clearZoom","calculateBounds","newMin","newMax","bounds","calcBounds","_calculateXBounds","_calculateYBounds","warn","undefined","ticks","labelSize","width","ticker","_getDefaultTicks","length","i","coordinate","valueToPixel","value","tickMarkers","show","markers","offset","color","padding","getTextWidth","grid","pixelToValue","pixel","pow","formatLegendValue","legendValueFormatter","defaultLegendValueFormatter","getValueToPixelCallback","num","denom","numVar","numOp","logFunc","Function","graph","dataX","debug","data","dataY","j","minValue","maxValue","graphSize","tickerValuePreFormatter","getDefaultLogTicks","numTicks","getDefaultLinTicks","tickerValuePostFormatter","tickerLabelFormatter","defaultTickerLabelFormatter","round","ranges","divider","suffix","toString","range","step","getStepValue","start","diff","modf","secureFloat","push","mult","exp","floor","newValue","val","parseFloat","toPrecision","a","b","Callbacks","getRenderCallback","canvas","valueToPixelX","valueToPixelY","ctx","getContext","renderCallback","strokeCallback","getStrokeCallback","channelIndex","getDataX","getDataCallback","bsMin","binarySearch","bsMax","found","end","getDataY","beginPath","getCalculateValueCallback","useSimplify","renderSimplify","simplify","simplifyBy","getCalculateSimplifyCallback","smoothing","calculateSmothingValue","index","renderAvg","renderMin","renderMax","renderMinMax","renderFull","lineWidth","renderMarkers","markerRadius","abs","oldX","sum","count","newX","lineTo","minVal","maxVal","valueY","renderLine","circleAngle","PI","moveTo","arc","fill","renderFill","renderStroke","closePath","fillStyle","getColor","dashed","pattern","setLineDash","strokeStyle","stroke","calculateAvgValue","calculateMinValue","calculateMaxValue","calculateMinMaxValue","window","getSmoothingWindow","low","high","dataIndex","getDataCallbackSmoothing","centralIndex","threshold","diffToMin","diffToMax","Canvas","container","id","dontScale","_canvas","document","createElement","append","_context","_dontScale","style","position","margin","setPosition","setSize","setParent","remove","putImageData","offsetX","offsetY","_ratio","getCanvas","getX","_x","getY","_y","getContentX","_contentX","getContentY","_contentY","getWidth","offsetWidth","getHeight","offsetHeight","clientWidth","clientHeight","getContentOffsetX","_contentOffsetX","getContentOffsetY","_contentOffsetY","text","measureText","clear","clearRect","clearRectangle","height","setZIndex","zIndex","set","member","setBorder","borderStyle","borderColor","borderWidth","_calculateContentPosition","get","rotate","rotateDegrees","alignRight","valignBottom","left","right","top","bottom","resize","dpr","devicePixelRatio","bsr","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","scale","strokeRectangle","strokeRect","fillRectangle","fillRect","fillRectangle2","x1","y1","x2","y2","strokeCircle","radius","fillCircle","line","align","baseline","textAlign","textBaseline","save","translate","fillText","restore","array","disableMouseInteraction","compStyle","getComputedStyle","ratio","getPropertyValue","match","Input","attr","input","setAttribute","callback","parseInt","isNaN","dispatchEvent","Event","addEventListener","e","which","Interaction","_graph","updateOptions","interaction","_resizeCallback","_addResizeEvent","removeEventListener","trackMouse","_mouseTrackingCallbacks","_addMouseTrackingEvents","mousemove","mouseout","_zoomCallbacks","_addZoomEvents","mousedown","mouseup","dblclick","background","_smoothingCallback","_addSmoothingEvent","_smoothingInput","_createInteractionData","display","render","graphChangedSize","self","timeOutResize","resizeEnd","_calculateGraphSize","_plot","_resizing","resizeStart","highlight","_renderLegend","lastWidth","lastHeight","lastPixelRatio","clearTimeout","setTimeout","mouseDown","_axes","valueX","values","res","calculateValueCallback","pixelY","k","m","isFinite","_interactionData","startX","startY","lastHorizontal","lastX","lastY","button","diffX","diffY","newHorizontal","clamp","preventDefault","toElement","type","tabIndex","maxLength","border","className","trim","_container","callbackDone","_renderGraph","colors","imageData","getImageData","number","returnValue","cancelBubble","isDOM","obj","HTMLElement","isObject","isArray","isFunction","isBool","isNumber","isInt","isUint","isString","Array","isTypedArray","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","isAnyArray","isColor","div","isSize","isAlignment","noCenter","isFont","isCompositeOperation","isBorderWidth","isOffset","isBorderStyle","getCompareCallback","Error","getCompareCallbacks","callbacks","types","split","isOfType","isContent","isOfType2","isInOptions","Options","setDefault","isOk","_isOk","getName","names","getLegendFont","legend","getDefault","title","bold","location","newLine","xMin","xMax","yMin","yMax","compositeOperation","spinner","lines","corners","direction","speed","trail","shadow","hwaccel","setMembers","oldObj","newObj","path","Object","hasOwnProperty","call","evalOptions","_offset","calculateOffset","_border","assign","getOffset","getBorder","optionsOk","obj2","name","name2","paths","set2","msg","evalType","evalEnum","indexOf","join","evalArrayContains","evalAlign","evalCond","cond","eval","replaceAll","createDummyData","seed","random","sin","data1","data2","cos","dataCallback","mid","context","decimals","multiplier","LN10","pxToNum","marginTop","marginRight","marginBottom","marginLeft","str","replace","HTMLCanvasElement","CanvasRenderingContext2D","Graph","_init","getOptions","getDefaultOptions","setDefaultOptions","setOptions","_hasCalculatedGraphSize","_interaction","_initLegend","el","getElementById","legendDiv","settings","isTop","alignLeft","printValue","printX","printY","time","_renderTitle","_renderAxesLabels","_renderSpin","_renderXAxis","_renderYAxis","_renderHighlight","timeEnd","_spinner","stop","_spinnerDiv","_updateSpinnerSize","Spinner","spin","offsetTop","_getOffset","offsetBottom","offsetLeft","oldWidth","ceil","oldY","h","globalCompositeOperation","side","getBoundLabelWidth","module","exports","define","c","d","arguments","appendChild","f","g","substring","insertRule","cssRules","charAt","toUpperCase","slice","l","opts","defaults","n","addRule","coordsize","coordorigin","rotation","arcsize","filter","opacity","firstChild","childNodes","fps","insertBefore","o","timeout","parentNode","removeChild","boxShadow","transformOrigin","transform","borderRadius","animation","getElementsByTagName","sheet","styleSheet","behavior","adj"],"mappings":"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","file":"owp.graph.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","import Static from \"./Static\";\nimport Is from \"./Is\";\n\nif (!Math.log10) {\n    Math.log10 = Static.log10;\n}\n\n/** \n * The Axis class is a single axis to the Graph class.\n */\n\n/**\n * Create new graph axis.\n * @public\n * @constructor\n * @param {Options} options - GraphOptions object.\n * @param {Canvas} graphCanvas - Canvas instance for the graph.\n * @param {string} orientation - X or Y axis.\n * @returns {Axis}\n */\nfunction Axis(options, graphCanvas, axis) {\n    if (axis.toLowerCase() === \"x\") {\n        this._isX = true;\n        this._axis = options.axes.x;\n        this._getSize = graphCanvas.getContentWidth.bind(graphCanvas);\n    }\n    else if (axis.toLowerCase() === \"y\") {\n        this._isX = false;\n        this._axis = options.axes.y;\n        this._getSize = graphCanvas.getContentHeight.bind(graphCanvas);\n    }\n    else {\n        console.error(\"owp.graph ERROR: Axis: \\\"\" + axis + \"\\\" is neither X or Y.\");\n        return;\n    }\n    this._options = options;\n    this._getRatio = graphCanvas.getRatio.bind(graphCanvas);\n}\n\n/**\n * Returns true if all bounds are set.\n * @public\n * @returns {bool}\n */\nAxis.prototype.hasBounds = function () {\n    return !Is.isNull(this.getMin()) && !Is.isNull(this.getMax());\n};\n\n/**\n * True of this axis is logarithmic.\n * @public\n * @returns {bool}\n */\nAxis.prototype.isLog = function () {\n    return this._axis.log;\n};\n\n/**\n * True of this axis is inverted.\n * @public\n * @returns {bool}\n */\nAxis.prototype.isInverted = function () {\n    return this._axis.inverted;\n};\n\n/**\n * Get min bounds.\n * @public\n * @returns {number}\n */\nAxis.prototype.getMin = function () {\n    //Always prioritize override bounds.\n    if (!Is.isNull(this._overrideMin)) {\n        return this._overrideMin;\n    }\n    return this._min;\n};\n\n/**\n * Get max bounds.\n * @public\n * @returns {number}\n */\nAxis.prototype.getMax = function () {\n    //Always prioritize override bounds.\n    if (!Is.isNull(this._overrideMax)) {\n        return this._overrideMax;\n    }\n    return this._max;\n};\n\n/**\n * Get the axis label. Uses the options value formatter if set.\n * @public\n * @returns {string}\n */\nAxis.prototype.getAxisLabel = function () {\n    return this._axis.label;\n};\n\n/**\n * Get the font(family and size) for the tick labels.\n * @public\n * @returns {string}\n */\nAxis.prototype.getTickLabelsFont = function () {\n    return this._options.axes.tickLabels.size + \"px \" + this._options.axes.tickLabels.font;\n};\n\n/**\n * Get the font(family and size) for the axes labels.\n * @public\n * @returns {string}\n */\nAxis.prototype.getAxisLabelFont = function () {\n    return this._options.axes.labels.size + \"px \" + this._options.axes.labels.font;\n};\n\n/**\n * Get max width for labels.\n * @public\n * @returns {int}\n */\nAxis.prototype.getLabelWidth = function () {\n    return this._ticks ? this._ticks.labels.maxWidth : 0;\n};\n\n/**\n * Get the ticks array.\n * @public\n * @returns {array}\n */\nAxis.prototype.getTicks = function () {\n    return this._ticks;\n};\n\n/**\n * Return true if this axis has overridden bounds.\n * @public\n */\nAxis.prototype.hasZoom = function () {\n    return !Is.isNull(this._overrideMin) || !Is.isNull(this._overrideMax);\n};\n\n/**\n * Override bounds. Temporary override user given bounds. \n * @public\n */\nAxis.prototype.zoom = function (min, max) {\n    this._overrideMin = min;\n    this._overrideMax = max;\n    if (!Is.isNull(this.getMin()) || !Is.isNull(this.getMax())) {\n        this.calculateTicks();\n    }\n};\n\n/**\n * Remove overridden bounds.\n * @public\n */\nAxis.prototype.clearZoom = function () {\n    this.zoom();\n};\n\n/**\n * Calculates bounds. Uses user given option bounds first and calculates mising from data set.\n * @public\n */\nAxis.prototype.calculateBounds = function () {\n    let newMin, newMax;\n\n    //Prioritize user given bounds.\n    if (!Is.isNull(this._axis.bounds.min)) {\n        newMin = this._axis.bounds.min;\n    }\n    if (!Is.isNull(this._axis.bounds.max)) {\n        newMax = this._axis.bounds.max;\n    }\n\n    //Both bounds are not set by the user. Calculate missing.\n    if (Is.isNull(newMin) || Is.isNull(newMax)) {\n        let calcBounds;\n        if (this._isX) {\n            calcBounds = this._calculateXBounds();\n        }\n        else {\n            calcBounds = this._calculateYBounds();\n        }\n\n        if (calcBounds) {\n            //Use both calculated bounds.\n            if (Is.isNull(newMin) && Is.isNull(newMax)) {\n                newMin = calcBounds.min;\n                newMax = calcBounds.max;\n                //Both values are calculated. Move both.\n                if (newMin === newMax) {\n                    console.warn(\"owp.graph WARNING: Axis \" + (this._isX ? \"X\" : \"Y\") + \". bounds.min and bounds.max are equal. Move both.\");\n                    --newMin;\n                    ++newMax;\n                }\n            }\n            //Use only calculated min.\n            else if (Is.isNull(newMin)) {\n                newMin = calcBounds.min;\n                //Only move the calculated value.\n                if (newMin >= newMax) {\n                    console.warn(\"owp.graph WARNING: Axis \" + (this._isX ? \"X\" : \"Y\") + \". bounds.min and bounds.max are equal. Move min.\");\n                    newMin = newMax - 1;\n                }\n            }\n            //use only calculated max.\n            else if (Is.isNull(newMax)) {\n                newMax = calcBounds.max;\n                if (newMin >= newMax) {\n                    console.warn(\"owp.graph WARNING: Axis \" + (this._isX ? \"X\" : \"Y\") + \". bounds.min and bounds.max are equal. Move max.\");\n                    newMax = newMin + 1;\n                }\n            }\n        }\n    }\n\n    if (!Is.isNull(newMin) && !Is.isNull(newMax)) {\n        if (this._axis.log && newMin <= 0) {\n            console.error(\"owp.graph ERROR: Axis \" + (this._isX ? \"X\" : \"Y\") + \". When axis is logarithmic all bounds must be greater than zero.\");\n            newMin = newMax = undefined;\n        }\n    }\n    this._min = newMin;\n    this._max = newMax;\n};\n\n/**\n * Calculate graph axes ticks.\n * @public\n * @param {number} orientation - Optional size instead if using canvas size.\n */\nAxis.prototype.calculateTicks = function (size) {\n    if (!size) {\n        size = this._getSize();\n    }\n\n    let ticks;\n    const labelSize = this._isX ? this._options.axes.tickLabels.width : this._options.axes.tickLabels.size;\n    //Create ticks with user given options ticker.\n    if (this._axis.ticker) {\n        ticks = this._axis.ticker(this._axis.log, this.getMin(), this.getMax(), size, labelSize);\n    }\n    //Create ticks with the default ticker.\n    else {\n        ticks = this._getDefaultTicks(this._axis.log, this.getMin(), this.getMax(), size, labelSize);\n    }\n\n    if (!ticks.length) {\n        console.warn(\"owp.graph WARNING: Axis \" + (this._isX ? \"X\" : \"Y\") + \". Ticks list is empty.\");\n    }\n\n    //Update ticks with pixel coordinates.\n    for (let i = 0; i < ticks.length; ++i) {\n        ticks[i].coordinate = this.valueToPixel(ticks[i].value, size);\n    }\n    //Show tick markers.\n    if (this._options.axes.tickMarkers.show) {\n        ticks.markers = {\n            offset: this._options.axes.tickMarkers.offset,\n            length: this._options.axes.tickMarkers.length,\n            width: this._options.axes.tickMarkers.width,\n            color: this._options.axes.tickMarkers.color\n        };\n    }\n    //Show tick labels.\n    if (this._options.axes.tickLabels.show) {\n        ticks.labels = {\n            offset: this._options.axes.tickLabels.offset,\n            padding: this._options.axes.tickLabels.padding,\n            size: this._options.axes.tickLabels.size,\n            color: this._options.axes.tickLabels.color,\n            font: this.getTickLabelsFont(),\n            width: [],\n            maxWidth: 0\n        };\n        for (let i = 0; i < ticks.length; ++i) {\n            const width = Static.getTextWidth(ticks[i].label, this.getTickLabelsFont());\n            ticks.labels.width[i] = width;\n            ticks.labels.maxWidth = Math.max(ticks.labels.maxWidth, width);\n        }\n    }\n    //Show grid.\n    if (this._axis.grid.width) {\n        ticks.grid = {\n            width: this._axis.grid.width,\n            color: this._axis.grid.color\n        };\n    }\n    this._ticks = ticks;\n};\n\n/**\n * Get value from given pixel coordinate.\n * @public\n * @returns {number}\n */\nAxis.prototype.pixelToValue = function (pixel) {\n    //Logarithmic\n    if (this._axis.log) {\n        //Logarithmic inverted orientation.\n        if (this._isX ? this._axis.inverted : !this._axis.inverted) {\n            return Math.pow(10, pixel / this._getSize() * log10(this.getMin() / this.getMax()) + log10(this.getMax()));\n        }\n        //Logarithmic normal orientation.\n        else {\n            return Math.pow(10, pixel / this._getSize() * log10(this.getMax() / this.getMin()) + log10(this.getMin()));\n        }\n    }\n    //Linear\n    else {\n        //Linear inverted orientation.\n        if (this._isX ? this._axis.inverted : !this._axis.inverted) {\n            return pixel / this._getSize() * (this.getMin() - this.getMax()) + this.getMax();\n        }\n        //Linear normal orientation.\n        else {\n            return pixel / this._getSize() * (this.getMax() - this.getMin()) + this.getMin();\n        }\n    }\n};\n\n/**\n * Get pixel coordinate from given value.\n * @public\n * @param {number} orientation - Optional size instead if using canvas size.\n * @returns {number}\n */\nAxis.prototype.valueToPixel = function (value, size) {\n    if (!size) {\n        size = this._getSize();\n    }\n    //Logarithmic\n    if (this._axis.log) {\n        //Logarithmic inverted orientation.\n        if (this._isX ? this._axis.inverted : !this._axis.inverted) {\n            return log10(value / this.getMax()) / log10(this.getMin() / this.getMax()) * size;\n        }\n        //Logarithmic normal orientation.\n        else {\n            return log10(value / this.getMin()) / log10(this.getMax() / this.getMin()) * size;\n        }\n    }\n    //Linear\n    else {\n        //Linear inverted orientation.\n        if (this._isX ? this._axis.inverted : !this._axis.inverted) {\n            return (value - this.getMax()) / (this.getMin() - this.getMax()) * size;\n        }\n        //Linear normal orientation.\n        else {\n            return (value - this.getMin()) / (this.getMax() - this.getMin()) * size;\n        }\n    }\n};\n\n/**\n * Format the given value. Uses value formatter in options if available.\n * @public\n * @param {number} value\n * @returns {string}\n */\nAxis.prototype.formatLegendValue = function (value) {\n    //Use user given formatter.\n    if (this._axis.legendValueFormatter) {\n        return this._axis.legendValueFormatter(value, defaultLegendValueFormatter);\n    }\n    //Use default value formatter.\n    else {\n        return defaultLegendValueFormatter(value);\n    }\n};\n\n/**\n * Callback function for getting pixel coordinate from a given value.\n * Much faster than asking this class valueToPixel function for each value.\n * Needs to be required if window changes size or new bounds are set.\n * Safest to aquire for each render pass.\n * Calculates scaling ratio into the pixel coordinate. i.e. scaling needs to be disabled on the canvas.\n * @callback Axis~valueToPixelCallback\n * @param {int} index\n * @returns {number}\n */\n\n/**\n * Get a callback to calculate the pixel coordinate for a given value.\n * Used by the graph render function to improve performance.\n * @public\n * @returns {Axis~valueToPixelCallback}\n */\nAxis.prototype.getValueToPixelCallback = function () {\n    let num, denom, numVar, numOp, logFunc;\n    const size = this._getSize() * this._getRatio();\n\n    //Inverted X or normal Y.\n    if (this._isX ? this._axis.inverted : !this._axis.inverted) {\n        numVar = this.getMax();\n        denom = this._axis.log ? log10(this.getMin() / this.getMax()) : this.getMin() - this.getMax();\n    }\n    //Normal X or inverted Y.\n    else {\n        numVar = this.getMin();\n        denom = this._axis.log ? log10(this.getMax() / this.getMin()) : this.getMax() - this.getMin();\n    }\n\n    //Axis is logarithmic.\n    if (this._axis.log) {\n        numOp = \"/\";\n        logFunc = \"Math.log10\";\n    }\n    //Axis is linear.\n    else {\n        numOp = \"-\";\n        logFunc = \"\";\n    }\n\n    //Only do the numerator operation on the numerator if the variable is not zero.\n    if (numVar) {\n        num = logFunc + \"(value \" + numOp + \" \" + numVar + \")\";\n    }\n    else {\n        num = logFunc + \"(value)\";\n    }\n\n    //Only do the fraction if the denominator is not 1.\n    if (denom !== 1) {\n        denom = \"/ \" + denom;\n    }\n    else {\n        denom = \"\";\n    }\n\n    return new Function(\"value\", \"return \" + num + \" \" + denom + \" * \" + size);\n};\n\n/**\n * Calculate X-axis bounds.\n * @private\n * @returns {object} {int min, int max}\n */\nAxis.prototype._calculateXBounds = function () {\n    //Calculate missing X-axis bounds from dataX values.\n    if (this._options.graph.dataX.length) {\n        if (this._options.debug) {\n            console.debug(\"owp.graph DEBUG: X-bounds not set, but X-data is. Calculate X-bounds from X-data values.\");\n        }\n        let min = 4294967296;\n        let max = -4294967296;\n        for (let i = 0; i < this._options.graph.dataX.length; ++i) {\n            const data = this._options.graph.dataX[i];\n            min = Math.min(min, data[0], data[data.length - 1]);\n            max = Math.max(max, data[0], data[data.length - 1]);\n        }\n        return { min: min, max: max };\n    }\n    //Calculate X-axis bounds from dataY length.\n    else if (this._options.graph.dataY.length) {\n        if (this._options.debug) {\n            console.debug(\"owp.graph DEBUG: X-bounds and X-data not set, but Y-data is. Calculate X-bounds from Y-data length.\");\n        }\n        let max = 0;\n        for (let i = 0; i < this._options.graph.dataY.length; ++i) {\n            max = Math.max(max, this._options.graph.dataY[i].length);\n        }\n        return { min: 1, max };\n    }\n    else if (this._options.debug) {\n        console.debug(\"owp.graph DEBUG: X-bounds, X-data and Y-data not set. Can't calculate X-bounds.\");\n        return;\n    }\n};\n\n/**\n * Calculate Y-axis bounds.\n * @private\n * @returns {object} {int min, int max}\n */\nAxis.prototype._calculateYBounds = function () {\n    //Calculate Y-axis bounds from dataY values.\n    if (this._options.graph.dataY.length) {\n        if (this._options.debug) {\n            console.debug(\"owp.graph DEBUG: Y-bounds not set, but Y-data is. Calculate Y-bounds from Y-data values.\");\n        }\n        let min = null;\n        let max = null;\n        for (let i = 0; i < this._options.graph.dataY.length; ++i) {\n            const data = this._options.graph.dataY[i];\n            if (data.length && min === null) {\n                min = 4294967296;\n                max = -4294967296;\n            }\n            for (let j = 0; j < data.length; ++j) {\n                min = Math.min(min, data[j]);\n                max = Math.max(max, data[j]);\n            }\n        }\n        return min !== null\n            ? { min, max }\n            : null;\n    }\n    else if (this._options.debug) {\n        console.debug(\"owp.graph DEBUG: Y-bounds and Y-data not set. Can't calculate Y-bounds.\");\n        return;\n    }\n};\n\n/**\n * Default get ticks funciton. Used when no ticker is set in options.\n * @private\n * @param {bool} isLog - True if the values are going to be logarithmically distributed.\n * @param {number} minValue - Min/lower bounds value.\n * @param {number} maxValue - Max/upper bounds value.\n * @param {int} graphSize - Size(width or height) of graph in pixels.\n * @param {int} labelSize - Size(width or height) of tick labels in pixels.\n * @returns {array<{number, string}>}\n */\nAxis.prototype._getDefaultTicks = function (isLog, minValue, maxValue, graphSize, labelSize) {\n    //Pre-format ticker values.\n    if (this._axis.tickerValuePreFormatter) {\n        minValue = this._axis.tickerValuePreFormatter(minValue);\n        maxValue = this._axis.tickerValuePreFormatter(maxValue);\n    }\n\n    let ticks;\n\n    //If the range is to small even a log axis will get linear values.\n    if (isLog && maxValue - minValue >= 4 * minValue) {\n        ticks = getDefaultLogTicks(minValue, maxValue);\n    }\n    else {\n        //Max number of ticks.\n        const numTicks = this._axis.numTicks || (graphSize / (labelSize * 1.5));\n        ticks = getDefaultLinTicks(minValue, maxValue, numTicks);\n    }\n\n    //Post-format ticker values.\n    if (this._axis.tickerValuePostFormatter) {\n        for (let i = 0; i < ticks.length; ++i) {\n            ticks[i].value = this._axis.tickerValuePostFormatter(ticks[i].value);\n        }\n    }\n\n    //Add user formatted labels.\n    if (this._axis.tickerLabelFormatter) {\n        for (let i = 0; i < ticks.length; ++i) {\n            ticks[i].label = this._axis.tickerLabelFormatter(ticks[i].value, defaultTickerLabelFormatter);\n        }\n    }\n    //Add default formatted labels.\n    else {\n        for (let i = 0; i < ticks.length; ++i) {\n            ticks[i].label = defaultTickerLabelFormatter(ticks[i].value);\n        }\n    }\n\n    return ticks;\n};\n\nfunction defaultLegendValueFormatter(value) {\n    return Static.round(value, 5);\n}\n\nfunction defaultTickerLabelFormatter(value) {\n    if (value < 0) {\n        return '-' + defaultTickerLabelFormatter(-value);\n    }\n    let ranges = [];\n    if (value >= 1e3) {\n        ranges = [\n            { divider: 1e24, suffix: 'Y' },\n            { divider: 1e21, suffix: 'Z' },\n            { divider: 1e18, suffix: 'E' },\n            { divider: 1e15, suffix: 'P' },\n            { divider: 1e12, suffix: 'T' },\n            { divider: 1e9, suffix: 'G' },\n            { divider: 1e6, suffix: 'M' },\n            { divider: 1e3, suffix: 'k' }\n        ];\n    }\n    else if (value < 1e-2) {\n        ranges = [\n            { divider: 1e-3, suffix: 'm' },\n            { divider: 1e-6, suffix: 'µ' },\n            { divider: 1e-9, suffix: 'n' },\n            { divider: 1e-12, suffix: 'p' },\n            { divider: 1e-15, suffix: 'f' },\n            { divider: 1e-18, suffix: 'a' },\n            { divider: 1e-21, suffix: 'z' },\n            { divider: 1e-24, suffix: 'y' }\n        ];\n    }\n    for (let i = 0; i < ranges.length; i++) {\n        if (value >= ranges[i].divider) {\n            return Static.round(value / ranges[i].divider, 3).toString() + ranges[i].suffix;\n        }\n    }\n    return Static.round(value, 3).toString();\n}\n\n//Get linear ticks.\nfunction getDefaultLinTicks(minValue, maxValue, numTicks) {\n    //Value range\n    const range = maxValue - minValue;\n    //Get ticker value step.\n    const step = getStepValue(false, range / numTicks);\n\n    //Calculate start pos.\n    let start = minValue;\n    //Make sure start is on a step position.\n    const diff = modf(start, step);\n    if (diff > 0) {\n        start += step - diff;\n    }\n    if (diff < 0) {\n        start -= diff;\n    }\n\n    //Start and end value is the same. Just return the one value.\n    if (secureFloat(start) === secureFloat(maxValue)) {\n        return [{ value: secureFloat(start) }];\n    }\n\n    const ticks = [];\n    for (; start <= maxValue; start += step) {\n        const value = secureFloat(start);\n        ticks.push({ value });\n        //Reached infinite loop.\n        if (start === value + step) {\n            break;\n        }\n        start = value;\n    }\n    return ticks;\n}\n\n//Get logarithmic ticks.\nfunction getDefaultLogTicks(minValue, maxValue) {\n    const ticks = [];\n    let step = getStepValue(true, minValue);\n    //Make sure we always start at or before min value to get all the low end ticks.\n    if (step > minValue) {\n        step /= 10;\n    }\n    for (; ;) {\n        for (let i = 1; i < 10; ++i) {\n            const value = i * step;\n            if (value > maxValue) {\n                return ticks;\n            }\n            if (value >= minValue) {\n                ticks.push({ value: secureFloat(value) });\n            }\n        }\n        step *= 10;\n    }\n}\n\n//For a given value calculate the best step value.\nfunction getStepValue(isLog, value) {\n    const mult = isLog ? [1, 10] : [1, 2, 5, 10];\n    const exp = Math.pow(10, Math.floor(log10(value)));\n    for (let i = 0; i < mult.length; ++i) {\n        const newValue = mult[i] * exp;\n        if (newValue >= value) {\n            return newValue;\n        }\n    }\n}\n\nexport default Axis;\n\n/**\n * Secure float precision.\n * @public\n * @param {number} val\n * @returns {number}\n */\nfunction secureFloat(val) {\n    return parseFloat(val.toPrecision(15));\n}\n\n/**\n * Modulus for float.\n * @public\n * @param {number} a\n * @param {number} b\n * @returns {number}\n */\nfunction modf(a, b) {\n    return a - Math.round(a / b) * b;\n}\n\nconst log10 = Static.log10;","import Static from \"./Static\";\n\nconst Callbacks = {};\n\nCallbacks.getRenderCallback = function (options, canvas, axes) {\n    //Get value to pixel functions.\n    const valueToPixelX = axes.x.getValueToPixelCallback();\n    const valueToPixelY = axes.y.getValueToPixelCallback();\n    //Value bounds.    \n    const min = axes.x.getMin();\n    const max = axes.x.getMax();\n    //Context\n    const ctx = canvas.getContext();\n    //Callbacks\n    const renderCallback = getRenderCallback(options);\n    const strokeCallback = getStrokeCallback(options, canvas);\n    return channelIndex => {\n        //Aquire callback for getting X-axis data values.\n        const getDataX = getDataCallback(options, \"x\", channelIndex);\n        //Find start and end indicies.\n        const length = options.graph.dataY[channelIndex].length;\n        const bsMin = Static.binarySearch(getDataX, length, min);\n        const bsMax = Static.binarySearch(getDataX, length, max);\n        let start = bsMin.found !== undefined ? bsMin.found : bsMin.min;\n        let end = bsMax.found !== undefined ? bsMax.found : bsMax.max;\n        //Aquire callback for getting Y-axis data values.\n        const getDataY = getDataCallback(options, \"y\", channelIndex, start);\n        //Start path.    \n        ctx.beginPath();\n        //Render points/lines.\n        renderCallback(ctx, valueToPixelX, valueToPixelY, getDataX, getDataY, start, end);\n        //Stroke line.\n        strokeCallback(ctx, channelIndex);\n    }\n};\n\nCallbacks.getCalculateValueCallback = function (options, axes, dataY, getDataX, channelIndex, start) {\n    const useSimplify = options.renderSimplify() && (options.graph.simplify > 0.1 || options.graph.simplifyBy !== \"minMax\");\n    if (useSimplify) {\n        const valueToPixelX = axes.x.getValueToPixelCallback();\n        const getDataY = getDataCallback(options, \"y\", channelIndex, start);\n        return getCalculateSimplifyCallback(options.graph.simplifyBy)\n            .bind(null, dataY.length, getDataX, getDataY, valueToPixelX, options.graph.simplify);\n    }\n    else if (options.graph.smoothing) {\n        return calculateSmothingValue.bind(null, options.graph.smoothing, dataY);\n    }\n    return index => dataY[index];\n}\n\n\n/* *************** RENDER CALLBACKS *************** */\n\nfunction getRenderCallback(options) {\n    if (options.renderSimplify()) {\n        const simplify = options.graph.simplify;\n        switch (options.graph.simplifyBy) {\n            case \"avg\":\n                return renderAvg.bind(null, simplify);\n            case \"min\":\n                return renderMin.bind(null, simplify);\n            case \"max\":\n                return renderMax.bind(null, simplify);\n            case \"minMax\":\n                return renderMinMax.bind(null, simplify);\n        }\n    }\n    return renderFull.bind(\n        null,\n        !!options.graph.lineWidth,\n        options.renderMarkers(),\n        options.graph.markerRadius\n    );\n}\n\nfunction renderAvg(simplify, ctx, valueToPixelX, valueToPixelY, getDataX, getDataY, start, end) {\n    const abs = Math.abs;\n    let oldX = valueToPixelX(getDataX(start));\n    let sum = getDataY(start);\n    let count = 1;\n    //We have already counted first value;\n    ++start;\n    for (; start <= end; ++start) {\n        const newX = valueToPixelX(getDataX(start));\n        if (abs(newX - oldX) < simplify) {\n            sum += getDataY(start);\n            ++count;\n        }\n        else {\n            ctx.lineTo(oldX, valueToPixelY(sum / count));\n            oldX = newX;\n            sum = getDataY(start);\n            count = 1;\n        }\n    }\n    //Needed to add the last step.\n    ctx.lineTo(oldX, valueToPixelY(sum / count));\n}\n\nfunction renderMin(simplify, ctx, valueToPixelX, valueToPixelY, getDataX, getDataY, start, end) {\n    const abs = Math.abs;\n    const min = Math.min;\n    let oldX = valueToPixelX(getDataX(start));\n    let minVal = getDataY(start);\n    //We have already counted first value;\n    ++start;\n    for (; start <= end; ++start) {\n        const newX = valueToPixelX(getDataX(start));\n        if (abs(newX - oldX) < simplify) {\n            minVal = min(minVal, getDataY(start));\n        }\n        else {\n            ctx.lineTo(oldX, valueToPixelY(minVal));\n            oldX = newX;\n            minVal = getDataY(start);\n        }\n    }\n    //Needed to add the last step.\n    ctx.lineTo(oldX, valueToPixelY(minVal));\n}\n\nfunction renderMax(simplify, ctx, valueToPixelX, valueToPixelY, getDataX, getDataY, start, end) {\n    const abs = Math.abs;\n    const max = Math.max;\n    let oldX = valueToPixelX(getDataX(start));\n    let maxVal = getDataY(start);\n    //We have already counted first value;\n    ++start;\n    for (; start <= end; ++start) {\n        const newX = valueToPixelX(getDataX(start));\n        if (abs(newX - oldX) < simplify) {\n            maxVal = max(maxVal, getDataY(start));\n        }\n        else {\n            ctx.lineTo(oldX, valueToPixelY(maxVal));\n            oldX = newX;\n            maxVal = getDataY(start);\n        }\n    }\n    //Needed to add the last step.\n    ctx.lineTo(oldX, valueToPixelY(maxVal));\n}\n\nfunction renderMinMax(simplify, ctx, valueToPixelX, valueToPixelY, getDataX, getDataY, start, end) {\n    const abs = Math.abs;\n    const min = Math.min;\n    const max = Math.max;\n    let oldX = valueToPixelX(getDataX(start));\n    let minVal = getDataY(start);\n    let maxVal = minVal;\n    //We have already counted first value;\n    ++start;\n    for (; start <= end; ++start) {\n        const newX = valueToPixelX(getDataX(start));\n        if (abs(newX - oldX) < simplify) {\n            const valueY = getDataY(start);\n            minVal = min(minVal, valueY);\n            maxVal = max(maxVal, valueY);\n        }\n        else {\n            ctx.lineTo(oldX, valueToPixelY(minVal));\n            //Only add the second point if it differs from the first.\n            if (minVal !== maxVal) {\n                ctx.lineTo(oldX, valueToPixelY(maxVal));\n            }\n            oldX = newX;\n            minVal = getDataY(start);\n            maxVal = minVal;\n        }\n    }\n    //Needed to add the last step.\n    ctx.lineTo(oldX, valueToPixelY(minVal));\n    if (minVal !== maxVal) {\n        ctx.lineTo(oldX, valueToPixelY(maxVal));\n    }\n}\n\nfunction renderFull(renderLine, renderMarkers, markerRadius, ctx, valueToPixelX, valueToPixelY, getDataX, getDataY, start, end) {\n    const circleAngle = 2 * Math.PI;\n    //Render line and markers\n    if (renderLine && renderMarkers) {\n        for (; start <= end; ++start) {\n            const x = valueToPixelX(getDataX(start));\n            const y = valueToPixelY(getDataY(start));\n            ctx.lineTo(x, y);\n            ctx.moveTo(x + markerRadius, y);\n            ctx.arc(x, y, markerRadius, 0, circleAngle);\n            ctx.moveTo(x, y);\n        }\n    }\n    //Render only line\n    else if (renderLine) {\n        for (; start <= end; ++start) {\n            ctx.lineTo(\n                valueToPixelX(getDataX(start)),\n                valueToPixelY(getDataY(start))\n            );\n        }\n    }\n    //Render only markers\n    else if (renderMarkers) {\n        for (; start <= end; ++start) {\n            const x = valueToPixelX(getDataX(start));\n            const y = valueToPixelY(getDataY(start));\n            ctx.moveTo(x + markerRadius, y);\n            ctx.arc(x, y, markerRadius, 0, circleAngle);\n        }\n    }\n}\n\n\n/* *************** STROKES CALLBACK *************** */\n\nfunction getStrokeCallback(options, canvas) {\n    //Fill graph\n    if (options.graph.fill) {\n        return renderFill.bind(null, options, canvas);\n    }\n    //Stroke line.\n    return renderStroke.bind(null, options);\n}\n\nfunction renderFill(options, canvas, ctx, channelIndex) {\n    //Render line\n    if (options.graph.lineWidth) {\n        if (options.axes.x.inverted) {\n            ctx.lineTo(0, canvas.getContentHeight());\n            ctx.lineTo(canvas.getContentWidth(), canvas.getContentHeight());\n        }\n        else {\n            ctx.lineTo(canvas.getContentWidth() * canvas.getRatio(), canvas.getContentHeight() * canvas.getRatio());\n            ctx.lineTo(0, canvas.getContentHeight() * canvas.getRatio());\n        }\n        ctx.closePath();\n    }\n    ctx.fillStyle = options.getColor(channelIndex + 1);\n    ctx.fill();\n}\n\nfunction renderStroke(options, ctx, channelIndex) {\n    //Set dashed options\n    if (options.graph.dashed[channelIndex]) {\n        let pattern = options.graph.dashed[channelIndex];\n        if (pattern === true) {\n            pattern = [5, 8];\n        }\n        ctx.setLineDash(pattern);\n    }\n    else {\n        ctx.setLineDash([]);\n    }\n\n    ctx.strokeStyle = options.getColor(channelIndex + 1);\n    ctx.stroke();\n}\n\n\n/* *************** CALCULATE VALUES CALLBACKS *************** */\n\nfunction getCalculateSimplifyCallback(simplifyBy) {\n    switch (simplifyBy) {\n        case \"avg\":\n            return calculateAvgValue;\n        case \"min\":\n            return calculateMinValue;\n        case \"max\":\n            return calculateMaxValue;\n        case \"minMax\":\n            return calculateMinMaxValue;\n    }\n}\n\nfunction calculateAvgValue(length, getDataX, getDataY, valueToPixelX, simplify, index) {\n    const abs = Math.abs;\n    const oldX = valueToPixelX(getDataX(index));\n    let sum = getDataY(index);\n    let count = 1;\n    for (let i = index + 1; i < length; ++i) {\n        const newX = valueToPixelX(getDataX(i));\n        if (abs(newX - oldX) < simplify) {\n            sum += getDataY(i);\n            ++count;\n        }\n        else {\n            break;\n        }\n    }\n    for (let i = index - 1; i > -1; --i) {\n        const newX = valueToPixelX(getDataX(i));\n        if (abs(newX - oldX) < simplify) {\n            sum += getDataY(i);\n            ++count;\n        }\n        else {\n            break;\n        }\n    }\n    return sum / count;\n}\n\nfunction calculateMinValue(length, getDataX, getDataY, valueToPixelX, simplify, index) {\n    const abs = Math.abs;\n    const min = Math.min;\n    const oldX = valueToPixelX(getDataX(index));\n    let minVal = getDataY(index);\n    for (let i = index + 1; i < length; ++i) {\n        const newX = valueToPixelX(getDataX(i));\n        if (abs(newX - oldX) < simplify) {\n            minVal = min(minVal, getDataY(i));\n        }\n        else {\n            break;\n        }\n    }\n    for (let i = index - 1; i > -1; --i) {\n        const newX = valueToPixelX(getDataX(i));\n        if (abs(newX - oldX) < simplify) {\n            minVal = min(minVal, getDataY(i));\n        }\n        else {\n            break;\n        }\n    }\n    return minVal;\n}\n\nfunction calculateMaxValue(length, getDataX, getDataY, valueToPixelX, simplify, index) {\n    const abs = Math.abs;\n    const max = Math.max;\n    const oldX = valueToPixelX(getDataX(index));\n    let maxVal = getDataY(index);\n    for (let i = index + 1; i < length; ++i) {\n        const newX = valueToPixelX(getDataX(i));\n        if (abs(newX - oldX) < simplify) {\n            maxVal = max(maxVal, getDataY(i));\n        }\n        else {\n            break;\n        }\n    }\n    for (let i = index - 1; i > -1; --i) {\n        const newX = valueToPixelX(getDataX(i));\n        if (abs(newX - oldX) < simplify) {\n            maxVal = max(maxVal, getDataY(i));\n        }\n        else {\n            break;\n        }\n    }\n    return maxVal;\n}\n\nfunction calculateMinMaxValue(length, getDataX, getDataY, valueToPixelX, simplify, index) {\n    const abs = Math.abs;\n    const min = Math.min;\n    const max = Math.max;\n    const oldX = valueToPixelX(getDataX(index));\n    let minVal = getDataY(index);\n    let maxVal = minVal;\n    for (let i = index + 1; i < length; ++i) {\n        const newX = valueToPixelX(getDataX(i));\n        if (abs(newX - oldX) < simplify) {\n            const value = getDataY(i);\n            minVal = min(minVal, value);\n            maxVal = max(maxVal, value);\n        }\n        else {\n            break;\n        }\n    }\n    for (let i = index - 1; i > -1; --i) {\n        const newX = valueToPixelX(getDataX(i));\n        if (abs(newX - oldX) < simplify) {\n            const value = getDataY(i);\n            minVal = min(minVal, value);\n            maxVal = max(maxVal, value);\n        }\n        else {\n            break;\n        }\n    }\n    return abs(minVal) > maxVal ? minVal : maxVal;\n}\n\nfunction calculateSmothingValue(smoothing, dataY, index) {\n    const window = getSmoothingWindow(index, smoothing, dataY.length);\n    let sum = 0;\n    while (window.low <= window.high) {\n        sum += dataY[window.low++];\n    }\n    return sum / window.length;\n}\n\n/* *************** GET DATA CALLBACK *************** */\n\nfunction getDataCallback(options, axis, dataIndex, start) {\n    let data;\n    //X-axis.\n    if (axis.toLowerCase() === \"x\") {\n        //Has no dataX. Return index + 1.\n        if (options.graph.dataX.length === 0) {\n            return index => index + 1;\n        }\n        //Have one dataX for all dataY. \n        if (options.graph.dataX.length === 1) {\n            data = options.graph.dataX[0];\n        }\n        //Have one dataX for each dataY. \n        else {\n            data = options.graph.dataX[dataIndex];\n        }\n    }\n    //Y-axis.\n    else if (axis.toLowerCase() === \"y\") {\n        data = options.graph.dataY[dataIndex];\n        //Use smoothing.\n        if (options.graph.smoothing) {\n            return getDataCallbackSmoothing(options, start, data);\n        }\n    }\n    else {\n        console.error(\"owp.graph ERROR: Unknown axis: \" + axis);\n    }\n    //Default\n    return function (index) {\n        return data[index];\n    };\n}\nCallbacks.getDataCallback = getDataCallback;\n\nfunction getDataCallbackSmoothing(options, start, data) {\n    const centralIndex = Math.max(0, start - 1);\n    const window = getSmoothingWindow(centralIndex, options.graph.smoothing, data.length);\n    let low = window.low;\n    let high = window.high;\n    let sum = 0;\n    for (let i = low; i <= high; ++i) {\n        sum += data[i];\n    }\n    const threshold = 2 * options.graph.smoothing;\n    return index => {\n        //Decrease window size.\n        if (high === data.length - 1) {\n            low = index + index - high;\n            sum = 0;\n            for (let i = low; i <= high; ++i) {\n                sum += data[i];\n            }\n        }\n        //Increase window size.\n        else if (high < threshold) {\n            high = index + index - low;\n            sum = 0;\n            for (let i = low; i <= high; ++i) {\n                sum += data[i];\n            }\n        }\n        //Move window.\n        else {\n            sum -= data[low];\n            ++low;\n            ++high;\n            sum += data[high];\n        }\n        //Calculate average value.\n        return sum / (high - low + 1);\n    };\n}\n\n\n/* *************** MISC *************** */\n\nfunction getSmoothingWindow(index, smoothing, length) {\n    //Distance to list start.\n    const diffToMin = Math.max(0, index);\n    //Distance to list end.\n    const diffToMax = length - 1 - index;\n    //Shortest distance of min, max and smoothing window.\n    const diff = Math.min(diffToMin, diffToMax, smoothing);\n    return {\n        low: index - diff,\n        high: index + diff,\n        length: 2 * diff + 1\n    };\n}\n\nexport default Callbacks;","/** \n * The Canvas class is a wrapper for the HTML5 canvas 2D context.\n * Used to automatically get pixel perfect canvas size \n * and to make it easier to draw simple elements.\n */\n\n/**\n * Create a new canvas. Canvas is automatically scaled to be pixel perfect with screen.\n * @public\n * @constructor\n * @param {dom} container - Container dom.\n * @param {bool} dontScale - If True the scale transformation wont be set for this canvas. Scaling needs to be done manually.\n * @returns {Canvas}\n */\nfunction Canvas(container, id, dontScale) {\n    this._canvas = document.createElement(\"canvas\");\n    if (id) {\n        this._canvas.id = id;\n    }\n    container.append(this._canvas);\n    this._context = this._canvas.getContext(\"2d\");\n\n    this._dontScale = dontScale;\n\n    this._canvas.style.position = \"absolute\";\n    this._canvas.style.margin = 0;\n    this._canvas.style.padding = 0;\n    this._canvas.style[\"box-sizing\"] = \"border-box\";\n\n    //Set default position.\n    this.setPosition(0, 0);\n    //Fill parent div is default size.\n    this.setSize(\"100%\", \"100%\");\n}\n\n/**\n * Set a new parent for the canvas. Leave empty to only remove current parent.\n * @public\n * @param {dom} container - Container dom.\n */\nCanvas.prototype.setParent = function (container) {\n    this._canvas.remove();\n    if (container) {\n        container.append(this._canvas);\n    }\n};\n\nCanvas.prototype.putImageData = function (data, x, y, offsetX, offsetY) {\n    this._context.putImageData(data, x * this._ratio + offsetX, y * this._ratio + offsetY);\n};\n\n/**\n * Get the html5 canvas.\n * @public\n * @returns {canvas}\n */\nCanvas.prototype.getCanvas = function () {\n    return this._canvas;\n};\n\n/**\n * Get the html5 2D context. Used when performance and less function calls are needed.\n * @public\n * @returns {context}\n */\nCanvas.prototype.getContext = function () {\n    return this._context;\n};\n\n/**\n * Get the x-coordinate relative to the canvas parent.\n * @public\n * @returns {int} X-coordinate in pixels.\n */\nCanvas.prototype.getX = function () {\n    return this._x;\n};\n\n/**\n * Get the y-coordinate relative to the canvas parent.\n * @public\n * @returns {int} Y-coordinate in pixels.\n */\nCanvas.prototype.getY = function () {\n    return this._y;\n};\n\n/**\n * Get the content x-coordinate relative to the canvas parent.\n * @public\n * @returns {int} X-coordinate in pixels.\n */\nCanvas.prototype.getContentX = function () {\n    return this._contentX;\n};\n\n/**\n * Get the content y-coordinate relative to the canvas parent.\n * @public\n * @returns {int} Y-coordinate in pixels.\n */\nCanvas.prototype.getContentY = function () {\n    return this._contentY;\n};\n\n/**\n * Get the canvas width.\n * @public\n * @returns {int} - Width in pixels.\n */\nCanvas.prototype.getWidth = function () {\n    return this._canvas.offsetWidth;\n};\n\n/**\n * Get the canvas height.\n * @public\n * @returns {int} - Height in pixels.\n */\nCanvas.prototype.getHeight = function () {\n    return this._canvas.offsetHeight;\n};\n\n/**\n * Get the canvas content width.\n * @public\n * @returns {int} - Width in pixels.\n */\nCanvas.prototype.getContentWidth = function () {\n    return this._canvas.clientWidth;\n};\n\n/**\n * Get the canvas content height.\n * @public\n * @returns {int} - Height in pixels.\n */\nCanvas.prototype.getContentHeight = function () {\n    return this._canvas.clientHeight;\n};\n\n/**\n * Get the content X-axis offset from the canvas edge. Border, padding etc.\n * @returns {Canvas._contentOffsetX}\n */\nCanvas.prototype.getContentOffsetX = function () {\n    return this._contentOffsetX;\n};\n\n/**\n * Get the content Y-axis offset from the canvas edge. Border, padding etc.\n * @returns {Canvas._contentOffsetX}\n */\nCanvas.prototype.getContentOffsetY = function () {\n    return this._contentOffsetY;\n};\n\n\n/**\n * Get text with in pixels.\n * @public\n * @param {string} text - Text to measure.\n * @param {fontString} font - Font to use.\n * @returns {int} Width in pixels.\n */\nCanvas.prototype.getTextWidth = function (text, font) {\n    if (font) {\n        this._context.font = font;\n    }\n    return this._context.measureText(text).width;\n};\n\n/**\n * Clear canvas.\n * @public\n */\nCanvas.prototype.clear = function () {\n    //Scaling is done automatically.\n    if (!this._dontScale) {\n        this._context.clearRect(0, 0, this.getContentWidth(), this.getContentHeight());\n    }\n    //Do scaling manually.\n    else {\n        this._context.clearRect(0, 0, this.getContentWidth() * this._ratio, this.getContentHeight() * this._ratio);\n    }\n};\n\n/**\n * Clear area.\n * @public\n * @param {int} x - X-coordinate in pixels.\n * @param {int} y - Y-coordinate in pixels.\n * @param {int} width - Width in pixels.\n * @param {int} height - Height in pixels.\n */\nCanvas.prototype.clearRectangle = function (x, y, width, height) {\n    //Scaling is done automatically.\n    if (!this._dontScale) {\n        this._context.clearRect(x, y, width, height);\n    }\n    //Do scaling manually.\n    else {\n        this._context.clearRect(x * this._ratio, y * this._ratio, width * this._ratio, height * this._ratio);\n    }\n};\n\n/**\n * Set z-index.\n * @public\n * @param {int} zIndex - The new Z-index.\n */\nCanvas.prototype.setZIndex = function (zIndex) {\n    this._canvas.style[\"z-index\"] = zIndex;\n};\n\n/**\n * Set any context member.\n * @public\n * @param {string} member - Member name.\n * @param {type} value - Member value.\n */\nCanvas.prototype.set = function (member, value) {\n    this._context[member] = value;\n};\n\n/**\n * Set canvas border parameters.\n * @param {string} style\n * @param {string} color\n * @param {string} width\n */\nCanvas.prototype.setBorder = function (style, color, width) {\n    this._canvas.style.borderStyle = style;\n    this._canvas.style.borderColor = color;\n    this._canvas.style.borderWidth = width;\n    this._calculateContentPosition();\n};\n\n/**\n * Get any context member.\n * @public\n * @param {string} member - Member name.\n * @returns {type}\n */\nCanvas.prototype.get = function (member) {\n    return this._context[member];\n};\n\n/**\n * Get scale ratio.\n * @public\n * @returns {number}\n */\nCanvas.prototype.getRatio = function () {\n    return this._ratio;\n};\n\n/**\n * Rotate the canvas.\n * @public\n * @param {number} rotateDegrees - Number of degrees to rotate. Positivenumbers = clockwise.\n */\nCanvas.prototype.rotate = function (rotateDegrees) {\n    this._context.rotate(rotateDegrees * Math.PI / 180);\n};\n\n/**\n * Set position of canvas relative to it's parent.\n * @public\n * @param {int} x - X-coordinate in pixels.\n * @param {int} y - Y-coordinate in pixels.\n */\nCanvas.prototype.setPosition = function (x, y, alignRight, valignBottom) {\n    this._x = x;\n    this._y = y;\n    if (alignRight) {\n        this._canvas.style.left = \"\";\n        this._canvas.style.right = x + \"px\";\n    }\n    else {\n        this._canvas.style.left = x + \"px\";\n        this._canvas.style.right = \"\";\n    }\n    if (valignBottom) {\n        this._canvas.style.top = \"\";\n        this._canvas.style.bottom = y + \"px\";\n    }\n    else {\n        this._canvas.style.top = y + \"px\";\n        this._canvas.style.bottom = \"\";\n    }\n    this._calculateContentPosition();\n};\n\n/**\n * Set size of canvas. \n * @public\n * @param {int} width - Width in pixels. \n * @param {int} height - Height in pixels.\n */\nCanvas.prototype.setSize = function (width, height) {\n    if (width !== undefined) {\n        if (typeof width === \"number\") {\n            width = width + \"px\";\n        }\n        this._canvas.style.width = width;\n    }\n    if (height !== undefined) {\n        if (typeof height === \"number\") {\n            height = height + \"px\";\n        }\n        this._canvas.style.height = height;\n    }\n    this.resize();\n};\n\n/**\n * Resize canvas to match the width and height. Automatically scales to be pixel perfect.\n * @public\n */\nCanvas.prototype.resize = function () {\n    //Calculate pixel ratio.\n    const dpr = window.devicePixelRatio || 1;\n    const bsr = this._context.webkitBackingStorePixelRatio ||\n        this._context.mozBackingStorePixelRatio ||\n        this._context.msBackingStorePixelRatio ||\n        this._context.oBackingStorePixelRatio ||\n        this._context.backingStorePixelRatio || 1;\n    this._ratio = dpr / bsr;\n\n    //Update canvas.\n    this._canvas.width = this.getContentWidth() * this._ratio;\n    this._canvas.height = this.getContentHeight() * this._ratio;\n\n    //Check the dont scale parameter before scaling. Scaling is a time consuming process and might not be desired.\n    if (!this._dontScale) {\n        this._context.scale(this._ratio, this._ratio);\n    }\n};\n\n/**\n * Draw a stroke/line rectangle.\n * @public\n * @param {int} x - X-coordinate in pixels.\n * @param {int} y - Y-coordinate in pixels.\n * @param {int} width - Width in pixels.\n * @param {int} height - Height in pixels.\n * @param {int} lineWidth - Stroked line width in pixels.\n * @param {string} color - Color of stroked line.\n */\nCanvas.prototype.strokeRectangle = function (x, y, width, height, lineWidth, color) {\n    if (lineWidth) {\n        this._context.lineWidth = lineWidth;\n    }\n    if (color) {\n        this._context.strokeStyle = color;\n    }\n    //Line width build in both direction. Compensate coordinates.\n    x += this._context.lineWidth / 2;\n    y += this._context.lineWidth / 2;\n    width -= this._context.lineWidth;\n    height -= this._context.lineWidth;\n    this._context.strokeRect(x, y, width, height);\n};\n\n/**\n * Draw a filled rectangle using 1 coordinate.\n * @public\n * @param {int} x - X-coordinate in pixels.\n * @param {int} y - Y-coordinate in pixels.\n * @param {int} width - Width in pixels.\n * @param {int} height - Height in pixels.\n * @param {string} color - Color of filled rectangle.\n */\nCanvas.prototype.fillRectangle = function (x, y, width, height, color) {\n    if (color) {\n        this._context.fillStyle = color;\n    }\n    this._context.fillRect(x, y, width, height);\n};\n\n/**\n * Draw a filled rectangle using 2 coordinates.\n * @public\n * @param {int} x1 - First X-axis pixel.\n * @param {int} y1 - First Y-axis pixel.\n * @param {int} x2 - Second X-axis pixel.\n * @param {int} y2 - Second Y-axis pixel.\n * @param {string} color - Color of filled rectangle.\n */\nCanvas.prototype.fillRectangle2 = function (x1, y1, x2, y2, color) {\n    if (color) {\n        this._context.fillStyle = color;\n    }\n    this._context.fillRect(x1, y1, x2 - x1, y2 - y1);\n};\n\n/**\n * Draw a stroked circle.\n * @public\n * @param {int} x - X-coordinate in pixels.\n * @param {int} y - Y-coordinate in pixels.\n * @param {int} radius - Radius in pixels.\n * @param {string} color - Color of stroked line..\n * @param {int} width - Width of stroked line.\n */\nCanvas.prototype.strokeCircle = function (x, y, radius, color, width) {\n    if (color) {\n        this._context.strokeStyle = color;\n    }\n    if (width) {\n        this._context.lineWidth = width;\n    }\n    this._context.beginPath();\n    this._context.arc(x, y, radius, 0, 2 * Math.PI, false);\n    this._context.stroke();\n};\n\n/**\n * Draw a filled circle.\n * @public\n * @param {int} x - X-coordinate in pixels.\n * @param {int} y - Y-coordinate in pixels.\n * @param {int} radius - Radius in pixels.\n * @param {string} color - Color of stroked line..\n */\nCanvas.prototype.fillCircle = function (x, y, radius, color) {\n    if (color) {\n        this._context.fillStyle = color;\n    }\n    this._context.beginPath();\n    this._context.arc(x, y, radius, 0, 2 * Math.PI, false);\n    this._context.fill();\n};\n\n/**\n * Draw a line.\n * @public\n * @param {int} x1 - First x-coordinate in pixels.\n * @param {int} y1 - First y-coordinate in pixels.\n * @param {int} x2 - Second x-coordinate in pixels.\n * @param {int} y2 - Second y-coordinate in pixels.\n * @param {int} lineWidth - Stroked line width in pixels.\n * @param {string} color - Color of stroked line.\n */\nCanvas.prototype.line = function (x1, y1, x2, y2, lineWidth, color) {\n    if (lineWidth) {\n        this._context.lineWidth = lineWidth;\n    }\n    if (color) {\n        this._context.strokeStyle = color;\n    }\n    this._context.beginPath();\n    this._context.moveTo(x1, y1);\n    this._context.lineTo(x2, y2);\n    this._context.stroke();\n};\n\n/**\n * Draw filled text.\n * @public\n * @param {string} text - Text to draw.\n * @param {int} x - X-coordinate in pixels.\n * @param {int} y - Y-coordinate in pixels.\n * @param {string} font - Font to use.\n * @param {string} color - Color to use.\n * @param {string} align - Alignment ot use.\n * @param {string} baseline - Baseline to use.\n * @param {number} rotate - Rotate text number of degrees.\n */\nCanvas.prototype.text = function (text, x, y, font, color, align, baseline, rotate) {\n    if (font) {\n        this._context.font = font;\n    }\n    if (color) {\n        this._context.fillStyle = color;\n    }\n    if (align) {\n        this._context.textAlign = align;\n    }\n    if (baseline) {\n        this._context.textBaseline = baseline;\n    }\n    if (rotate) {\n        this._context.save();\n        this._context.translate(x, y);\n        this._context.rotate(rotate * Math.PI / 180);\n        this._context.fillText(text, 0, 0);\n        this._context.restore();\n    }\n    else {\n        this._context.fillText(text, x, y);\n    }\n};\n\n/**\n * Plot graph curve.\n * @public\n * @param {array} array - Input data. [[x, y], [x, y]]\n * @param {string} color - Color of stroked line.\n * @param {int} lineWidth - Width in pixels of stroked line.\n */\nCanvas.prototype.graph = function (array, color, lineWidth) {\n    if (color) {\n        this._context.strokeStyle = color;\n    }\n    if (lineWidth) {\n        this._context.lineWidth = lineWidth;\n    }\n    this._context.beginPath();\n    this._context.moveTo(array[0][0], array[0][1]);\n    for (let i = 1; i < array.length; ++i) {\n        this._context.lineTo(array[i][0], array[0][1]);\n    }\n    this._context.stroke();\n};\n\n/**\n * Fill entire canvas with the given color.\n * @public\n * @param {string} color - Color to use.\n */\nCanvas.prototype.fill = function (color) {\n    this.fillRectangle(0, 0, this.getContentWidth(), this.getContentHeight(), color);\n};\n\nCanvas.prototype.disableMouseInteraction = function () {\n    this._canvas.style[\"pointer-events\"] = \"none\";\n};\n\n/**\n * Calculate content X and Y.\n * @private\n */\nCanvas.prototype._calculateContentPosition = function () {\n    const compStyle = getComputedStyle(this._canvas);\n    const ratio = this._ratio !== undefined ? this._ratio : 1;\n    this._contentOffsetX = Math.round(ratio * parseFloat(compStyle.getPropertyValue(\"border-left-width\").match(/\\d+/)));\n    this._contentOffsetY = Math.round(ratio * parseFloat(compStyle.getPropertyValue(\"border-top-width\").match(/\\d+/)));\n    this._contentX = this._x + this._contentOffsetX;\n    this._contentY = this._y + this._contentOffsetY;\n};\n\nexport default Canvas;","function Input(attr) {\n    const input = document.createElement(\"input\");\n    if (attr) {\n        for (let i in attr) {\n            input.setAttribute(i, attr[i]);\n        }\n    }\n\n    function callback() {\n        const value = parseInt(input.value);\n        if (isNaN(value) || value < 0) {\n            input.value = 0;\n        }\n        //Trigger custom enter event.\n        input.dispatchEvent(new Event(\"done\"));\n    }\n\n    //Loose focus or enter fires the format callback.\n    input.addEventListener(\"change\", callback);\n\n    //Enter key pressed.\n    input.addEventListener(\"keypress\", e => {\n        if (e.which === 13) {\n            callback();\n        }\n    });\n\n    return input;\n}\n\nexport default Input;","import Static from \"./Static\";\nimport Input from \"./Input\";\nimport Callbacks from \"./Callbacks\";\n\n/** \n * Interaction is a class that handles the user interaction for the Graph class.\n */\n\n/**\n * Create a new Interaction.\n * @public\n * @constructor\n * @param {Graph} graph - Graph instance this interaction belongs to.\n * @returns {Interaction}\n */\nfunction Interaction(graph) {\n    this._graph = graph;\n}\n\n/**\n * Update(add/remove) interaction events.\n * @public\n */\nInteraction.prototype.updateOptions = function () {\n    //Resizing.\n    if (this._graph._options.interaction.resize && !this._resizeCallback) {\n        this._resizeCallback = this._addResizeEvent();\n    }\n    else if (!this._graph._options.interaction.resize && this._resizeCallback) {\n        window.removeEventListener(\"resize\", this._resizeCallback);\n        this._resizeCallback = undefined;\n    }\n\n    //Mouse tracking.\n    if (this._graph._options.interaction.trackMouse && !this._mouseTrackingCallbacks) {\n        this._mouseTrackingCallbacks = this._addMouseTrackingEvents();\n    }\n    else if (!this._graph._options.interaction.trackMouse && this._mouseTrackingCallbacks) {\n        const canvas = this._graph._canvas.interaction.getCanvas();\n        canvas.removeEventListener(\"mousemove\", this._mouseTrackingCallbacks.mousemove);\n        canvas.removeEventListener(\"mouseout\", this._mouseTrackingCallbacks.mouseout);\n        this._mouseTrackingCallbacks = undefined;\n    }\n\n    //Zooming.\n    if (this._graph._options.interaction.zoom && !this._zoomCallbacks) {\n        this._zoomCallbacks = this._addZoomEvents();\n    }\n    else if (!this._graph._options.interaction.zoom && this._zoomCallbacks) {\n        let canvas = this._graph._canvas.interaction.getCanvas();\n        canvas.removeEventListener(\"mousedown\", this._zoomCallbacks.mousedown);\n        canvas.removeEventListener(\"mousemove\", this._zoomCallbacks.mousemove);\n        canvas.removeEventListener(\"mouseup\", this._zoomCallbacks.mouseup);\n        canvas.removeEventListener(\"dblclick\", this._zoomCallbacks.dblclick);\n        canvas = this._graph._canvas.background.getCanvas();\n        canvas.removeEventListener(\"mouseup\", this._zoomCallbacks.mouseup);\n        canvas.removeEventListener(\"mouseout\", this._zoomCallbacks.mouseout);\n        this._zoomCallbacks = undefined;\n    }\n\n    //Smooth option.\n    if (this._graph._options.interaction.smoothing && !this._smoothingCallback) {\n        this._smoothingCallback = this._addSmoothingEvent();\n    }\n    else if (!this._graph._options.interaction.smoothing && this._smoothingCallback) {\n        this._smoothingInput.removeEventListener(\"change\", this._smoothingCallback);\n        this._smoothingCallback = undefined;\n        this._smoothingInput.remove();\n        this._smoothingInput = undefined;\n    }\n\n    //Every time options are updated. Update smoothing value if available.\n    if (this._smoothingInput) {\n        this._smoothingInput.value = this._graph._options.graph.smoothing;\n    }\n\n    this._createInteractionData();\n};\n\n/**\n * Clear interaction data.\n * @public\n */\nInteraction.prototype.clear = function () {\n    this._graph._canvas.interaction.clear();\n    if (this._smoothingInput) {\n        this._smoothingInput.style.display = \"none\";\n    }\n};\n\n/**\n * Render interaction data.\n * @public\n */\nInteraction.prototype.render = function () {\n    if (this._smoothingInput) {\n        this._smoothingInput.style.display = \"block\";\n    }\n};\n\n/**\n * Inform the activity class that the graph has changed size and/or position.\n * @param {int} x - X-coordinate in pixels.\n * @param {int} y - Y-coordinate in pixels.\n * @param {int} width - Width in pixels.\n * @param {int} height - Height in pixels.\n */\nInteraction.prototype.graphChangedSize = function (x, y, width, height) {\n    if (this._smoothingInput) {\n        this._smoothingInput.style.top = (y + height - 21) + \"px\";\n        this._smoothingInput.style.left = x + \"px\";\n        this._smoothingInput.style.display = \"block\";\n    }\n};\n\n/**\n * Add a resize event.\n * @private\n * @returns {object} Object containing callbacks.\n */\nInteraction.prototype._addResizeEvent = function () {\n    const graph = this._graph;\n    const self = this;\n    let timeOutResize;\n    //Re-plots the graph on resize end.\n    function resizeEnd() {\n        graph._canvas.background.resize();\n        graph._calculateGraphSize();\n        graph._plot();\n        timeOutResize = undefined;\n        self._resizing = false;\n    }\n    //Clear graph, hightlight and spinner features on resize start.\n    function resizeStart() {\n        self._resizing = true;\n        graph._canvas.graph.clear();\n        graph._canvas.highlight.clear();\n        graph._canvas.interaction.clear();\n        graph._renderLegend();\n    }\n    let lastWidth = this._graph._canvas.background.getWidth();\n    let lastHeight = this._graph._canvas.background.getHeight();\n    let lastPixelRatio = window.devicePixelRatio;\n    function callback() {\n        //Make sure that the size actually have changed.\n        if (lastWidth !== graph._canvas.background.getWidth() || lastHeight !== graph._canvas.background.getHeight() || lastPixelRatio !== window.devicePixelRatio) {\n            lastWidth = graph._canvas.background.getWidth();\n            lastHeight = graph._canvas.background.getHeight();\n            lastPixelRatio = window.devicePixelRatio;\n            //First time the function is called for this resize event.\n            if (!timeOutResize) {\n                resizeStart();\n            }\n            //Reset timer each time so that the resizeEnd function doesnt run until the user has stopped resizing.\n            clearTimeout(timeOutResize);\n            timeOutResize = setTimeout(resizeEnd, 500);\n        }\n    }\n\n    window.addEventListener(\"resize\", callback);\n    return callback;\n};\n\nInteraction.prototype._addMouseTrackingEvents = function () {\n    const self = this;\n    const graph = this._graph;\n    function mousemove(e) {\n        if (self.mouseDown || self._resizing || !graph._axes.x.hasBounds() || e.offsetX < 0) {\n            return;\n        }\n        const valueX = graph._axes.x.pixelToValue(e.offsetX);\n        const values = [valueX];\n        graph._canvas.interaction.clear();\n        for (let i = 0; i < graph._options.graph.dataY.length; ++i) {\n            const dataY = graph._options.graph.dataY[i];\n            //Cant track unexisting values.\n            if (!dataY.length) {\n                continue;\n            }\n            const getDataX = Callbacks.getDataCallback(graph._options, \"x\", i);\n            const res = Static.binarySearch(getDataX, dataY.length, valueX);\n            const calculateValueCallback = Callbacks.getCalculateValueCallback(\n                graph._options, graph._axes, dataY, getDataX, i, res.min\n            );\n            let valueY, pixelY;\n            //Found exaxt X-value.\n            if (res.found !== undefined) {\n                valueY = calculateValueCallback(res.found);\n                pixelY = graph._axes.y.valueToPixel(valueY);\n            }\n            //Binary search returned min and max at same value without a found.\n            //There is no matching value. Just abort.\n            else if (res.min === res.max) {\n                continue;\n            }\n            //Calculate Y-value from min max coordinates.\n            else {\n                const x1 = graph._axes.x.valueToPixel(getDataX(res.min));\n                const x2 = graph._axes.x.valueToPixel(getDataX(res.max));\n                const y1 = graph._axes.y.valueToPixel(calculateValueCallback(res.min));\n                const y2 = graph._axes.y.valueToPixel(calculateValueCallback(res.max));\n                const k = (y2 - y1) / (x2 - x1);\n                const x = e.offsetX - x1;\n                const m = y1;\n                pixelY = k * x + m;\n                valueY = graph._axes.y.pixelToValue(pixelY);\n            }\n            //Store values to render on legend.\n            values[i + 1] = valueY;\n            //If value is missing don't plot it.\n            if (isFinite(pixelY)) {\n                self._interactionData[i].moveTo(e.offsetX, pixelY);\n            }\n        }\n        graph._renderLegend(values);\n    }\n    function mouseout() {\n        if (!self.mouseDown) {\n            graph._canvas.interaction.clear();\n            graph._renderLegend();\n        }\n    }\n    const canvas = graph._canvas.interaction.getCanvas();\n    canvas.addEventListener(\"mousemove\", mousemove);\n    canvas.addEventListener(\"mouseout\", mouseout);\n    return { mousemove, mouseout };\n};\n\n/**\n * Add zoom events.\n * @private\n * @returns {object} - object containing callbacks.\n */\nInteraction.prototype._addZoomEvents = function () {\n    const graph = this._graph;\n    const self = this;\n    this.mouseDown = false;\n    const threshold = 0.1 * Math.min(graph._canvas.interaction.getContentWidth(), graph._canvas.interaction.getContentHeight());\n    let startX, startY;\n    //true = horizontal. false = vertical.\n    let lastHorizontal;\n    const color = \"rgba(130, 130, 130, 0.2)\";\n    let lastX, lastY;\n\n    function mousedown(e) {\n        if (e.button === 0 && graph._axes.x.hasBounds() && graph._axes.y.hasBounds()) {\n            lastX = startX = e.offsetX;\n            lastY = startY = e.offsetY;\n            self.mouseDown = true;\n            lastHorizontal = undefined;\n            graph._renderLegend();\n        }\n    }\n    function mousemove(e) {\n        if (self.mouseDown && (e.offsetX !== lastX || e.offsetX !== lastY)) {\n            lastX = e.offsetX;\n            lastY = e.offsetY;\n            const diffX = Math.abs(startX - e.offsetX);\n            const diffY = Math.abs(startY - e.offsetY);\n            const newHorizontal = diffX > diffY;\n            if (newHorizontal === undefined || (newHorizontal !== lastHorizontal && (newHorizontal ? diffX : diffY) > threshold)) {\n                lastHorizontal = newHorizontal;\n            }\n            graph._canvas.interaction.clear();\n            //Mark horizontally.\n            if (lastHorizontal) {\n                graph._canvas.interaction.fillRectangle2(startX, 0, e.offsetX, graph._canvas.interaction.getContentHeight(), color);\n            }\n            //Mark vertically.\n            else {\n                graph._canvas.interaction.fillRectangle2(0, startY, graph._canvas.interaction.getContentWidth(), e.offsetY, color);\n            }\n        }\n    }\n    function mouseup(e) {\n        if (e.button === 0 && self.mouseDown) {\n            self.mouseDown = false;\n            if (startX !== e.offsetX || startY !== e.offsetY) {\n                graph._canvas.interaction.clear();\n                //X-axis.\n                if (lastHorizontal) {\n                    const x = clamp(0, e.offsetX, graph._canvas.interaction.getContentWidth());\n                    if (startX === x) {\n                        return;\n                    }\n                    const min = graph._axes.x.pixelToValue(Math.min(startX, x));\n                    const max = graph._axes.x.pixelToValue(Math.max(startX, x));\n                    graph._axes.x.zoom(min, max);\n                }\n                //Y-axis.\n                else {\n                    const y = clamp(0, e.offsetY, graph._canvas.interaction.getContentHeight());\n                    if (startY === y) {\n                        return;\n                    }\n                    const min = graph._axes.y.pixelToValue(Math.max(startY, y));\n                    const max = graph._axes.y.pixelToValue(Math.min(startY, y));\n                    graph._axes.y.zoom(min, max);\n                }\n                graph._plot();\n            }\n        }\n    }\n    function dblclick(e) {\n        //Prevents double click from selecting the div.\n        preventDefault(e);\n        if (graph._axes.x.hasZoom() || graph._axes.y.hasZoom()) {\n            graph._axes.x.clearZoom();\n            graph._axes.y.clearZoom();\n            graph._plot();\n        }\n    }\n    function mouseout(e) {\n        //Make sure we are in a drag event and that we are moving outside of the graph. Not inwards.\n        if (!self.mouseDown || e.toElement === graph._canvas.graph.getCanvas() || e.toElement === graph._canvas.interaction.getCanvas()) {\n            return;\n        }\n        graph._canvas.interaction.clear();\n        self.mouseDown = false;\n    }\n\n    let canvas = graph._canvas.interaction.getCanvas();\n    canvas.addEventListener(\"mousedown\", mousedown);\n    canvas.addEventListener(\"mousemove\", mousemove);\n    canvas.addEventListener(\"mouseup\", mouseup);\n    canvas.addEventListener(\"dblclick\", dblclick);\n\n    canvas = this._graph._canvas.background.getCanvas();\n    canvas.addEventListener(\"mouseup\", mouseup);\n    canvas.addEventListener(\"mouseleave\", mouseout);\n\n    return { mousedown, mousemove, mouseup, dblclick, mouseout };\n};\n\n/**\n * Add smoothing input event.\n * @returns {object} Object containing callbacks.\n */\nInteraction.prototype._addSmoothingEvent = function () {\n    this._smoothingInput = Input({\n        type: \"number\",\n        tabIndex: -1,\n        maxLength: 6,\n        value: 0,\n        min: 0\n    });\n    this._smoothingInput.style[\"z-index\"] = 5;\n    this._smoothingInput.style.position = \"absolute\";\n    this._smoothingInput.style.width = \"50px\";\n    this._smoothingInput.style.height = \"21px\";\n    this._smoothingInput.style[\"background-color\"] = \"white\";\n    this._smoothingInput.style[\"border-radius\"] = 0;\n    this._smoothingInput.style.border = \"1px solid #ccc\";\n    this._smoothingInput.style.color = \"#555\";\n    this._smoothingInput.style.padding = \"0 0 0 5px\";\n    this._smoothingInput.style.display = \"none\";\n    this._smoothingInput.className = ((this._smoothingInput.className || \"\") + \" a-graph-smoothing-input\").trim();\n    this._graph._container.append(this._smoothingInput);\n    const self = this;\n    function callbackDone() {\n        let value = parseInt(self._smoothingInput.value);\n        //Calculate min length for all data sets. Smoothing can't be greater than availalbe data points.\n        let length = 4294967296;\n        for (let i = 0; i < self._graph._options.graph.dataY.length; ++i) {\n            length = Math.min(length, self._graph._options.graph.dataY[i].length);\n        }\n        if (2 * value + 1 > length) {\n            value = Math.floor((length - 1) / 2);\n        }\n        self._smoothingInput.value = value;\n        self._graph._options.graph.smoothing = value;\n        self._graph._renderGraph();\n    }\n    this._smoothingInput.addEventListener(\"done\", callbackDone);\n    return callbackDone;\n};\n\n/**\n * Create interaction data.\n * @private\n */\nInteraction.prototype._createInteractionData = function () {\n    const radius = 3;\n    const ctx = document.createElement(\"canvas\").getContext(\"2d\");\n    this._interactionData = [];\n    for (let i = 0; i < this._graph._options.graph.dataY.length; ++i) {\n        //Clear area\n        ctx.clearRect(0, 0, 2 * radius, 2 * radius);\n\n        //Draw solid circle\n        ctx.beginPath();\n        ctx.arc(radius, radius, radius, 0, 2 * Math.PI);\n        ctx.fillStyle = this._graph._options.graph.colors[i + 1];\n        ctx.fill();\n\n        //If fill; draw black border to increase visibility.\n        if (this._graph._options.graph.fill) {\n            ctx.beginPath();\n            ctx.arc(radius, radius, radius, 0, 2 * Math.PI);\n            ctx.strokeStyle = \"#000000\";\n            ctx.stroke();\n        }\n\n        //Get image data from tmp context.\n        const imageData = ctx.getImageData(0, 0, 2 * radius, 2 * radius);\n        //Add member data.\n        const canvas = this._graph._canvas.interaction;\n        imageData.moveTo = function (x, y) {\n            canvas.putImageData(this, x, y, -radius, -radius);\n        };\n        this._interactionData[i] = imageData;\n    }\n};\n\nexport default Interaction;\n\n/**\n * Clamp the given value to the given range.\n * @param {type} min - Min value.\n * @param {type} number - Value to clamp.\n * @param {type} max - Max value.\n * @returns {Number} - Clamped value.\n */\nfunction clamp(min, number, max) {\n    if (number < min) {\n        return min;\n    }\n    else if (number > max) {\n        return max;\n    }\n    else {\n        return number;\n    }\n}\n\nfunction preventDefault(e) {\n    //Firefox, Chrome, etc.\n    if (e.preventDefault) {\n        e.preventDefault();\n    }\n    //IE\n    else {\n        e.returnValue = false;\n        e.cancelBubble = true;\n    }\n}","const Is = {};\n\n/**\n * Check if the given object is a DOM element.\n * @param {object} obj - Object to evaluate.\n * @returns {bool}\n */\nIs.isDOM = function (obj) {\n    return obj instanceof HTMLElement;\n};\n\n/**\n * Check of the given object is null or undefined.\n * @public\n * @param {string} obj - Object to evaluate.\n * @returns {bool}\n */\nIs.isNull = function (obj) {\n    return obj === undefined || obj === null;\n};\n\n/**\n * Check of the given object is a object.\n * @public\n * @param {string} obj - Object to evaluate.\n * @returns {bool}\n */\nIs.isObject = function (obj) {\n    return obj !== null && typeof obj === \"object\" && !Is.isArray(obj);\n};\n\n/**\n * Check of the given object is a function.\n * @private\n * @param {string} obj - Object to evaluate.\n * @returns {bool}\n */\nIs.isFunction = function (obj) {\n    return typeof obj === \"function\";\n};\n\n/**\n * Check of the given object is a bool.\n * @public\n * @param {string} obj - Object to evaluate.\n * @returns {bool}\n */\nIs.isBool = function (obj) {\n    return typeof obj === \"boolean\";\n};\n\n/**\n * Check of the given object is a number.\n * @public\n * @param {string} obj - Object to evaluate.\n * @returns {bool}\n */\nIs.isNumber = function (obj) {\n    return typeof obj === \"number\";\n};\n\n/**\n * Check of the given object is an integer.\n * @public\n * @param {string} obj - Object to evaluate.\n * @returns {bool}\n */\nIs.isInt = function (obj) {\n    return typeof obj === \"number\" && obj % 1 === 0;\n};\n\n/**\n * Check of the given object is an unsigned integer.\n * @public\n * @param {string} obj - Object to evaluate.\n * @returns {bool}\n */\nIs.isUint = function (obj) {\n    return typeof obj === \"number\" && obj >= 0 && obj % 1 === 0;\n};\n\n/**\n * Check of the given object is a string.\n * @public\n * @param {string} obj - Object to evaluate.\n * @returns {bool}\n */\nIs.isString = function (obj) {\n    return typeof obj === \"string\";\n};\n\n/**\n * Check of the given object is an Array.\n * @public\n * @param {string} obj - Object to evaluate.\n * @returns {bool}\n */\nIs.isArray = function (obj) {\n    return obj instanceof Array;\n};\n\n/**\n * Check of the given object is an typed array.\n * @public\n * @param {string} obj - Object to evaluate.\n * @returns {bool}\n */\nIs.isTypedArray = function (obj) {\n    return obj instanceof Int8Array\n        || obj instanceof Uint8Array\n        || obj instanceof Uint8ClampedArray\n        || obj instanceof Int16Array\n        || obj instanceof Uint16Array\n        || obj instanceof Int32Array\n        || obj instanceof Uint32Array\n        || obj instanceof Float32Array\n        || obj instanceof Float64Array;\n};\n\n/**\n * Check of the given object is an array or a typed array.\n * @public\n * @param {string} obj - Object to evaluate.\n * @returns {bool}\n */\nIs.isAnyArray = function (obj) {\n    return Is.isArray(obj) || Is.isTypedArray(obj);\n};\n\n/**\n * Check of the given object is a color.\n * @public\n * @param {string} obj - Object to evaluate.\n * @returns {bool}\n */\nIs.isColor = function (obj) {\n    const div = document.createElement(\"div\");\n    div.style.borderColor = \"\";\n    div.style.borderColor = obj;\n    return div.style.borderColor !== \"\";\n};\n\n/**\n * Check of the given object is a size.\n * @public\n * @param {string} obj - Object to evaluate.\n * @returns {bool}\n */\nIs.isSize = function (obj) {\n    const div = document.createElement(\"div\");\n    div.style.width = \"\";\n    div.style.width = obj;\n    return div.style.width !== \"\";\n};\n\n/**\n * Check of the given object is an alignment.\n * @public\n * @param {string} obj - Object to evaluate.\n * @param {bool} noCenter - If true the center alignment is not valid.\n * @returns {bool}\n */\nIs.isAlignment = function (obj, noCenter) {\n    obj = obj.toLowerCase();\n    if (noCenter) {\n        return obj === \"left\" || obj === \"right\";\n    }\n    else {\n        return obj === \"left\" || obj === \"center\" || obj === \"right\";\n    }\n};\n\n/**\n * Check of the given object is a font.\n * @public\n * @param {string} obj - Object to evaluate.\n * @returns {bool}\n */\nIs.isFont = function (obj) {\n    const div = document.createElement(\"div\");\n    div.style[\"font-family\"] = \"\";\n    div.style[\"font-family\"] = obj;\n    return div.style[\"font-family\"] !== \"\";\n};\n\n/**\n * Check of the given object is an composite operation.\n * @public\n * @param {string} obj - Object to evaluate.\n * @returns {bool}\n */\nIs.isCompositeOperation = function (obj) {\n    obj = obj.toLowerCase();\n    return obj === \"source-over\"\n        || obj === \"source-in\"\n        || obj === \"source-out\"\n        || obj === \"source-atop\"\n        || obj === \"destination-over\"\n        || obj === \"destination-in\"\n        || obj === \"destination-out\"\n        || obj === \"destination-atop\"\n        || obj === \"lighter\"\n        || obj === \"copy\"\n        || obj === \"xor\"\n        || obj === \"multiply\"\n        || obj === \"screen\"\n        || obj === \"overlay\"\n        || obj === \"darken\"\n        || obj === \"lighten\"\n        || obj === \"color-dodge\"\n        || obj === \"color-burn\"\n        || obj === \"hard-light\"\n        || obj === \"soft-light\"\n        || obj === \"difference\"\n        || obj === \"exclusion\"\n        || obj === \"hue\"\n        || obj === \"saturation\"\n        || obj === \"color\"\n        || obj === \"luminosity\";\n};\n\nIs.isBorderWidth = function (obj) {\n    const div = document.createElement(\"div\");\n    div.style.borderWidth = \"\";\n    div.style.borderWidth = obj;\n    return div.style.borderWidth !== \"\";\n};\n\nIs.isOffset = function (obj) {\n    const div = document.createElement(\"div\");\n    div.style.margin = \"\";\n    div.style.margin = obj;\n    return div.style.margin !== \"\";\n};\n\nIs.isBorderStyle = function (obj) {\n    const div = document.createElement(\"div\");\n    div.style.borderStyle = \"\";\n    div.style.borderStyle = obj;\n    return div.style.borderStyle !== \"\";\n};\n\n/**\n * Get a callback to evaluate if the given data is of the specified type.\n * @param {string} type\n * @returns {function]\n * }\n */\nIs.getCompareCallback = function (type) {\n    switch (type) {\n        case \"number\":\n            return Is.isNumber;\n        case \"int\":\n            return Is.isInt;\n        case \"string\":\n            return Is.isString;\n        case \"font\":\n            return Is.isFont;\n        case \"bool\":\n            return Is.isBool;\n        case \"array\":\n            return Is.isArray;\n        case \"typedArray\":\n            return Is.isTypedArray;\n        case \"anyArray\":\n            return Is.isAnyArray;\n        case \"object\":\n            return Is.isObject;\n        case \"function\":\n            return Is.isFunction;\n        case \"color\":\n            return Is.isColor;\n        case \"size\":\n            return Is.isSize;\n        case \"alignment\":\n            return Is.isAlignment;\n        case \"compositeOperation\":\n            return Is.isCompositeOperation;\n        case \"borderStyle\":\n            return Is.isBorderStyle;\n        case \"borderWidth\":\n            return Is.isBorderWidth;\n        case \"dom\":\n            return Is.isDOM;\n        case \"null\":\n            return Is.isNull;\n        case \"offset\":\n            return Is.isOffset;\n        default:\n            throw new Error(\"Is.getCompareCallback: No compare typed found for: \" + type);\n    }\n};\n\n/**\n * Get a list of callbacks to evaluate if the given data is of the specified type.\n * @param {string} type. Separated by |\n * @returns {array<function>]}\n */\nIs.getCompareCallbacks = function (type) {\n    const callbacks = [];\n    const types = type.split(\"|\");\n    if (!types.length) {\n        throw new Error(\"Is.getCompareCallbacks: types is empty.\");\n    }\n    for (let i = 0; i < types.length; ++i) {\n        callbacks.push(Is.getCompareCallback(types[i]));\n    }\n    return callbacks;\n};\n\n/**\n * True if object is of type\n * @param {string} type. Separated by |\n * @returns {bool}\n */\nIs.isOfType = function (obj, type) {\n    const callbacks = Is.getCompareCallbacks(type);\n    for (let i in callbacks) {\n        if (callbacks[i](obj)) {\n            return true;\n        }\n    }\n    return false;\n}\n\n/**\n * Check if the array only contains items if the given type.\n * @public\n * @param {array} array - Array to check.\n * @param {string} type - Type to compare itmes against.\n * @returns {bool} - True if the array only contains items if the given type.\n */\nIs.isContent = function (array, type) {\n    const callbacks = Is.getCompareCallbacks(type);\n    for (let i = 0; i < array.length; ++i) {\n        if (!isOfType2(array[i], callbacks)) {\n            return false;\n        }\n    }\n    return true;\n};\n\nIs.isInOptions = function (value, options) {\n    for (let i = 0; i < options.length; ++i) {\n        if (options[i] === value) {\n            return true;\n        }\n    }\n    return false;\n};\n\nexport default Is;\n\nfunction isOfType2(obj, callbacks) {\n    for (let i in callbacks) {\n        if (callbacks[i](obj)) {\n            return true;\n        }\n    }\n    return false;\n}","import Is from \"./Is\";\nimport Static from \"./Static\";\n\n/** \n * The Options class is the options and associated functions for the Graph class.\n * See setDefault() for a desciption of the possible option parameters.\n */\n\n/**\n * Create new Graph options.\n * @public\n * @constructor\n * @param {OPTIONS_OBJECT} options - Options to customize the graph.\n * @returns {Options}\n */\nfunction Options(options) {\n    this.setDefault();\n    if (options) {\n        this.set(options);\n    }\n}\n\n/**\n * Check if the options are ok / valid.\n * @public\n * @returns {bool} - True if the options are ok.\n */\nOptions.prototype.isOk = function () {\n    return this._isOk;\n};\n\n/**\n * Get color for a data set.  Index = 0 is X axis.\n * @public\n * @param {int} index - Index of the data set.\n * @returns {string} - CSS color string.\n */\nOptions.prototype.getColor = function (index) {\n    return this.graph.colors[index] ? this.graph.colors[index] : \"#000000\";\n};\n\n/**\n * Get name for a data set. Index = 0 is X axis.\n * @public\n * @param {int} index - Index of the data set.\n * @returns {string}\n */\nOptions.prototype.getName = function (index) {\n    if (this.graph.names[index] !== undefined) {\n        return this.graph.names[index];\n    }\n    else if (index > 0) {\n        return \"DATA\" + (index);\n    }\n    else {\n        return \"X\";\n    }\n};\n\n/**\n * Get the font(family and size) for the legend label.\n * @public\n * @returns {string}\n */\nOptions.prototype.getLegendFont = function () {\n    return this.legend.size + \"px \" + this.legend.font;\n};\n\n/**\n * Get the default options object.\n * @public\n * @returns {OPTIONS_OBJECT}\n */\nOptions.getDefault = function () {\n    return {\n        debug: false,\n        offset: \"0 20px 0 0\",\n        interaction: {\n            resize: true,\n            trackMouse: true,\n            zoom: true,\n            smoothing: false\n        },\n        title: {\n            label: \"\",\n            bold: false,\n            size: 20,\n            offsetX: 0,\n            offsetY: 0,\n            padding: 3,\n            font: \"verdana\",\n            color: \"black\",\n            align: \"center\"\n        },\n        legend: {\n            location: \"top\",\n            font: \"Arial\",\n            size: 15,\n            offsetX: 0,\n            offsetY: 0,\n            padding: 2,\n            align: \"right\",\n            newLine: false\n        },\n        highlight: {\n            xMin: null,\n            xMax: null,\n            yMin: null,\n            yMax: null,\n            color: \"rgba(0, 0, 255, 0.2)\"\n        },\n        zoom: {\n            xMin: null,\n            xMax: null,\n            yMin: null,\n            yMax: null\n        },\n        graph: {\n            dataX: [],\n            dataY: [],\n            colors: [\"#000000\", \"#0000FF\", \"#FF0000\", \"#800080\", \"#00FF00\", \"#8080FF\", \"#FF8080\", \"#FF00FF\", \"#00FFFF\"],\n            names: [],\n            dashed: [],\n            lineWidth: 1,\n            markerRadius: 0,\n            smoothing: 0,\n            simplify: 0.1,\n            simplifyBy: \"minMax\",\n            fill: false,\n            compositeOperation: \"source-over\"\n        },\n        axes: {\n            tickMarkers: {\n                show: true,\n                length: 5,\n                width: 1,\n                offset: 0,\n                color: \"#BEBEBE\"\n            },\n            tickLabels: {\n                show: true,\n                color: \"black\",\n                font: \"Arial\",\n                size: 12,\n                width: 40,\n                offset: 3,\n                padding: 2\n            },\n            labels: {\n                color: \"black\",\n                font: \"verdana\",\n                size: 15,\n                offset: 0,\n                padding: 0\n            },\n            x: {\n                show: true,\n                inverted: false,\n                log: false,\n                height: 0,\n                label: \"\",\n                numTicks: 0,\n                legendValueFormatter: null,\n                tickerValuePreFormatter: null,\n                tickerValuePostFormatter: null,\n                tickerLabelFormatter: null,\n                ticker: null,\n                grid: {\n                    width: 1,\n                    color: \"#BEBEBE\"\n                },\n                bounds: {\n                    min: null,\n                    max: null\n                }\n            },\n            y: {\n                show: true,\n                inverted: false,\n                log: false,\n                width: 0,\n                label: \"\",\n                numTicks: 0,\n                legendValueFormatter: null,\n                tickerValuePreFormatter: null,\n                tickerValuePostFormatter: null,\n                tickerLabelFormatter: null,\n                ticker: null,\n                grid: {\n                    width: 1,\n                    color: \"#BEBEBE\"\n                },\n                bounds: {\n                    min: null,\n                    max: null\n                }\n            }\n        },\n        border: {\n            style: \"solid\",\n            color: \"black\",\n            width: \"0 0 1px 1px\"\n        },\n        spinner: {//Options regarding the spinner.\n            show: false, //Automatically show spinner when plotting data. Can always be activated manually.\n            lines: 13, //The number of lines to draw.\n            length: 30, //The length of each line.\n            width: 10, //The line thickness.\n            radius: 30, //The radius of the inner circle.\n            corners: 1, //Corner roundness (0..1).\n            rotate: 0, //The rotation offset.\n            direction: 1, //1: clockwise, -1: counterclockwise\n            color: \"black\", //#rgb or #rrggbb or array of colors\n            speed: 1, //Revolutions per second\n            trail: 50, //Afterglow percentage\n            shadow: false, //If true a shadow is rendered.\n            hwaccel: true, //If true hardware acceleration is used.\n            position: 'relative', //Position type.\n            top: \"50%\", //CenterY position relative to parent\n            left: \"50%\"         //CenterX position relative to parent\n        }\n    };\n};\n\n/**\n * Set new options.\n * @public\n * @param {OPTIONS_OBJECT} options - The options to set.\n */\nOptions.prototype.set = function (options) {\n    function setMembers(oldObj, newObj, path) {\n        for (let i in newObj) {\n            if (!Array.isArray(oldObj) && !Object.prototype.hasOwnProperty.call(oldObj, i)) {\n                console.warn(\"owp.graph WARNING: Can't set unexisting option: \" + path + (path.length ? \".\" + i : i));\n                continue;\n            }\n            //Member is a new object. Call function recursivly.\n            if (Is.isObject(newObj[i])) {\n                setMembers(oldObj[i], newObj[i], path + (path.length ? \".\" : \"\") + i);\n            }\n            //Member is null or a base type. Set it.\n            else {\n                oldObj[i] = newObj[i];\n            }\n        }\n    }\n    setMembers(this, options, \"\");\n\n    this._isOk = evalOptions(this);\n    this._offset = Static.calculateOffset(this.offset);\n    this._border = Static.calculateOffset(this.border.width);\n};\n\n/**\n * Sets all options to their default values.\n * @public\n */\nOptions.prototype.setDefault = function () {\n    Object.assign(this, Options.getDefault());\n    this._isOk = true;\n};\n\n/**\n * Returns true if markers are to be rendered.\n * @public\n */\nOptions.prototype.renderMarkers = function() {\n    //Can't combine markers with filled lines.\n    return this.graph.markerRadius && (!this.graph.fill || !this.graph.lineWidth);\n}\n\n/**\n * Returns true if simplify algorithm is to be used.\n * @public\n */\nOptions.prototype.renderSimplify = function() {\n    //Can't combined simplified rendering with markers.\n    return this.graph.simplify && !this.renderMarkers();\n}\n\n/**\n * Returns object with all 4 side offsets\n * @public\n */\nOptions.prototype.getOffset = function() {\n    return this._offset;\n}\n\n/**\n * Returns object with all 4 side borders\n * @public\n */\nOptions.prototype.getBorder = function() {\n    return this._border;\n}\n\n/**\n * Evaluates the options and sets ok status flag.\n * @private\n */\nfunction evalOptions (options) {\n    let optionsOk = true;\n    let obj, obj2, name, name2;\n    function set(path) {\n        name = path;\n        obj = options;\n        const paths = path.split(\".\");\n        for (let i = 0; i < paths.length; ++i) {\n            obj = obj[paths[i]];\n        }\n    }\n    function set2(path) {\n        name2 = path;\n        obj2 = options;\n        const paths = path.split(\".\");\n        for (let i = 0; i < paths.length; ++i) {\n            obj2 = obj2[paths[i]];\n        }\n    }\n    function error(msg) {\n        console.error(\"owp.graph ERROR: invalid option. \" + name + \": \" + msg);\n        optionsOk = false;\n    }\n    function evalType(type) {\n        const res = Is.isOfType(obj, type);\n        if (!res) {\n            error(\"\\\"\" + obj + \"\\\" is not of type: \" + type);\n        }\n        return res;\n    }\n    function evalEnum(values) {\n        const res = values.indexOf(obj) > -1;\n        if (!res) {\n            error(\"\\\"\" + obj + \"\\\" is not of any type: [\" + values.join(\", \") + \"].\");\n        }\n        return res;\n    }\n    function evalArrayContains(type) {\n        const res = Is.isContent(obj, type);\n        if (!res) {\n            error(\"\\\"[\" + obj + \"]\\\" contains object type other than: \" + type + \".\");\n        }\n        return res;\n    }\n    function evalAlign(noCenter) {\n        const res = Is.isAlignment(obj, noCenter);\n        if (!res) {\n            error(\"\\\"\" + obj + \"\\\" is not an valid alignment.\");\n        }\n        return res;\n    }\n    function evalCond(cond) {\n        const res = eval(cond);\n        if (!res) {\n            cond = cond.replaceAll(\"obj2\", name2).trim();\n            cond = cond.replaceAll(\"obj.\", \"\").trim();\n            cond = cond.replaceAll(\"obj\", \"\").trim();\n            if (Is.isArray(obj)) {\n                error(\"Failed condition: \" + cond);\n            }\n            else {\n                error(\"\\\"\" + obj + \"\\\" failed condition: \" + cond);\n            }\n        }\n        return res;\n    }\n\n    set(\"debug\");\n    evalType(\"bool\");\n\n    set(\"offset\");\n    evalType(\"int|offset\");\n\n    set(\"interaction\");\n    if (evalType(\"object\")) {\n        set(\"interaction.resize\");\n        evalType(\"bool\");\n\n        set(\"interaction.trackMouse\");\n        evalType(\"bool\");\n\n        set(\"interaction.zoom\");\n        evalType(\"bool\");\n\n        set(\"interaction.smoothing\");\n        evalType(\"bool\");\n    }\n\n    set(\"title\");\n    if (evalType(\"object\")) {\n        set(\"title.bold\");\n        evalType(\"bool\");\n\n        set(\"title.label\");\n        evalType(\"string\");\n\n        set(\"title.size\");\n        if (evalType(\"int\")) {\n            evalCond(\"obj > 0\");\n        }\n\n        set(\"title.offsetX\");\n        evalType(\"int\");\n\n        set(\"title.offsetY\");\n        evalType(\"int\");\n\n        set(\"title.padding\");\n        if (evalType(\"int\")) {\n            evalCond(\"obj >= 0\");\n        }\n\n        set(\"title.font\");\n        evalType(\"font\");\n\n        set(\"title.color\");\n        evalType(\"color\");\n\n        set(\"title.align\");\n        evalAlign();\n    }\n\n    set(\"legend\");\n    if (evalType(\"object\")) {\n        set(\"legend.location\");\n        evalType(\"string\");\n\n        set(\"legend.font\");\n        evalType(\"font\");\n\n        set(\"legend.size\");\n        if (evalType(\"int\")) {\n            evalCond(\"obj > 0\");\n        }\n\n        set(\"legend.offsetX\");\n        evalType(\"int\");\n\n        set(\"legend.offsetY\");\n        evalType(\"int\");\n\n        set(\"legend.padding\");\n        if (evalType(\"int\")) {\n            evalCond(\"obj >= 0\");\n        }\n\n        set(\"legend.align\");\n        evalAlign(true);\n\n        set(\"legend.newLine\");\n        evalType(\"bool\");\n    }\n\n    set(\"highlight\");\n    if (evalType(\"object\")) {\n        set(\"highlight.xMin\");\n        evalType(\"number|null\");\n\n        set(\"highlight.xMax\");\n        evalType(\"number|null\");\n\n        set(\"highlight.yMin\");\n        evalType(\"number|null\");\n\n        set(\"highlight.yMax\");\n        evalType(\"number|null\");\n\n        set(\"highlight.color\");\n        evalType(\"color\");\n    }\n\n    set(\"zoom\");\n    if (evalType(\"object\")) {\n        set(\"zoom.xMin\");\n        evalType(\"number|null\");\n\n        set(\"zoom.xMax\");\n        evalType(\"number|null\");\n\n        set(\"zoom.yMin\");\n        evalType(\"number|null\");\n\n        set(\"zoom.yMax\");\n        evalType(\"number|null\");\n    }\n\n    set(\"graph\");\n    if (evalType(\"object\")) {\n        set(\"graph.dataX\");\n        if (evalType(\"array\")) {\n            evalArrayContains(\"anyArray\");\n\n            set2(\"graph.dataY\");\n            if (evalCond(\"obj.length === 0 || obj.length === 1 || obj.length === obj2.length\")) {\n                evalCond(\"obj.length <= obj2.length\");\n            }\n        }\n\n        set(\"graph.dataY\");\n        if (evalType(\"array\")) {\n            evalArrayContains(\"anyArray\");\n            set2(\"graph.dataX\");\n            //Only one dataX(incl implicit). All dataY have to be of the same size.\n            if (obj2.length === 0 || obj2.length === 1) {\n                //Check so that all dataY are the same size.\n                for (let i = 0; i < obj.length; ++i) {\n                    if (obj[i].length !== obj[0].length) {\n                        error(\"Not all arrays are of the same size.\");\n                    }\n                }\n                //If dataX.length == 1. Check if same length as dataY.\n                if (obj2.length === 1 && (!obj.length || obj2[0].length !== obj[0].length)) {\n                    error(\"Size does not match dataX.\");\n                }\n            }\n            //dataX.length == dataY.length. Check that each pair(x,y) are the same length.\n            else if (obj.length === obj2.length) {\n                for (let i = 0; i < obj.length; ++i) {\n                    if (obj[i].length !== obj2[i].length) {\n                        error(\"dataY[\" + i + \"].length != dataX[\" + i + \"].length\");\n                    }\n                }\n            }\n        }\n\n        set(\"graph.colors\");\n        if (evalType(\"array\")) {\n            evalArrayContains(\"color\");\n        }\n\n        set(\"graph.names\");\n        if (evalType(\"array\")) {\n            evalArrayContains(\"string\");\n        }\n\n        set(\"graph.dashed\");\n        if (evalType(\"array\")) {\n            evalArrayContains(\"bool|array\");\n        }\n\n        set(\"graph.lineWidth\");\n        if (evalType(\"number\")) {\n            evalCond(\"obj >= 0\");\n        }\n\n        set(\"graph.markerRadius\");\n        if (evalType(\"number\")) {\n            evalCond(\"obj >= 0\");\n        }\n\n        set(\"graph.smoothing\");\n        if (evalType(\"int\")) {\n            evalCond(\"obj >= 0\");\n        }\n\n        set(\"graph.simplify\");\n        if (evalType(\"number\")) {\n            evalCond(\"obj >= 0 && obj <= 1\");\n        }\n\n        set(\"graph.simplifyBy\");\n        if (evalType(\"string\")) {\n            evalEnum([\"avg\", \"min\", \"max\", \"minMax\"]);\n        }\n\n        set(\"graph.fill\");\n        evalType(\"bool\");\n\n        set(\"graph.compositeOperation\");\n        evalType(\"compositeOperation\");\n    }\n\n    set(\"axes\");\n    if (evalType(\"object\")) {\n        set(\"axes.tickMarkers\");\n        if (evalType(\"object\")) {\n            set(\"axes.tickMarkers.show\");\n            evalType(\"bool\");\n\n            set(\"axes.tickMarkers.length\");\n            if (evalType(\"int\")) {\n                evalCond(\"obj > 0\");\n            }\n\n            set(\"axes.tickMarkers.width\");\n            if (evalType(\"int\")) {\n                evalCond(\"obj > 0\");\n            }\n\n            set(\"axes.tickMarkers.offset\");\n            if (evalType(\"int\")) {\n                evalCond(\"obj >= 0\");\n            }\n\n            set(\"axes.tickMarkers.color\");\n            evalType(\"color\");\n        }\n\n        set(\"axes.tickLabels\");\n        if (evalType(\"object\")) {\n            set(\"axes.tickLabels.show\");\n            evalType(\"bool\");\n\n            set(\"axes.tickLabels.color\");\n            evalType(\"color\");\n\n            set(\"axes.tickLabels.font\");\n            evalType(\"font\");\n\n            set(\"axes.tickLabels.size\");\n            if (evalType(\"int\")) {\n                evalCond(\"obj > 0\");\n            }\n\n            set(\"axes.tickLabels.width\");\n            if (evalType(\"int\")) {\n                evalCond(\"obj > 0\");\n            }\n\n            set(\"axes.tickLabels.offset\");\n            if (evalType(\"int\")) {\n                evalCond(\"obj >= 0\");\n            }\n\n            set(\"axes.tickLabels.padding\");\n            if (evalType(\"int\")) {\n                evalCond(\"obj >= 0\");\n            }\n        }\n\n        set(\"axes.labels\");\n        if (evalType(\"object\")) {\n            set(\"axes.labels.color\");\n            evalType(\"color\");\n\n            set(\"axes.labels.font\");\n            evalType(\"font\");\n\n            set(\"axes.labels.size\");\n            if (evalType(\"int\")) {\n                evalCond(\"obj > 0\");\n            }\n\n            set(\"axes.labels.offset\");\n            if (evalType(\"int\")) {\n                evalCond(\"obj >= 0\");\n            }\n\n            set(\"axes.labels.padding\");\n            if (evalType(\"int\")) {\n                evalCond(\"obj >= 0\");\n            }\n        }\n\n        //axes x and y\n        const axes = [\"axes.x\", \"axes.y\"];\n        for (let i = 0; i < axes.length; ++i) {\n            set(axes[i]);\n            if (evalType(\"object\")) {\n                set(axes[i] + \".show\");\n                evalType(\"bool\");\n\n                set(axes[i] + \".inverted\");\n                evalType(\"bool\");\n\n                set(axes[i] + \".log\");\n                evalType(\"bool\");\n\n                set(axes[i] + \".\" + (axes[i] === \"axes.x\" ? \"height\" : \"width\"));\n                if(evalType(\"int\")) {\n                    evalCond(\"obj >= 0\");\n                }\n\n                set(axes[i] + \".grid\");\n                if (evalType(\"object\")) {\n                    set(axes[i] + \".grid.width\");\n                    if(evalType(\"int\")) {\n                        evalCond(\"obj >= 0\");\n                    }\n\n                    set(axes[i] + \".grid.color\");\n                    evalType(\"color\");\n                }\n\n                set(axes[i] + \".label\");\n                evalType(\"string\");\n\n                set(axes[i] + \".bounds\");\n                if (evalType(\"object\")) {\n                    set(axes[i] + \".bounds.min\");\n                    if (!Is.isNull(obj)) {\n                        evalType(\"number\");\n                        set2(axes[i] + \".log\");\n                        if (obj2 && obj <= 0) {\n                            error(\"\\\"[\" + obj + \"]\\\" When axis is logarithmic all bounds must be greather than 0.\");\n                        }\n                    }\n\n                    set(axes[i] + \".bounds.max\");\n                    if (!Is.isNull(obj)) {\n                        evalType(\"number\");\n                        set2(axes[i] + \".log\");\n                        if (obj2 && obj <= 0) {\n                            error(\"\\\"[\" + obj + \"]\\\" When axis is logarithmic all bounds must be greather than 0.\");\n                        }\n                    }\n\n                    set(axes[i] + \".bounds.min\");\n                    set2(axes[i] + \".bounds.max\");\n                    if (!Is.isNull(obj) && !Is.isNull(obj2)) {\n                        evalCond(\"obj < obj2\");\n                    }\n                }\n\n                set(axes[i] + \".numTicks\");\n                if (evalType(\"int\")) {\n                    evalCond(\"obj >= 0\");\n                }\n\n                set(axes[i] + \".legendValueFormatter\");\n                evalType(\"function|null\");\n\n                set(axes[i] + \".tickerValuePreFormatter\");\n                evalType(\"function|null\");\n\n                set(axes[i] + \".tickerValuePostFormatter\");\n                evalType(\"function|null\");\n\n                set(axes[i] + \".tickerLabelFormatter\");\n                evalType(\"function|null\");\n\n                set(axes[i] + \".ticker\");\n                evalType(\"function|null\");\n            }\n        }\n    }\n\n    set(\"border\");\n    if (evalType(\"object\")) {\n        set(\"border.style\");\n        evalType(\"borderStyle\");\n\n        set(\"border.color\");\n        evalType(\"color\");\n\n        set(\"border.width\");\n        evalType(\"borderWidth\");\n    }\n\n    set(\"spinner\");\n    if (evalType(\"object\")) {\n        set(\"spinner.show\");\n        evalType(\"bool\");\n\n        set(\"spinner.lines\");\n        if (evalType(\"int\")) {\n            evalCond(\"obj > 0\");\n        }\n\n        set(\"spinner.length\");\n        if (evalType(\"int\")) {\n            evalCond(\"obj > 0\");\n        }\n\n        set(\"spinner.width\");\n        if (evalType(\"int\")) {\n            evalCond(\"obj > 0\");\n        }\n\n        set(\"spinner.radius\");\n        if (evalType(\"int\")) {\n            evalCond(\"obj > 0\");\n        }\n\n        set(\"spinner.corners\");\n        if (evalType(\"number\")) {\n            evalCond(\"obj >= 0 && obj <= 1\");\n        }\n\n        set(\"spinner.rotate\");\n        if (evalType(\"int\")) {\n            evalCond(\"obj >= 0\");\n        }\n\n        set(\"spinner.direction\");\n        if (evalType(\"int\")) {\n            evalCond(\"obj === -1 || obj === 1\");\n        }\n\n        set(\"spinner.color\");\n        evalType(\"color\");\n\n        set(\"spinner.speed\");\n        if (evalType(\"number\")) {\n            evalCond(\"obj > 0\");\n        }\n\n        set(\"spinner.trail\");\n        if (evalType(\"int\")) {\n            evalCond(\"obj >= 0\");\n        }\n\n        set(\"spinner.shadow\");\n        evalType(\"bool\");\n\n        set(\"spinner.hwaccel\");\n        evalType(\"bool\");\n\n        set(\"spinner.position\");\n        if (evalType(\"string\")) {\n            evalCond(\"obj === 'relative' || obj === 'absolute'\");\n        }\n\n        set(\"spinner.top\");\n        evalType(\"size\");\n\n        set(\"spinner.left\");\n        evalType(\"size\");\n    }\n\n    return optionsOk;\n}\n\n/**\n @typedef OPTIONS_OBJECT\n @type {object}\n\n @property {bool} debug - If true debug info will be outputted to the console.\n @property {int} offset - Offset in pixels. Between outer edge and inner content.\n\n @property {object} interaction - Options regarding user interaction with the graph.\n @property {bool} resize - If true the graph will be resized automatically.\n @property {bool} trackMouse - If true the mouse cursor will track the graph lines.\n @property {bool} zoom - If true zoom is enabled.\n @property {bool} smoothing - If true interactive smoothing input is enabled.\n\n @property {object} title - Options regarding the title.\n @property {string} title.label - The text of the label. Set to \"\" to hide the label.\n @property {bool} title.bold - If true the label font is bold.\n @property {int} title.size - Font height/size in pixels of the text.\n @property {int} title.offsetX - X-axis offset in pixels. Between title and graph vertical side.\n @property {int} title.offsetY - Y-axis offset in pixels. Between title and outer top edge.\n @property {int} title.padding - Padding in pixels. Between title and graph.\n @property {string} title.font - Font family of the text.\n @property {string} title.color - Color of the text.\n @property {string} title.align - Title alignment. [\"left\", \"center\", \"right\"]\n\n @property {object} legend - Options regarding the legend.\n @property {bool} legend.show - If true the legend is shown.\n @property {string} legend.font - Font family of the text.\n @property {int} legend.size - Font size/height in pixels.\n @property {int} legend.offsetX - Y-axis offset in pixels. Move legend in x-axis.\n @property {int} legend.offsetY - X-axis offset in pixels. Move legend in y-axis.\n @property {int} legend.padding - Padding in pixels. Between legend and graph.\n @property {int} legend.align -  The legend alignment. [\"left\", \"right\"]\n @property {int} legend.newLine -  If true a new line is made between each data set.\n\n @property {object} highlight - Options regarding highlighting.\n @property {bool} highlight.xMin - X-axis low value. \n @property {int} highlight.xMax - X-axis high value.\n @property {string} highlight.yMin - Y-axis low value.\n @property {int} highlight.yMax - Y-axis high value.\n @property {string} highlight.color - Color of the highlight.\n\n @property {object} zoom - Options regarding default zoom.\n @property {bool} zoom.xMIn - X-axis low value. \n @property {int} zoom.xMax - X-axis high value.\n @property {string} zoom.yMin - Y-axis low value.\n @property {int} zoom.yMax - Y-axis high value.\n\n @property {object} graph - Options regarding the graph curve.\n @property {array<array>} graph.dataX - List of data sets for the X-axis. Can contain typed arrays.\n @property {array<array>} graph.dataY - List of data sets for the Y-axis. Can contain typed arrays.\n @property {array<string>} graph.colors - List of colors for each dataY set.\n @property {array<string>} graph.names - List of names for each dataY set.\n @property {array<string>} graph.dashed - List of dash parameters for each dataY set. true for default or number array for cusatom.\n @property {int} graph.lineWidth - Width in pixels of the stroked line.\n @property {int} graph.markerRadius - Width in pixels of the radius of the marker.\n @property {int} graph.smoothing - Number of samples on each side of the central value for the central moving average algorithm. 0 = disabled.\n @property {int} graph.simplify - Pixel tolerance for the simplification algorithm. 0 = disabled.\n @property {int} graph.simplifyBy - Character of the simplification algorithm. 0 = minMax.\n @property {bool} graph.fill - If true the area under the graph will be filled.\n @property {string} graph.compositeOperation - Context global composit operation.\n\n @property {object} axes - Options regarding the axes.\n\n @property {object} axes.tickMarkers - Options regarding the tick markers.\n @property {bool} axes.tickMarkers.show - If true the tick markers are shown.\n @property {int} axes.tickMarkers.length - Length in pixels of the markers.\n @property {int} axes.tickMarkers.width - Width in pixels of the markers.\n @property {int} axes.tickMarkers.offset - Offset in pixels. Between graph and markers.\n @property {string} axes.tickMarkers.color - Color of the tick markers.\n\n @property {object} axes.tickLabels - Options regarding the tick labels.\n @property {bool} axes.tickLabels.show - If true the tick labels are shown.\n @property {string} axes.tickLabels.color - Color of the text.\n @property {string} axes.tickLabels.font - Font family of the text.\n @property {int} axes.tickLabels.size - Font size/height in pixels of the text.\n @property {int} axes.tickLabels.width - Max width of the labels. Used to calculate ticks.\n @property {int} axes.tickLabels.offset - Offset in pixels. Between outer edge and tick labels.\n @property {int} axes.tickLabels.padding - Padding in pixels. Between graph and markers.\n\n @property {object} axes.labels - Options regarding the axes labels.\n @property {string} axes.labels.color - Color of the text.\n @property {string} axes.labels.font - Font family of the text.\n @property {int} axes.labels.size - Font size/height in pixels of the text.\n @property {int} axes.labels.offset - Offset in pixels. Between outer edge and labels.\n @property {int} axes.labels.padding - Padding in pixels. Between label and graph.\n\n @property {object} axes.x - Options regarding the X-axis.\n @property {bool} axes.x.show - If true the X-axis is shown.\n @property {bool} axes.x.inverted - If true the axis direction is inverted.\n @property {bool} axes.x.log - If true the values on the axis are logarithmically distributed.\n @property {int} axes.x.height - Height in pixels of the axis. 0 = automatic size.\n @property {string} axes.x.label - Text of the axis label. Set to \"\" to hide the label.\n @property {int} axes.x.numTicks - Number of ticks to use by the default ticker.\n @property {formatterCallback} axes.x.legendValueFormatter - Callback that formats the legend values. Null = default callback.\n @property {formatterCallback} axes.x.tickerValuePreFormatter - Callback that formats the ticker values before ticks are created. \n @property {formatterCallback} axes.x.tickerValuePostFormatter - Callback that formats the ticker values after ticks are created.\n @property {formatterCallback} axes.x.tickerLabelFormatter - Callback that formats the ticker labels. Null = default callback.\n @property {tickerCallback} axes.x.ticker - Callback that creates the ticks. Null = default callback.\n @property {formatterCallback} axes.x.valueFormatter - Callback that formats the axis labels. Null = default callback.\n\n @property {object} axes.x.grid - Options regarding the X-axis grid.\n @property {int} axes.x.grid.width - Grid line width/thickness in pixels. 0 = no grid.\n @property {string} axes.x.grid.color - Color of the grid lines.\n\n @property {object} axes.x.bounds - Options regarding the X-axis bounds.\n @property {number} axes.x.bounds.min - Min/lower bounds value. Null = automatic value.\n @property {number} axes.x.bounds.max - Max/upper bounds value. Null = automatic value.\n\n @property {object} axes.y - Options regarding the Y-axis.\n @property {bool} axes.y.show - If true the X-axis is shown.\n @property {bool} axes.y.inverted - If true the axis direction is inverted.\n @property {bool} axes.y.log - If true the values on the axis are logarithmically distributed.\n @property {int} axes.y.width - Width in pixels of the axis. 0 = automatic size.\n @property {string} axes.y.label - Text of the axis label. Set to \"\" to hide the label.\n @property {int} axes.x.numTicks - Number of ticks to use by the default ticker.\n @property {formatterCallback} axes.y.legendValueFormatter - Callback that formats the legend values. Null = default callback.\n @property {formatterCallback} axes.y.tickerValuePreFormatter - Callback that formats the ticker values before ticks are created. \n @property {formatterCallback} axes.y.tickerValuePostFormatter - Callback that formats the ticker values after ticks are created.\n @property {formatterCallback} axes.y.tickerLabelFormatter - Callback that formats the ticker labels. Null = default callback.\n @property {tickerCallback} axes.y.ticker - Callback that creates the ticks. Null = default callback.\n @property {formatterCallback} axes.y.valueFormatter - Callback that formats the axis labels. Null = default callback.\n\n @property {object} axes.y.grid - Options regarding the Y-axis grid.\n @property {int} axes.y.grid.width - Grid line width/thickness in pixels. 0 = no grid.\n @property {string} axes.y.grid.color - Color of the grid lines.\n\n @property {object} axes.y.bounds - Options regarding the Y-axis bounds.\n @property {number} axes.y.bounds.min - Min/lower bounds value. Null = automatic value.\n @property {number} axes.y.bounds.max - Max/upper bounds value. Null = automatic value.\n\n @property {object} border - Options regarding the graph border.\n @property {string} border.style - Border style. solid, dotted...\n @property {string} border.color - Color of the border lines. red, #FF0000, rgb(255,0,0)\n @property {string} border.width - Width/thickness in pixels of the border. 1px, 1px 2px, 1px 2px 3px 4px.\n\n\n */\n\n/**\n * Callback function for formatting values.\n * @callback formatterCallback\n * @param {number} value\n * @returns {string}\n */\n\n/**\n * Callback function for creating ticks.\n * @callback tickerCallback\n * @param {bool} isLog - True if the values are going to be logarithmically distributed.\n * @param {number} minValue - Min/lower bounds value.\n * @param {number} maxValue - Max/upper bounds value.\n * @param {int} graphSize - Size(width or height) of graph in pixels.\n * @param {int} labelSize - Size(width or height) of tick labels in pixels.\n * @returns {array<{value:number}>}\n */\n\nexport default Options;","/** \n * Static functions.\n */\n\nconst Static = {};\n\n/**\n * Create dummy test data.\n * @public\n * @static\n * @param {int} size - Number of values to create.\n * @returns {array}\n */\nStatic.createDummyData = function (size) {\n    let seed = 3;\n    function random() {\n        seed = Math.sin(seed) * 10000;\n        return seed - Math.floor(seed);\n    }\n    const data1 = new Float32Array(size);\n    const data2 = new Float32Array(size);\n    const mult = Math.PI / 100;\n    for (let i = 0; i < size; ++i) {\n        data1[i] = Math.sin(i * mult) * random();\n        data2[i] = Math.cos(i * mult) * random();\n    }\n    return [data1, data2];\n};\n\n/**\n * Binary search. Get index for given value.\n * @private\n * @static\n * @param {callback} dataCallback - Callback to get value for given index.\n * @param {type} size - Size of data set.\n * @param {type} value - Value to find\n * @returns {object} If found: {found: n}. Else: {min, max} where min > value index < max.\n */\nStatic.binarySearch = function (dataCallback, size, value) {\n    let min = 0;\n    let max = size - 1;\n    while (min <= max) {\n        const mid = Math.floor((min + max) / 2);\n        //Value is smaller than mid.\n        if (value < dataCallback(mid)) {\n            max = mid - 1;\n        }\n        //Value is larger than mid.\n        else if (value > dataCallback(mid)) {\n            min = mid + 1;\n        }\n        //Found value.\n        else {\n            return { found: mid };\n        }\n    }\n    min = Math.min(min, max);\n    max = Math.max(min, max, 0);\n    //Value is larger than max index. Increment max.\n    if (value > dataCallback(max)) {\n        ++max;\n    }\n    //Value is smaller than min index. Decrement min.\n    else if (value < dataCallback(min)) {\n        --min;\n    }\n    return {\n        min: Math.max(min, 0),\n        max: Math.min(max, size - 1)\n    };\n};\n\n/**\n * Get text width in pixels.\n * @public\n * @param {string} text - Text to meassure.\n * @param {string} font - Font to use.\n * @returns {int} - Width in pixels.\n */\nconst context = document.createElement(\"canvas\").getContext(\"2d\");\nStatic.getTextWidth = function (text, font) {\n    if (font) {\n        context.font = font;\n    }\n    return context.measureText(text).width;\n};\n\n/**\n * Round the given number to the given precision.\n * @public\n * @param {number} value\n * @param {int} decimals - Number of decimals.\n * @returns {number}\n */\nStatic.round = function (value, decimals) {\n    if (!decimals) {\n        return Math.round(value);\n    }\n    else {\n        const multiplier = Math.pow(10, decimals);\n        return (Math.round(value * multiplier) / multiplier);\n    }\n};\n\nStatic.log10 = (x) => Math.log(x) / Math.LN10;\n\nStatic.calculateOffset = function (offset) {\n    if (typeof offset === \"number\") {\n        return {\n            top: offset,\n            right: offset,\n            bottom: offset,\n            left: offset\n        };\n    }\n    const div = document.createElement(\"div\");\n    div.style.margin = \"\";\n    div.style.margin = offset;\n    return {\n        top: pxToNum(div.style.marginTop),\n        right: pxToNum(div.style.marginRight),\n        bottom: pxToNum(div.style.marginBottom),\n        left: pxToNum(div.style.marginLeft)\n    }\n}\n\nexport default Static;\n\nfunction pxToNum(str) {\n    return parseInt(str.replace(\"px\", \"\"));\n}","/*\n* @author Andreas Arvidsson\n * https://github.com/AndreasArvidsson/OpenWebProject-graph\n */\n\nif (!window.HTMLCanvasElement || !window.CanvasRenderingContext2D) {\n    throw Error(\"owp.graph ERROR: Your browser does not support the HTML5 Canvas.\");\n}\n\nimport Spinner from \"./lib/spin.min\";\nimport Canvas from \"./Canvas\";\nimport Axis from \"./Axis\";\nimport Interaction from \"./Interaction\";\nimport Static from \"./Static\";\nimport Options from \"./Options\";\nimport Is from \"./Is\";\nimport Callbacks from \"./Callbacks\";\n\n/** \n * The Graph class is a 2D graph plotter.\n * Built with performance and customizability in mind. Supports multiple data\n * sets and all data sets are available as typed arrays.\n */\n\n/**\n * Create new graph.\n * @public\n * @constructor\n * @param {dom|string} container - Element.  DOM or ID string. Graph will fill this element.\n * @param {OPTIONS_OBJECT} options - Options to customize the graph.\n * @returns {Graph}\n */\nfunction Graph(container, options) {\n    if (this instanceof Graph) {\n        this._init(container, options);\n    }\n    //The new keyword was omitted.\n    else {\n        return new Graph(container, options);\n    }\n}\n\n/**\n * Get dummy dataY array.\n * @public\n * @returns {array}\n */\nGraph.createDummyData = Static.createDummyData;\n\n/**\n * Get options instance.\n * @public\n * @returns {OPTIONS_OBJECT}\n */\nGraph.prototype.getOptions = function () {\n    return this._options;\n};\n\n/**\n * Get default options.\n * @public\n * @returns {OPTIONS_OBJECT}\n */\nGraph.getDefaultOptions = Options.getDefault;\n\n/**\n * Sets all options to their default values.\n * @public\n */\nGraph.prototype.setDefaultOptions = function () {\n    this._options.setDefault();\n};\n\n/**\n * Set new options.\n * @public\n * @param {OPTIONS_OBJECT} options - Options to customize the graph.\n */\nGraph.prototype.setOptions = function (options) {\n    this._options.set(options);\n    this._hasCalculatedGraphSize = false;\n    if (this._options.isOk()) {\n        this._axes.x.zoom(this._options.zoom.xMin, this._options.zoom.xMax);\n        this._axes.y.zoom(this._options.zoom.yMin, this._options.zoom.yMax);\n        this._axes.x.calculateBounds();\n        this._axes.y.calculateBounds();\n        this._interaction.updateOptions();\n        this._canvas.graph.setBorder(this._options.border.style, this._options.border.color, this._options.border.width);\n        this._initLegend();\n        this._plot();\n    }\n    else {\n        console.error(\"owp.graph ERROR: Can't plot: Invalid options.\");\n    }\n};\n\n/* ********** PRIVATE ********** */\n\n/**\n * Implementation of the constructor.\n * @private\n */\nGraph.prototype._init = function (container, options) {\n    if (typeof el === \"string\") {\n        container = document.getElementById(container);\n    }\n    if (!container) {\n        console.error(\"owp.graph ERROR: Element dom is null\");\n        return;\n    }\n\n    container.style.position = \"relative\";\n\n    this._container = container;\n    this._options = new Options();\n\n    this._canvas = {\n        background: new Canvas(container, \"background\"),\n        graph: new Canvas(container, \"graph\", true),\n        highlight: new Canvas(container, \"highlight\"),\n        interaction: new Canvas(container, \"interaction\")\n    };\n\n    this._canvas.background.setZIndex(0);\n    this._canvas.graph.setZIndex(1);\n    this._canvas.highlight.setZIndex(2);\n    //Spinner uses zIndex 3.\n    this._canvas.interaction.setZIndex(4);\n    //Smoothing input used zIndex 5.\n\n    this._axes = {\n        x: new Axis(this._options, this._canvas.graph, \"x\"),\n        y: new Axis(this._options, this._canvas.graph, \"y\")\n    };\n\n    this._interaction = new Interaction(this);\n\n    if (options) {\n        this.setOptions(options);\n    }\n    else {\n        console.warn(\"owp.graph WARNING: No options set. Uses default.\");\n        this.setOptions({});\n    }\n};\n\n/**\n * Create legend canvas and attach to parent dom.\n * @private\n */\nGraph.prototype._initLegend = function () {\n    const location = this._options.legend.location;\n    if (location && this._options.interaction.trackMouse) {\n        //DIV id.\n        if (location.toLowerCase() !== \"top\" && location.toLowerCase() !== \"right\") {\n            const legendDiv = document.getElementById(location);\n            if (legendDiv) {\n                legendDiv.style.position = \"relative\";\n                //Reuse existing canvas.\n                if (this._canvas.legend) {\n                    this._canvas.legend.setParent(legendDiv);\n                }\n                //Create new canvas.\n                else {\n                    this._canvas.legend = new Canvas(legendDiv);\n                }\n            }\n            else {\n                console.warn(\"owp.graph WARNING: Legend location: \\\"\" + location + \"\\\" not found.\");\n            }\n        }\n        else {\n            //Set same parent for legend as rest of graph.\n            if (this._canvas.legend) {\n                this._canvas.legend.setParent(this._container);\n            }\n            else {\n                this._canvas.legend = new Canvas(this._container);\n                this._canvas.legend.disableMouseInteraction();\n            }\n            if (location.toLowerCase() === \"top\") {\n                this._canvas.legend.setSize(\"100%\", this._options.legend.size);\n            }\n            else if (location.toLowerCase() === \"right\") {\n                this._canvas.legend.setPosition(0, 0, true);\n                this._canvas.legend.setSize(200, \"100%\");\n            }\n        }\n    }\n    //Remove old legend.\n    else if (this._canvas.legend) {\n        this._canvas.legend.setParent();\n        this._canvas.legend = undefined;\n    }\n};\n\n/**\n * Renders the legend on the background canvas.\n * @private\n */\nGraph.prototype._renderLegend = function (values) {\n    if (!this._canvas.legend || !this._options.graph.dataY.length) {\n        return;\n    }\n\n    const settings = this._options.legend;\n    const canvas = this._canvas.legend;\n    canvas.clear();\n    canvas.set(\"font\", this._options.getLegendFont());\n    canvas.set(\"textBaseline\", \"top\");\n    canvas.set(\"textAlign\", settings.align);\n\n    const isTop = settings.location.toLowerCase() === \"top\";\n    const alignLeft = settings.align.toLowerCase() === \"left\";\n    //newLine is disabled for top location.\n    const newLine = settings.newLine && !isTop || settings.location.toLowerCase() === \"right\";\n\n    let x = alignLeft\n        ? this._options.legend.offsetX + this._options.legend.padding\n        : canvas.getWidth() - this._options.legend.offsetX;\n\n    //OffsetY is disabled for top location.\n    let y = isTop\n        ? 0\n        : this._options.legend.offsetY;\n\n    function printValue(color, name, value) {\n        const str = name + \": \" + (value !== undefined ? value : \"\\u2014\");\n        canvas.text(str, x, y, null, color);\n        if (newLine) {\n            y += settings.size;\n        }\n        else {\n            x += (canvas.getTextWidth(str) + 10) * (alignLeft ? 1 : -1);\n        }\n    }\n\n    const printX = () => {\n        printValue(\n            this._options.graph.colors[0],\n            this._options.getName(0),\n            values ? this._axes.x.formatLegendValue(values[0]) : undefined\n        );\n    }\n\n    const printY = (i) => {\n        printValue(\n            this._options.graph.colors[i],\n            this._options.getName(i),\n            values ? this._axes.y.formatLegendValue(values[i]) : undefined\n        );\n    }\n\n    if (alignLeft || newLine) {\n        printX();\n        for (let i = 1; i <= this._options.graph.dataY.length; ++i) {\n            printY(i);\n        }\n    }\n    else {\n        for (let i = this._options.graph.dataY.length; i >= 1; --i) {\n            printY(i);\n        }\n        printX();\n    }\n};\n\n/**\n * Plots/draws the graph.\n * @private\n */\nGraph.prototype._plot = function () {\n    if (this._options.debug) {\n        console.time(\"owp.graph DEBUG: Plot time\");\n    }\n\n    //If graph size has not yet been calculated. Do it.\n    if (!this._hasCalculatedGraphSize) {\n        this._calculateGraphSize();\n    }\n\n    //Clear plot.\n    this._canvas.background.clear();\n    this._canvas.graph.clear();\n    this._canvas.highlight.clear();\n    this._interaction.clear();\n\n    //Render non data related features.\n    this._renderTitle();\n    this._renderAxesLabels();\n    this._renderSpin();\n\n    //Has bounds. Render bounds related features.\n    if (this._axes.x.hasBounds() && this._axes.y.hasBounds()) {\n        this._renderXAxis();\n        this._renderYAxis();\n        this._renderHighlight();\n\n        //Has graph data. Render graph data.\n        if (this._options.graph.dataY.length) {\n            this._renderLegend();\n            this._renderGraph();\n            this._interaction.render();\n        }\n        else if (this._options.debug) {\n            console.debug(\"owp.graph DEBUG: No data set available. Plotting available features.\");\n        }\n    }\n    //Has neither bounds or data.\n    else if (this._options.debug) {\n        console.debug(\"owp.graph DEBUG: No bounds or data set available. Plotting available features.\");\n    }\n\n    if (this._options.debug) {\n        console.timeEnd(\"owp.graph DEBUG: Plot time\");\n    }\n};\n\n/**\n * Render the spinner\n * @private\n */\nGraph.prototype._renderSpin = function () {\n    //Can't update options so have to remove old spinner always.\n    if (this._spinner) {\n        this._spinner.stop();\n        this._spinner = null;\n    }\n    //Show spinner\n    if (this._options.spinner.show) {\n        //Spinner div does not exist. Create it.\n        if (!this._spinnerDiv) {\n            this._spinnerDiv = document.createElement(\"div\");\n            this._spinnerDiv.style.position = \"absolute\";\n            this._spinnerDiv.style[\"z-index\"] = 3;\n            this._container.append(this._spinnerDiv);\n            this._updateSpinnerSize();\n        }\n        this._spinner = new Spinner(this._options.spinner);\n        this._spinner.spin(this._spinnerDiv);\n    }\n    //Hide spinner. Remove old div.\n    else if (this._spinnerDiv) {\n        this._spinnerDiv.remove();\n        this._spinnerDiv = null;\n    }\n}\n\n/**\n * Updates the position and size of the spinner div based on the graph canvas.\n * @private\n */\nGraph.prototype._updateSpinnerSize = function () {\n    if (this._spinnerDiv) {\n        this._spinnerDiv.style.left = this._canvas.graph.getContentX() + \"px\";\n        this._spinnerDiv.style.top = this._canvas.graph.getContentY() + \"px\";\n        this._spinnerDiv.style.width = this._canvas.graph.getContentWidth() + \"px\";\n        this._spinnerDiv.style.height = this._canvas.graph.getContentHeight() + \"px\";\n    }\n};\n\n/**\n * Calculate graph canvas position and size.\n * @private\n */\nGraph.prototype._calculateGraphSize = function () {\n    const border = this._options.getBorder();\n    const offsetTop = this._getOffset(\"top\");\n    const offsetBottom = this._getOffset(\"bottom\");\n    let height = this._canvas.background.getHeight() - offsetTop - offsetBottom;\n\n    //Calculate new ticks for the new size.\n    if (this._axes.y.hasBounds()) {\n        this._axes.y.calculateTicks(height - border.top - border.bottom);\n    }\n\n    const offsetLeft = this._getOffset(\"left\");\n    let x = offsetLeft;\n    let y = offsetTop;\n    let width = this._canvas.background.getWidth() - offsetLeft - this._getOffset(\"right\");\n\n    if (this._axes.x.hasBounds()) {\n        this._axes.x.calculateTicks(width - border.left - border.right);\n    }\n\n    //Set graph canvas.\n    this._canvas.graph.setPosition(x, y);\n    this._canvas.graph.setSize(width, height);\n\n    //Convert to content space.\n    x = this._canvas.graph.getContentX();\n    y = this._canvas.graph.getContentY();\n    width = this._canvas.graph.getContentWidth();\n    height = this._canvas.graph.getContentHeight();\n\n    //Set highlight canvas.\n    this._canvas.highlight.setPosition(x, y);\n    this._canvas.highlight.setSize(width, height);\n    //Set interaction canvas.\n    this._canvas.interaction.setPosition(x, y);\n    this._canvas.interaction.setSize(width, height);\n    //Set legend canvas if available.\n    if (this._canvas.legend) {\n        if (this._options.legend.location.toLowerCase() === \"top\") {\n            this._canvas.legend.setPosition(x, y - this._canvas.legend.getHeight() - this._options.legend.padding);\n            this._canvas.legend.setSize(width, this._options.legend.size);\n        }\n        else if (this._options.legend.location.toLowerCase() === \"right\") {\n            this._canvas.legend.setPosition(this._options.getOffset().right, y, true);\n            this._canvas.legend.setSize(200, height);\n        }\n    }\n\n    //Update interaction instance.\n    this._interaction.graphChangedSize(x, y, width, height);\n\n    //Updates the spinner div size.\n    this._updateSpinnerSize();\n\n    this._hasCalculatedGraphSize = true;\n};\n\n/**\n * Renders the x-axis(ticks markers, tick labels, grid lines) on the background canvas.\n * @private\n */\nGraph.prototype._renderXAxis = function () {\n    if (!this._options.axes.x.show) {\n        return;\n    }\n    const ticks = this._axes.x.getTicks();\n    let oldX, oldWidth;\n\n    for (let i = 0; i < ticks.length; ++i) {\n        let x = this._canvas.graph.getContentX() + ticks[i].coordinate;\n        let y = this._canvas.graph.getY() + this._canvas.graph.getHeight();\n\n        //Draw tick markers.\n        if (ticks.markers) {\n            y += ticks.markers.offset;\n            this._canvas.background.line(x, y, x, y + ticks.markers.length, ticks.markers.width, ticks.markers.color);\n            y += ticks.markers.length;\n        }\n        //Draw grid line.\n        if (ticks.grid\n            && x > this._canvas.graph.getContentX() * 1.01\n            && x < (this._canvas.graph.getContentX() + this._canvas.graph.getContentWidth()) * 0.99) {\n            this._canvas.background.line(x, this._canvas.graph.getContentY(), x, this._canvas.graph.getContentY() + this._canvas.graph.getContentHeight(), ticks.grid.width, ticks.grid.color);\n        }\n\n        //Move last tick label to the left to avoid collision with the right edge.\n        if (i === ticks.length - 1) {\n            x = Math.min(\n                x,\n                this._canvas.background.getContentWidth() - Math.ceil(ticks.labels.width[i] / 2) - 1\n            );\n        }\n\n        //Draw tick label.\n        if (ticks.labels && (!oldX || Math.abs(x - oldX) > oldWidth + ticks.labels.width[i] / 2)) {\n            y += ticks.labels.padding;\n            this._canvas.background.text(ticks[i].label, x, y, ticks.labels.font, ticks.labels.color, \"center\", \"hanging\");\n            y += ticks.labels.offset;\n            oldX = x;\n            oldWidth = ticks.labels.width[i];\n        }\n    }\n};\n\n/**\n * Renders the y-axis(ticks markers, tick labels, grid lines) on the background canvas.\n * @private\n */\nGraph.prototype._renderYAxis = function () {\n    if (!this._options.axes.y.show) {\n        return;\n    }\n    const ticks = this._axes.y.getTicks();\n    let oldY;\n    for (let i = 0; i < ticks.length; ++i) {\n        let x = this._canvas.graph.getX();\n        let y = this._canvas.graph.getContentY() + ticks[i].coordinate;\n        //Draw tick markers.\n        if (ticks.markers) {\n            x -= ticks.markers.offset;\n            this._canvas.background.line(x, y, x - ticks.markers.length, y, ticks.markers.width, ticks.markers.color);\n            x -= ticks.markers.length;\n        }\n        //Draw grid line.\n        if (ticks.grid && y > this._canvas.graph.getContentY() * 1.01 && y < (this._canvas.graph.getContentY() + this._canvas.graph.getContentHeight()) * 0.99) {\n            this._canvas.background.line(this._canvas.graph.getContentX(), y, this._canvas.graph.getContentX() + this._canvas.graph.getContentWidth(), y, ticks.grid.width, ticks.grid.color);\n        }\n        //Draw tick label.\n        if (ticks.labels && (!oldY || Math.abs(y - oldY) > ticks.labels.size)) {\n            x -= ticks.labels.padding;\n            this._canvas.background.text(ticks[i].label, x, y, ticks.labels.font, ticks.labels.color, \"right\", \"middle\");\n            x -= ticks.labels.offset;\n            oldY = y;\n        }\n    }\n};\n\n/**\n * Renders the axes(x and y) labels on the background canvas.\n * @private\n */\nGraph.prototype._renderAxesLabels = function () {\n    //Draw X label.\n    if (this._options.axes.x.show && this._options.axes.x.label.length) {\n        const x = this._canvas.graph.getContentX() + this._canvas.graph.getContentWidth() / 2;\n        const y = this._canvas.background.getHeight() - this._options.axes.labels.offset - this._options.getOffset().bottom;\n        this._canvas.background.text(this._axes.x.getAxisLabel(), x, y, this._axes.x.getAxisLabelFont(), this._options.axes.labels.color, \"center\", \"bottom\");\n    }\n    //Draw Y label.\n    if (this._options.axes.y.show && this._options.axes.y.label.length) {\n        const x = this._options.axes.labels.offset + this._options.getOffset().left;\n        const y = this._canvas.graph.getContentY() + this._canvas.graph.getContentHeight() / 2;\n        this._canvas.background.text(this._axes.y.getAxisLabel(), x, y, this._axes.y.getAxisLabelFont(), this._options.axes.labels.color, \"center\", \"hanging\", -90);\n    }\n};\n\n/**\n * Renders the graph title on the background canvas.\n * @private\n */\nGraph.prototype._renderTitle = function () {\n    if (!this._options.title.label.length) {\n        return;\n    }\n    let x;\n    if (this._options.title.align.toLowerCase() === \"left\") {\n        x = this._canvas.graph.getContentX() + this._options.title.offsetX + this._options.getOffset().left;\n    }\n    else if (this._options.title.align.toLowerCase() === \"center\") {\n        x = this._canvas.graph.getContentX() + this._canvas.graph.getContentWidth() / 2 + this._options.title.offsetX;\n    }\n    else if (this._options.title.align.toLowerCase() === \"right\") {\n        x = this._canvas.graph.getContentX() + this._canvas.graph.getContentWidth() - this._options.title.offsetX - this._options.getOffset().right;\n    }\n    const y = this._options.title.offsetY + this._options.getOffset().top;\n    const font = (this._options.title.bold ? \"bold \" : \"\") + this._options.title.size + \"px \" + this._options.title.font;\n    this._canvas.background.text(this._options.title.label, x, y, font, this._options.title.color, this._options.title.align, \"top\");\n};\n\n/**\n * Renders the highligted area on the highligh canvas.\n * @private\n */\nGraph.prototype._renderHighlight = function () {\n    this._canvas.highlight.clear();\n    const h = this._options.highlight;\n    if (Is.isNull(h.xMin) && Is.isNull(h.xMax) && Is.isNull(h.yMin) && Is.isNull(h.yMax)) {\n        return;\n    }\n    //Convert values to pixels.\n    const x1 = this._axes.x.valueToPixel(\n        Is.isNull(h.xMin) ? this._axes.x.getMin() : h.xMin\n    );\n    const x2 = this._axes.x.valueToPixel(\n        Is.isNull(h.xMax) ? this._axes.x.getMax() : h.xMax\n    );\n    const y1 = this._axes.y.valueToPixel(\n        Is.isNull(h.yMin) ? this._axes.y.getMin() : h.yMin\n    );\n    const y2 = this._axes.y.valueToPixel(\n        Is.isNull(h.yMax) ? this._axes.y.getMax() : h.yMax\n    );\n    this._canvas.highlight.fillRectangle2(x1, y1, x2, y2, h.color);\n};\n\n/**\n * Renders the graph curve on the graph canvas.\n * @private\n */\nGraph.prototype._renderGraph = function () {\n    if (this._options.debug && this._options.graph.smoothing > 1) {\n        console.debug(\"owp.graph DEBUG: Smoothed rendering: \" + this._options.graph.smoothing);\n    }\n    if (this._options.debug && this._options.renderSimplify()) {\n        console.debug(`owp.graph DEBUG: Simplify rendering: ${this._options.graph.simplify} ${this._options.graph.simplifyBy}`);\n    }\n    //Clear old data so we can draw new.\n    this._canvas.graph.clear();\n    //Get canvas and set properties.\n    const ctx = this._canvas.graph.getContext();\n    ctx.lineWidth = this._options.graph.lineWidth;\n    ctx.globalCompositeOperation = this._options.graph.compositeOperation;\n    //Get render callback based on options\n    const renderCallback = Callbacks.getRenderCallback(this._options, this._canvas.graph, this._axes);\n    //Render each data set.\n    for (let i = 0; i < this._options.graph.dataY.length; ++i) {\n        renderCallback(i);\n    }\n};\n\n/**\n * Get offset for the given paramters.\n * @private\n */\nGraph.prototype._getOffset = function (side) {\n    let offset = 0;\n    switch (side) {\n        case \"top\":\n            if (this._options.title.label.length) {\n                offset += this._options.title.size;\n                offset += this._options.title.offsetY;\n                offset += this._options.title.padding;\n            }\n            if (this._canvas.legend && this._options.legend.location.toLowerCase() === \"top\") {\n                offset += this._canvas.legend.getHeight();\n                offset += this._options.legend.offsetY;\n                offset += this._options.legend.padding;\n            }\n            else if (this._options.axes.y.show && this._options.axes.tickLabels.show) {\n                offset += this._options.axes.tickLabels.size / 2;\n            }\n            offset += this._options.getOffset().top;\n            break;\n        case \"bottom\":\n            if (this._options.axes.x.show) {\n                if (this._options.axes.x.label.length) {\n                    offset += this._options.axes.labels.size;\n                    offset += this._options.axes.labels.offset;\n                    offset += this._options.axes.labels.padding;\n                }\n                if (this._options.axes.x.height) {\n                    offset += this._options.axes.x.height;\n                }\n                else {\n                    if (this._options.axes.tickLabels.show) {\n                        offset += this._options.axes.tickLabels.size;\n                        offset += this._options.axes.tickLabels.offset;\n                        offset += this._options.axes.tickLabels.padding;\n                    }\n                    if (this._options.axes.tickMarkers.show) {\n                        offset += this._options.axes.tickMarkers.length;\n                        offset += this._options.axes.tickMarkers.offset;\n                    }\n                }\n            }\n            else if (this._options.axes.y.show && this._options.axes.tickLabels.show) {\n                offset += this._options.axes.tickLabels.size / 2;\n            }\n            offset += this._options.getOffset().bottom;\n            break;\n        case \"left\":\n            if (this._options.axes.y.show) {\n                if (this._options.axes.y.label.length) {\n                    offset += this._options.axes.labels.size;\n                    offset += this._options.axes.labels.offset;\n                    offset += this._options.axes.labels.padding;\n                }\n                if (this._options.axes.y.width) {\n                    offset += this._options.axes.y.width;\n                }\n                else {\n                    if (this._options.axes.tickLabels.show) {\n                        offset += this._axes.y.getLabelWidth();\n                        offset += this._options.axes.tickLabels.offset;\n                        offset += this._options.axes.tickLabels.padding;\n                    }\n                    if (this._options.axes.tickMarkers.show) {\n                        offset += this._options.axes.tickMarkers.length;\n                        offset += this._options.axes.tickMarkers.offset;\n                    }\n                }\n            }\n            else if (this._options.axes.x.show && this._options.axes.tickLabels.show) {\n                offset += this._axes.x.getBoundLabelWidth(\"min\", true);\n            }\n            offset += this._options.getOffset().left;\n            break;\n        case \"right\":\n            if (this._canvas.legend && this._options.legend.location.toLowerCase() === \"right\") {\n                offset += this._canvas.legend.getWidth();\n            }\n            offset += this._options.getOffset().right;\n            break;\n    }\n    return Math.round(offset);\n};\n\nexport default Graph;","// http://spin.js.org/#v2.3.2\r\n!function(a,b){\"object\"==typeof module&&module.exports?module.exports=b():\"function\"==typeof define&&define.amd?define(b):a.Spinner=b()}(this,function(){\"use strict\";function a(a,b){var c,d=document.createElement(a||\"div\");for(c in b)d[c]=b[c];return d}function b(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function c(a,b,c,d){var e=[\"opacity\",b,~~(100*a),c,d].join(\"-\"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=j.substring(0,j.indexOf(\"Animation\")).toLowerCase(),i=h&&\"-\"+h+\"-\"||\"\";return m[e]||(k.insertRule(\"@\"+i+\"keyframes \"+e+\"{0%{opacity:\"+g+\"}\"+f+\"%{opacity:\"+a+\"}\"+(f+.01)+\"%{opacity:1}\"+(f+b)%100+\"%{opacity:\"+a+\"}100%{opacity:\"+g+\"}}\",k.cssRules.length),m[e]=1),e}function d(a,b){var c,d,e=a.style;if(b=b.charAt(0).toUpperCase()+b.slice(1),void 0!==e[b])return b;for(d=0;d<l.length;d++)if(c=l[d]+b,void 0!==e[c])return c}function e(a,b){for(var c in b)a.style[d(a,c)||c]=b[c];return a}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)void 0===a[d]&&(a[d]=c[d])}return a}function g(a,b){return\"string\"==typeof a?a:a[b%a.length]}function h(a){this.opts=f(a||{},h.defaults,n)}function i(){function c(b,c){return a(\"<\"+b+' xmlns=\"urn:schemas-microsoft.com:vml\" class=\"spin-vml\">',c)}k.addRule(\".spin-vml\",\"behavior:url(#default#VML)\"),h.prototype.lines=function(a,d){function f(){return e(c(\"group\",{coordsize:k+\" \"+k,coordorigin:-j+\" \"+-j}),{width:k,height:k})}function h(a,h,i){b(m,b(e(f(),{rotation:360/d.lines*a+\"deg\",left:~~h}),b(e(c(\"roundrect\",{arcsize:d.corners}),{width:j,height:d.scale*d.width,left:d.scale*d.radius,top:-d.scale*d.width>>1,filter:i}),c(\"fill\",{color:g(d.color,a),opacity:d.opacity}),c(\"stroke\",{opacity:0}))))}var i,j=d.scale*(d.length+d.width),k=2*d.scale*j,l=-(d.width+d.length)*d.scale*2+\"px\",m=e(f(),{position:\"absolute\",top:l,left:l});if(d.shadow)for(i=1;i<=d.lines;i++)h(i,-2,\"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)\");for(i=1;i<=d.lines;i++)h(i);return b(a,m)},h.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}var j,k,l=[\"webkit\",\"Moz\",\"ms\",\"O\"],m={},n={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:\"#000\",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:\"spinner\",top:\"50%\",left:\"50%\",shadow:!1,hwaccel:!1,position:\"absolute\"};if(h.defaults={},f(h.prototype,{spin:function(b){this.stop();var c=this,d=c.opts,f=c.el=a(null,{className:d.className});if(e(f,{position:d.position,width:0,zIndex:d.zIndex,left:d.left,top:d.top}),b&&b.insertBefore(f,b.firstChild||null),f.setAttribute(\"role\",\"progressbar\"),c.lines(f,c.opts),!j){var g,h=0,i=(d.lines-1)*(1-d.direction)/2,k=d.fps,l=k/d.speed,m=(1-d.opacity)/(l*d.trail/100),n=l/d.lines;!function o(){h++;for(var a=0;a<d.lines;a++)g=Math.max(1-(h+(d.lines-a)*n)%l*m,d.opacity),c.opacity(f,a*d.direction+i,g,d);c.timeout=c.el&&setTimeout(o,~~(1e3/k))}()}return c},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(d,f){function h(b,c){return e(a(),{position:\"absolute\",width:f.scale*(f.length+f.width)+\"px\",height:f.scale*f.width+\"px\",background:b,boxShadow:c,transformOrigin:\"left\",transform:\"rotate(\"+~~(360/f.lines*k+f.rotate)+\"deg) translate(\"+f.scale*f.radius+\"px,0)\",borderRadius:(f.corners*f.scale*f.width>>1)+\"px\"})}for(var i,k=0,l=(f.lines-1)*(1-f.direction)/2;k<f.lines;k++)i=e(a(),{position:\"absolute\",top:1+~(f.scale*f.width/2)+\"px\",transform:f.hwaccel?\"translate3d(0,0,0)\":\"\",opacity:f.opacity,animation:j&&c(f.opacity,f.trail,l+k*f.direction,f.lines)+\" \"+1/f.speed+\"s linear infinite\"}),f.shadow&&b(i,e(h(\"#000\",\"0 0 4px #000\"),{top:\"2px\"})),b(d,b(i,h(g(f.color,k),\"0 0 1px rgba(0,0,0,.1)\")));return d},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}}),\"undefined\"!=typeof document){k=function(){var c=a(\"style\",{type:\"text/css\"});return b(document.getElementsByTagName(\"head\")[0],c),c.sheet||c.styleSheet}();var o=e(a(\"group\"),{behavior:\"url(#default#VML)\"});!d(o,\"transform\")&&o.adj?i():j=d(o,\"animation\")}return h});"],"sourceRoot":""}